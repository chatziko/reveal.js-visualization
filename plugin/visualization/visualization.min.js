(function(){function EventListener(){this.events=[]}function AnimatedBTreeNode(t,e,i,s,h,r){AnimatedBTreeNode.superclass.constructor.call(this),this.objectID=t,this.widthPerElement=e,this.nodeHeight=i,this.numLabels=s,this.backgroundColor=void 0==h?"#FFFFFF":h,this.foregroundColor=void 0==r?"#000000":r,this.labels=new Array(this.numLabels),this.labelColors=new Array(this.numLabels);for(var n=0;n<this.numLabels;n++)this.labelColors[n]=this.foregroundColor}function UndoDeleteBTreeNode(t,e,i,s,h,r,n,a,o,l,d,c){this.objectID=t,this.posX=s,this.posY=h,this.widthPerElem=r,this.nodeHeight=n,this.backgroundColor=o,this.foregroundColor=l,this.numElems=e,this.labels=i,this.labelColors=a,this.layer=d,this.highlighted=c}Function.prototype.inheritFrom=function(t){this.superclass=t.prototype,this.prototype=Object.create(this.superclass),this.prototype.constructor=this},Function.prototype.bind||(Function.prototype.bind=function(){var t=this,e=Array.prototype.slice.call(arguments),i=e.shift();return function(){for(var s=0;s<arguments.length;s++)e.push(arguments[s]);return t.apply(i,e)}}),EventListener.prototype.removeListener=function(t,e,i){if(void 0!=this.events[t]){var s,h=null;for(s=0;s<this.events[t].length;s++)if(this.events[t][s].scope==e){h=this.events[t][s];break}if(null!=h)for(s=0;s<h.functions.length;s++)if(h.functions[s]==i)return void h.functions.splice(s,1)}},EventListener.prototype.addListener=function(t,e,i){var s;void 0===this.events[t]&&(this.events[t]=[]);var h=null;for(s=0;s<this.events[t].length;s++)if(this.events[t][s].scope==e){h=this.events[t][s];break}for(null===h&&(this.events[t].push({scope:e,functions:[]}),h=this.events[t][this.events[t].length-1]),s=0;s<h.functions.length;s++)if(h.functions[s]==i)return;h.functions.push(i)},EventListener.prototype.fireEvent=function(t,e){if(void 0!==this.events[t])for(var i=0;i<this.events[t].length;i++)for(var s=this.events[t][i],h=s.functions,r=s.scope,n=0;n<h.length;n++){h[n].call(r,e)}},AnimatedBTreeNode.inheritFrom(AnimatedObject),AnimatedBTreeNode.MIN_WIDTH=10,AnimatedBTreeNode.EDGE_POINTER_DISPLACEMENT=5,AnimatedBTreeNode.prototype.getNumElements=function(){return this.numLabels},AnimatedBTreeNode.prototype.getWidth=function(){return this.numLabels>0?this.widthPerElement*this.numLabels:AnimatedBTreeNode.MIN_WIDTH},AnimatedBTreeNode.prototype.setNumElements=function(t){var e;if(this.numLabels<t){for(e=this.numLabels;e<t;e++)this.labels[e]="",this.labelColors[e]=this.foregroundColor;this.numLabels=t}else if(this.numLabels>t){for(e=t;e<this.numLabels;e++)this.labels[e]=null;this.numLabels=t}},AnimatedBTreeNode.prototype.left=function(){return this.x-this.getWidth()/2},AnimatedBTreeNode.prototype.right=function(){return this.x+this.getWidth()/2},AnimatedBTreeNode.prototype.top=function(){return this.y-this.nodeHeight/2},AnimatedBTreeNode.prototype.bottom=function(){return this.y+this.nodeHeight/2},AnimatedBTreeNode.prototype.draw=function(t){var e,i;NaN==(e=this.left())&&(e=0),i=this.top(),this.highlighted&&(t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.moveTo(e-this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.getWidth()+this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.getWidth()+this.highlightDiff,i+this.nodeHeight+this.highlightDiff),t.lineTo(e-this.highlightDiff,i+this.nodeHeight+this.highlightDiff),t.lineTo(e-this.highlightDiff,i-this.highlightDiff),t.closePath(),t.stroke(),t.fill()),t.strokeStyle=this.foregroundColor,t.fillStyle=this.backgroundColor,t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.getWidth(),i),t.lineTo(e+this.getWidth(),i+this.nodeHeight),t.lineTo(e,i+this.nodeHeight),t.lineTo(e,i),t.closePath(),t.stroke(),t.fill(),t.textAlign="center",t.textBaseline="middle";for(var s=0;s<this.numLabels;s++){var h=this.x-this.widthPerElement*this.numLabels/2+this.widthPerElement/2+s*this.widthPerElement,r=this.y;t.fillStyle=this.labelColors[s],t.fillText(this.labels[s],h,r)}},AnimatedBTreeNode.prototype.getHeight=function(){return this.nodeHeight},AnimatedBTreeNode.prototype.setForegroundColor=function(t){this.foregroundColor=t;for(var e=0;e<numLabels;e++)labelColor[e]=t},AnimatedBTreeNode.prototype.getTailPointerAttachPos=function(t,e,i){return 0==i?[this.left()+AnimatedBTreeNode.EDGE_POINTER_DISPLACEMENT,this.y]:i==this.numLabels?[this.right()-AnimatedBTreeNode.EDGE_POINTER_DISPLACEMENT,this.y]:[this.left()+i*this.widthPerElement,this.y]},AnimatedBTreeNode.prototype.getHeadPointerAttachPos=function(t,e){return e<this.y-this.nodeHeight/2?[this.x,this.y-this.nodeHeight/2]:this.fromY>this.y+this.nodeHeight/2?[this.x,this.y+this.nodeHeight/2]:t<this.x-this.getWidth()/2?[this.x-this.getWidth()/2,this.y]:[this.x+this.getWidth()/2,this.y]},AnimatedBTreeNode.prototype.createUndoDelete=function(){return new UndoDeleteBTreeNode(this.objectID,this.numLabels,this.labels,this.x,this.y,this.widthPerElement,this.nodeHeight,this.labelColors,this.backgroundColor,this.foregroundColor,this.layer,this.highlighted)},AnimatedBTreeNode.prototype.getTextColor=function(t){return t=void 0==t?0:t,this.labelColors[t]},AnimatedBTreeNode.prototype.getText=function(t){return t=void 0==t?0:t,this.labels[t]},AnimatedBTreeNode.prototype.setTextColor=function(t,e){e=void 0==e?0:e,this.labelColors[e]=t},AnimatedBTreeNode.prototype.setText=function(t,e){e=void 0==e?0:e,this.labels[e]=t},UndoDeleteBTreeNode.inheritFrom(UndoBlock),UndoDeleteBTreeNode.prototype.undoInitialStep=function(t){t.addBTreeNode(this.objectID,this.widthPerElem,this.nodeHeight,this.numElems,this.backgroundColor,this.foregroundColor),t.setNodePosition(this.objectID,this.posX,this.posY);for(var e=0;e<this.numElems;e++)t.setText(this.objectID,this.labels[e],e),t.setTextColor(this.objectID,this.labelColors[e],e);t.setHighlight(this.objectID,this.highlighted),t.setLayer(this.objectID,this.layer)};var AnimatedCircle=function(t,e){AnimatedCircle.superclass.constructor.call(this),this.objectID=t,this.label=e,this.radius=20,this.thickness=3,this.x=0,this.y=0,this.alpha=1,this.addedToScene=!0,this.highlightIndex=-1,this.textHeight=10};function UndoDeleteCircle(t,e,i,s,h,r,n,a){this.objectID=t,this.posX=i,this.posY=s,this.nodeLabel=e,this.fgColor=h,this.bgColor=r,this.layer=n,this.radius=a}function AnimatedLabel(t,e,i,s,h){AnimatedLabel.superclass.constructor.call(this),this.centering=i,this.label=e,this.highlighted=!1,this.objectID=t,this.alpha=1,this.addedToScene=!0,this.labelColor="#000000",this.textWidth=0,this.ctx=h,this.height=10,void 0!=s?this.textWidth=s:this.width=getTextWidth(),this.leftWidth=-1,this.centerWidth=-1,this.highlightIndex=-1}function UndoDeleteLabel(t,e,i,s,h,r,n,a){this.objectID=t,this.posX=i,this.posY=s,this.nodeLabel=e,this.labCentered=h,this.labelColor=r,this.layer=n,this.highlightIndex=a,this.dirty=!0}function AnimatedLinkedList(t,e,i,s,h,r,n,a,o,l){AnimatedLinkedList.superclass.constructor.call(this),this.w=i,this.h=s,this.backgroundColor=o,this.foregroundColor=l,this.val=e,this.vertical=r,this.linkPositionEnd=n,this.linkPercent=h,this.numLabels=a,this.objectID=t,this.labels=[],this.labelPosX=[],this.labelPosY=[],this.labelColors=[],this.nullPointer=!1,this.currentHeightDif=6,this.maxHeightDiff=5,this.minHeightDiff=3;for(var d=0;d<this.numLabels;d++)this.labels[d]="",this.labelPosX[d]=0,this.labelPosY[d]=0,this.labelColors[d]=this.foregroundColor;this.labels[0]=this.val,this.highlighted=!1}function UndoDeleteLinkedList(t,e,i,s,h,r,n,a,o,l,d,c,g,m,p){this.objectID=t,this.posX=s,this.posY=h,this.width=r,this.height=n,this.backgroundColor=c,this.foregroundColor=g,this.labels=i,this.linkPercent=a,this.verticalOrentation=l,this.linkAtEnd=o,this.labelColors=d,this.layer=m,this.numLabels=e,this.nullPointer=p}function AnimatedObject(){this.backgroundColor="#FFFFFF",this.foregroundColor="#000000",this.highlighted=!1,this.objectID=-1,this.layer=0,this.addedToScene=!0,this.label="",this.labelColor="#000000",this.alpha=1,this.x=0,this.y=0,this.minHeightDiff=3,this.range=5,this.highlightIndex=-1,this.highlightIndexDirty=!0,this.textHeight=10}function UndoDeleteRectangle(t,e,i,s,h,r,n,a,o,l,d,c){this.objectID=t,this.posX=i,this.posY=s,this.width=h,this.height=r,this.xJustify=n,this.yJustify=a,this.backgroundColor=o,this.foregroundColor=l,this.nodeLabel=e,this.layer=c,this.highlighted=d}function reorderSibling(t,e){t.parentNode.replaceChild(t,e),t.parentNode.insertBefore(e,t)}function swapControlDiv(){this.swapped=!this.swapped,this.swapped?(reorderSibling(this.canvas,this.generalControlBar.parentNode),setCookie("VisualizationControlSwapped","true",30)):(reorderSibling(this.generalControlBar.parentNode,this.canvas),setCookie("VisualizationControlSwapped","false",30))}function getCookie(t){var e,i,s,h=document.cookie.split(";");for(e=0;e<h.length;e++)if(i=h[e].substr(0,h[e].indexOf("=")),s=h[e].substr(h[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return unescape(s)}function setCookie(t,e,i){var s=new Date;s.setDate(s.getDate()+i);escape(e),null==i||s.toUTCString();document.cookie=t+"="+e}AnimatedCircle.inheritFrom(AnimatedObject),AnimatedCircle.prototype.getTailPointerAttachPos=function(t,e,i){return this.getHeadPointerAttachPos(t,e)},AnimatedCircle.prototype.getWidth=function(){return 2*this.radius},AnimatedObject.prototype.setWidth=function(t){this.radius=t/2},AnimatedCircle.prototype.getHeadPointerAttachPos=function(t,e){var i=t-this.x,s=e-this.y,h=Math.sqrt(i*i+s*s);return 0==h?[this.x,this.y]:[this.x+i/h*this.radius,this.y+s/h*this.radius]},AnimatedCircle.prototype.setHighlightIndex=function(t){this.highlightIndex=t,this.highlightIndexDirty=!0},AnimatedCircle.prototype.draw=function(t){t.globalAlpha=this.alpha,this.highlighted&&(t.fillStyle="#ff0000",t.beginPath(),t.arc(this.x,this.y,this.radius+this.highlightDiff,0,2*Math.PI,!0),t.closePath(),t.fill()),t.fillStyle=this.backgroundColor,t.strokeStyle=this.foregroundColor,t.lineWidth=1,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke(),t.textAlign="center",t.font=this.textHeight.toString()+"px sans-serif",t.textBaseline="middle",t.lineWidth=1,t.fillStyle=this.foregroundColor;var e=this.label.split("\n");if(1==e.length)if(this.highlightIndexDirty&&-1!=this.highlightIndex&&(this.leftWidth=t.measureText(this.label.substring(0,this.highlightIndex)).width,this.centerWidth=t.measureText(this.label.substring(this.highlightIndex,this.highlightIndex+1)).width,this.textWidth=t.measureText(this.label).width,this.highlightIndexDirty=!1),-1!=this.highlightIndex&&this.highlightIndex<this.label.length){var i=this.x-this.textWidth/2;t.textAlign="left";var s=this.label.substring(0,this.highlightIndex),h=this.label.substring(this.highlightIndex,this.highlightIndex+1),r=this.label.substring(this.highlightIndex+1);t.fillText(s,i,this.y),t.strokeStyle="#FF0000",t.fillStyle="#FF0000",t.fillText(h,i+this.leftWidth,this.y),t.strokeStyle=this.labelColor,t.fillStyle=this.labelColor,t.fillText(r,i+this.leftWidth+this.centerWidth,this.y)}else t.fillText(this.label,this.x,this.y);else if(e.length%2==0){var n=e.length/2;for(a=0;a<e.length/2;a++)t.fillText(e[n-a-1],this.x,this.y-12*(a+.5)),t.fillText(e[n+a],this.x,this.y+12*(a+.5))}else{var a;n=(e.length-1)/2;for(t.fillText(e[n],this.x,this.y),a=0;a<n;a++)t.fillText(e[n-(a+1)],this.x,this.y-12*(a+1)),t.fillText(e[n+(a+1)],this.x,this.y+12*(a+1))}},AnimatedCircle.prototype.createUndoDelete=function(){return new UndoDeleteCircle(this.objectID,this.label,this.x,this.y,this.foregroundColor,this.backgroundColor,this.layer,this.radius)},UndoDeleteCircle.inheritFrom(UndoBlock),UndoDeleteCircle.prototype.undoInitialStep=function(t){t.addCircleObject(this.objectID,this.nodeLabel),t.setWidth(this.objectID,2*this.radius),t.setNodePosition(this.objectID,this.posX,this.posY),t.setForegroundColor(this.objectID,this.fgColor),t.setBackgroundColor(this.objectID,this.bgColor),t.setLayer(this.objectID,this.layer)},AnimatedLabel.inheritFrom(AnimatedObject),AnimatedLabel.prototype.alwaysOnTop=!0,AnimatedLabel.prototype.centered=function(){return this.centering},AnimatedLabel.prototype.draw=function(t){if(this.addedToScene){t.globalAlpha=this.alpha,t.font=this.height.toString()+"px sans-serif";var e=this.x;if(this.highlightIndex>=this.label.length&&(this.highlightIndex=-1),this.highlightIndexDirty&&-1!=this.highlightIndex&&(this.leftWidth=t.measureText(this.label.substring(0,this.highlightIndex)).width,this.centerWidth=t.measureText(this.label.substring(this.highlightIndex,this.highlightIndex+1)).width,this.highlightIndexDirty=!1),this.centering?-1!=this.highlightIndex?(e=this.x-this.width/2,t.textAlign="left",t.textBaseline="middle"):(t.textAlign="center",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="top"),this.highlighted&&(t.strokeStyle="#ffaaaa",t.fillStyle="#ff0000",t.lineWidth=this.highlightDiff,t.strokeText(this.label,this.x,this.y)),t.strokeStyle=this.labelColor,t.fillStyle=this.labelColor,t.lineWidth=1,strList=this.label.split("\n"),1==strList.length)if(-1==this.highlightIndex)t.fillText(this.label,this.x,this.y);else{var i=this.label.substring(0,this.highlightIndex),s=this.label.substring(this.highlightIndex,this.highlightIndex+1),h=this.label.substring(this.highlightIndex+1);t.fillText(i,e,this.y),t.strokeStyle="#FF0000",t.fillStyle="#FF0000",t.fillText(s,e+this.leftWidth,this.y),t.strokeStyle=this.labelColor,t.fillStyle=this.labelColor,t.fillText(h,e+this.leftWidth+this.centerWidth,this.y)}else for(var r=this.centering?(1-strList.length)/2:0,n=0;n<strList.length;n++)t.fillText(strList[n],this.x,this.y+r+12*n);t.closePath()}},AnimatedLabel.prototype.getTextWidth=function(){this.ctx.font=this.height.toString()+"px sans-serif";var t=this.label.split("\n"),e=0;if(1==t.length)e=this.ctx.measureText(this.label).width;else for(var i=0;i<t.length;i++)e=Math.max(e,this.ctx.measureText(t[i]).width);return e},AnimatedLabel.prototype.getAlignLeftPos=function(t){return this.centering?[t.left()-this.textWidth/2,this.y=t.centerY()]:[t.left()-this.textWidth,t.centerY()-this.height/2]},AnimatedLabel.prototype.alignLeft=function(t){this.centering?(this.y=t.centerY(),this.x=t.left()-this.textWidth/2):(this.y=t.centerY()-this.height/2,this.x=t.left()-this.textWidth)},AnimatedLabel.prototype.alignRight=function(t){this.centering?(this.y=t.centerY(),this.x=t.right()+this.textWidth/2):(this.y=t.centerY()-this.height/2,this.x=t.right())},AnimatedLabel.prototype.getAlignRightPos=function(t){return this.centering?[t.right()+this.textWidth/2,t.centerY()]:[t.right(),t.centerY()-this.height/2]},AnimatedLabel.prototype.alignTop=function(t){this.centering?(this.y=t.top()-this.height/2,this.x=t.centerX()):(this.y=t.top()-10,this.x=t.centerX()-this.textWidth/2)},AnimatedLabel.prototype.getAlignTopPos=function(t){return this.centering?[t.centerX(),t.top()-this.height/2]:[t.centerX()-this.textWidth/2,t.top()-10]},AnimatedLabel.prototype.alignBottom=function(t){this.centering?(this.y=t.bottom()+this.height/2,this.x=t.centerX()):(this.y=t.bottom(),this.x=t.centerX()-this.textWidth/2)},AnimatedLabel.prototype.getAlignBottomPos=function(t){return this.centering?[t.centerX(),t.bottom()+this.height/2]:[t.centerX()-this.textWidth/2,t.bottom()]},AnimatedLabel.prototype.getWidth=function(){return this.textWidth},AnimatedLabel.prototype.getHeight=function(){return this.height},AnimatedLabel.prototype.setHeight=function(t){this.height=t,this.textWidth=this.getTextWidth()},AnimatedLabel.prototype.setHighlight=function(t){this.highlighted=t},AnimatedLabel.prototype.createUndoDelete=function(){return new UndoDeleteLabel(this.objectID,this.label,this.x,this.y,this.centering,this.labelColor,this.layer,this.highlightIndex)},AnimatedLabel.prototype.centerX=function(){return this.centering?this.x:this.x+this.textWidth},AnimatedLabel.prototype.centerY=function(){return this.centering?this.y:this.y+this.height/2},AnimatedLabel.prototype.top=function(){return this.centering?this.y-this.height/2:this.y},AnimatedLabel.prototype.bottom=function(){return this.centering?this.y+this.height/2:this.y+this.height},AnimatedLabel.prototype.right=function(){return this.centering?this.x+this.textWidth/2:this.x+this.textWidth},AnimatedLabel.prototype.left=function(){return this.centering?this.x-this.textWidth/2:this.x},AnimatedLabel.prototype.setHighlightIndex=function(t){-1==this.label.indexOf("\n")&&this.label.length>t?(this.highlightIndex=t,this.highlightIndexDirty=!0):this.highlightIndex=-1},AnimatedLabel.prototype.getTailPointerAttachPos=function(t,e,i){return this.getClosestCardinalPoint(t,e)},AnimatedLabel.prototype.getHeadPointerAttachPos=function(t,e){return this.getClosestCardinalPoint(t,e)},AnimatedLabel.prototype.setText=function(t,e,i){this.label=t,void 0!=i&&(this.textWidth=i),this.textWidth=this.getTextWidth()},UndoDeleteLabel.inheritFrom(UndoBlock),UndoDeleteLabel.prototype.undoInitialStep=function(t){t.addLabelObject(this.objectID,this.nodeLabel,this.labCentered),t.setNodePosition(this.objectID,this.posX,this.posY),t.setForegroundColor(this.objectID,this.labelColor),t.setLayer(this.objectID,this.layer)},AnimatedLinkedList.inheritFrom(AnimatedObject),AnimatedLinkedList.prototype.left=function(){return this.vertical?this.x-this.w/2:this.linkPositionEnd?this.x-this.w*(1-this.linkPercent)/2:this.x-this.w*(this.linkPercent+1)/2},AnimatedLinkedList.prototype.setNull=function(t){this.nullPointer!=t&&(this.nullPointer=t)},AnimatedLinkedList.prototype.getNull=function(){return this.nullPointer},AnimatedLinkedList.prototype.right=function(){return this.vertical?this.x+this.w/2:this.linkPositionEnd?this.x+this.w*(this.linkPercent+1)/2:this.x+this.w*(1-this.linkPercent)/2},AnimatedLinkedList.prototype.top=function(){return this.vertical?this.linkPositionEnd?this.y-this.h*(1-this.linkPercent)/2:this.y-this.h*(1+this.linkPercent)/2:this.y-this.h/2},AnimatedLinkedList.prototype.bottom=function(){return this.vertical?this.linkPositionEnd?this.y+this.h*(1+this.linkPercent)/2:this.y+this.h*(1-this.linkPercent)/2:this.y+this.h/2},AnimatedLinkedList.prototype.resetTextPosition=function(){if(this.vertical){this.labelPosX[0]=this.x,this.labelPosY[0]=this.y+this.h*(1-this.linkPercent)/2*(1/this.numLabels-1);for(var t=1;t<this.numLabels;t++)this.labelPosY[t]=this.labelPosY[t-1]+this.h*(1-this.linkPercent)/this.numLabels,this.labelPosX[t]=this.x}else{this.labelPosY[0]=this.y,this.labelPosX[0]=this.x+this.w*(1-this.linkPercent)/2*(1/this.numLabels-1);for(t=1;t<this.numLabels;t++)this.labelPosY[t]=this.y,this.labelPosX[t]=this.labelPosX[t-1]+this.w*(1-this.linkPercent)/this.numLabels}},AnimatedLinkedList.prototype.getTailPointerAttachPos=function(t,e,i){return this.vertical&&this.linkPositionEnd?[this.x,this.y+this.h/2]:this.vertical&&!this.linkPositionEnd?[this.x,this.y-this.h/2]:!this.vertical&&this.linkPositionEnd?[this.x+this.w/2,this.y]:[this.x-this.w/2,this.y]},AnimatedLinkedList.prototype.getHeadPointerAttachPos=function(t,e){return this.getClosestCardinalPoint(t,e)},AnimatedLinkedList.prototype.setWidth=function(t){this.w=t,this.resetTextPosition()},AnimatedLinkedList.prototype.setHeight=function(t){this.h=t,this.resetTextPosition()},AnimatedLinkedList.prototype.getWidth=function(){return this.w},AnimatedLinkedList.prototype.getHeight=function(){return this.h},AnimatedLinkedList.prototype.draw=function(t){var e,i,s;if(e=this.left(),i=this.top(),this.highlighted&&(t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.moveTo(e-this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.w+this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.w+this.highlightDiff,i+this.h+this.highlightDiff),t.lineTo(e-this.highlightDiff,i+this.h+this.highlightDiff),t.lineTo(e-this.highlightDiff,i-this.highlightDiff),t.closePath(),t.stroke(),t.fill()),t.strokeStyle=this.foregroundColor,t.fillStyle=this.backgroundColor,t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.w,i),t.lineTo(e+this.w,i+this.h),t.lineTo(e,i+this.h),t.lineTo(e,i),t.closePath(),t.stroke(),t.fill(),this.vertical)for(e=this.left(),s=1;s<this.numLabels;s++)i=this.y+this.h*(1-this.linkPercent)*(s/this.numLabels-.5),t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.w,i),t.closePath(),t.stroke();else for(i=this.top(),s=1;s<this.numLabels;s++)e=this.x+this.w*(1-this.linkPercent)*(s/this.numLabels-.5),t.beginPath(),t.moveTo(e,i),t.lineTo(e,i+this.h),t.closePath(),t.stroke();for(this.vertical&&this.linkPositionEnd?(e=this.left(),i=this.bottom()-this.h*this.linkPercent,t.beginPath(),t.moveTo(e+this.w,i),t.lineTo(e,i),this.nullPointer&&t.lineTo(this.startX+this.w,this.bottom()),t.closePath(),t.stroke()):this.vertical&&!this.linkPositionEnd?(e=this.left(),i=this.top()+this.h*this.linkPercent,t.beginPath(),t.moveTo(e+this.w,i),t.lineTo(e,i),this.nullPointer&&t.lineTo(e+this.w,this.top()),t.closePath(),t.stroke()):!this.vertical&&this.linkPositionEnd?(e=this.right()-this.w*this.linkPercent,i=this.top(),t.beginPath(),t.moveTo(e,i+this.h),t.lineTo(e,i),this.nullPointer&&t.lineTo(this.right(),i+this.h),t.closePath(),t.stroke()):(e=this.left()+this.w*this.linkPercent,i=this.top(),t.beginPath(),t.moveTo(e,i+this.h),t.lineTo(e,i),this.nullPointer&&t.lineTo(this.left(),i),t.closePath(),t.stroke()),t.textAlign="center",t.font="10px sans-serif",t.textBaseline="middle",t.lineWidth=1,this.resetTextPosition(),s=0;s<this.numLabels;s++)t.fillStyle=this.labelColors[s],t.fillText(this.labels[s],this.labelPosX[s],this.labelPosY[s])},AnimatedLinkedList.prototype.setTextColor=function(t,e){this.labelColors[e]=t},AnimatedLinkedList.prototype.getTextColor=function(t){return this.labelColors[t]},AnimatedLinkedList.prototype.getText=function(t){return this.labels[t]},AnimatedLinkedList.prototype.setText=function(t,e){this.labels[e]=t,this.resetTextPosition()},AnimatedLinkedList.prototype.createUndoDelete=function(){return new UndoDeleteLinkedList(this.objectID,this.numLabels,this.labels,this.x,this.y,this.w,this.h,this.linkPercent,this.linkPositionEnd,this.vertical,this.labelColors,this.backgroundColor,this.foregroundColor,this.layer,this.nullPointer)},AnimatedLinkedList.prototype.setHighlight=function(t){t!=this.highlighted&&(this.highlighted=t)},UndoDeleteLinkedList.inheritFrom(UndoBlock),UndoDeleteLinkedList.prototype.undoInitialStep=function(t){t.addLinkedListObject(this.objectID,this.labels[0],this.width,this.height,this.linkPercent,this.verticalOrentation,this.linkAtEnd,this.numLabels,this.backgroundColor,this.foregroundColor),t.setNodePosition(this.objectID,this.posX,this.posY),t.setLayer(this.objectID,this.layer),t.setNull(this.objectID,this.nullPointer);for(var e=0;e<this.numLabels;e++)t.setText(this.objectID,this.labels[e],e),t.setTextColor(this.objectID,this.labelColors[e],e)},AnimatedObject.prototype.alwaysOnTop=!1,AnimatedObject.prototype.setBackgroundColor=function(t){this.backgroundColor=t},AnimatedObject.prototype.setForegroundColor=function(t){this.foregroundColor=t},AnimatedObject.prototype.setNull=function(){},AnimatedObject.prototype.getNull=function(){return!1},AnimatedObject.prototype.setAlpha=function(t){this.alpha=t},AnimatedObject.prototype.getAlpha=function(){return this.alpha},AnimatedObject.prototype.setForegroundColor=function(t){this.foregroundColor=t,this.labelColor=t},AnimatedObject.prototype.getHighlight=function(){return this.highlighted},AnimatedObject.prototype.getWidth=function(){return 0},AnimatedObject.prototype.getHeight=function(){return 0},AnimatedObject.prototype.setHighlight=function(t){this.highlighted=t},AnimatedObject.prototype.centerX=function(){return this.x},AnimatedObject.prototype.setWidth=function(t){},AnimatedObject.prototype.centerY=function(){return this.y},AnimatedObject.prototype.getAlignLeftPos=function(t){return[t.right()+this.getWidth()/2,t.centerY()]},AnimatedObject.prototype.getAlignRightPos=function(t){return[t.left()-this.getWidth()/2,t.centerY()]},AnimatedObject.prototype.getAlignTopPos=function(t){return[t.centerX(),t.top()-this.getHeight()/2]},AnimatedObject.prototype.getAlignBottomPos=function(t){return[t.centerX(),t.bottom()+this.getHeight()/2]},AnimatedObject.prototype.alignLeft=function(t){this.y=t.centerY(),this.x=t.right()+this.getWidth()/2},AnimatedObject.prototype.alignRight=function(t){this.y=t.centerY(),this.x=t.left()-this.getWidth()/2},AnimatedObject.prototype.alignTop=function(t){this.x=t.centerX(),this.y=t.top()-this.getHeight()/2},AnimatedObject.prototype.alignBottom=function(t){this.x=t.centerX(),this.y=t.bottom()+this.getHeight()/2},AnimatedObject.prototype.getClosestCardinalPoint=function(t,e){var i,s,h,r;return t<this.left()?(i=this.left()-t,h=this.left()):t>this.right()?(i=t-this.right(),h=this.right()):(i=0,h=this.centerX()),e<this.top()?(s=this.top()-e,r=this.top()):e>this.bottom()?(s=e-this.bottom(),r=this.bottom()):(s=0,r=this.centerY()),s>i?h=this.centerX():r=this.centerY(),[h,r]},AnimatedObject.prototype.centered=function(){return!1},AnimatedObject.prototype.pulseHighlight=function(t){if(this.highlighted){var e=t/7,i=Math.abs(e%(2*this.range-2)-this.range+1);this.highlightDiff=i+this.minHeightDiff}},AnimatedObject.prototype.getTailPointerAttachPos=function(t,e,i){return[this.x,this.y]},AnimatedObject.prototype.getHeadPointerAttachPos=function(t,e){return[this.x,this.y]},AnimatedObject.prototype.identifier=function(){return this.objectID},AnimatedObject.prototype.getText=function(t){return this.label},AnimatedObject.prototype.getTextColor=function(t){return this.labelColor},AnimatedObject.prototype.setTextColor=function(t,e){this.labelColor=t},AnimatedObject.prototype.setText=function(t,e){this.label=t},AnimatedObject.prototype.setHighlightIndex=function(t){this.highlightIndex=t,this.highlightIndexDirty=!0},AnimatedObject.prototype.getHighlightIndex=function(){return this.highlightIndex},AnimatedRectangle=function(t,e,i,s,h,r,n,a){AnimatedRectangle.superclass.constructor.call(this),this.w=i,this.h=s,this.xJustify=h,this.yJustify=r,this.label=e,this.labelColor=a,this.backgroundColor=n,this.foregroundColor=a,this.labelColor=this.foregroundColor,this.highlighted=!1,this.objectID=t,this.nullPointer=!1,this.alpha=1,this.addedToScene=!0},AnimatedRectangle.inheritFrom(AnimatedObject),AnimatedRectangle.prototype.setNull=function(t){this.nullPointer=t},AnimatedRectangle.prototype.getNull=function(){return this.nullPointer},AnimatedRectangle.prototype.left=function(){return"left"==this.xJustify?this.x:"center"==this.xJustify?this.x-this.w/2:this.x-this.w},AnimatedRectangle.prototype.centerX=function(){return"center"==this.xJustify?this.x:"left"==this.xJustify?this.x+this.w/2:this.x-this.w/2},AnimatedRectangle.prototype.centerY=function(){return"center"==this.yJustify?this.y:"top"==this.yJustify?this.y+this.h/2:this.y-this.w/2},AnimatedRectangle.prototype.top=function(){return"top"==this.yJustify?this.y:"center"==this.yJustify?this.y-this.h/2:this.y-this.h},AnimatedRectangle.prototype.bottom=function(){return"top"==this.yJustify?this.y+this.h:"center"==this.yJustify?this.y+this.h/2:this.y},AnimatedRectangle.prototype.right=function(){return"left"==this.xJustify?this.x+this.w:"center"==this.xJustify?this.x+this.w/2:this.x},AnimatedRectangle.prototype.getHeadPointerAttachPos=function(t,e){return this.getClosestCardinalPoint(t,e)},AnimatedRectangle.prototype.setWidth=function(t){this.w=t},AnimatedRectangle.prototype.setHeight=function(t){this.h=t},AnimatedRectangle.prototype.getWidth=function(){return this.w},AnimatedRectangle.prototype.getHeight=function(){return this.h},AnimatedRectangle.prototype.draw=function(t){var e,i;this.addedToScene&&(t.globalAlpha=this.alpha,"left"==this.xJustify?(e=this.x,this.x,this.w):"center"==this.xJustify?(e=this.x-this.w/2,this.x):"right"==this.xJustify&&(e=this.x-this.w,this.x,this.w),"top"==this.yJustify?(i=this.y,this.y,this.h):"center"==this.yJustify?(i=this.y-this.h/2,this.y):"bottom"==this.yJustify&&(i=this.y-this.h,this.y,this.h),t.lineWidth=1,this.highlighted&&(t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.moveTo(e-this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.w+this.highlightDiff,i-this.highlightDiff),t.lineTo(e+this.w+this.highlightDiff,i+this.h+this.highlightDiff),t.lineTo(e-this.highlightDiff,i+this.h+this.highlightDiff),t.lineTo(e-this.highlightDiff,i-this.highlightDiff),t.closePath(),t.stroke(),t.fill()),t.strokeStyle=this.foregroundColor,t.fillStyle=this.backgroundColor,t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.w,i),t.lineTo(e+this.w,i+this.h),t.lineTo(e,i+this.h),t.lineTo(e,i),t.closePath(),t.stroke(),t.fill(),this.nullPointer&&(t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.w,i+this.h),t.closePath(),t.stroke()),t.fillStyle=this.labelColor,t.textAlign="center",t.font="10px sans-serif",t.textBaseline="middle",t.lineWidth=1,t.fillText(this.label,this.x,this.y))},AnimatedRectangle.prototype.setText=function(t,e){this.label=t},AnimatedRectangle.prototype.createUndoDelete=function(){return new UndoDeleteRectangle(this.objectID,this.label,this.x,this.y,this.w,this.h,this.xJustify,this.yJustify,this.backgroundColor,this.foregroundColor,this.highlighted,this.layer)},AnimatedRectangle.prototype.setHighlight=function(t){this.highlighted=t},UndoDeleteRectangle.inheritFrom(UndoBlock),UndoDeleteRectangle.prototype.undoInitialStep=function(t){t.addRectangleObject(this.objectID,this.nodeLabel,this.width,this.height,this.xJustify,this.yJustify,this.backgroundColor,this.foregroundColor),t.setNodePosition(this.objectID,this.posX,this.posY),t.setLayer(this.objectID,this.layer),t.setHighlight(this.objectID,this.highlighted)};var ANIMATION_SPEED_DEFAULT=75;function returnSubmit(t,e,i,s){return void 0!=i&&(t.size=i),function(h){var r=0;return window.event?r=h.keyCode:h.which&&(r=h.which),13==r?(e(),!1):59!=r&&45!=r&&46!=r&&190!=r&&173!=r&&!((void 0!=i&&t.value.length>=i||s&&(r<48||r>57))&&!controlKey(r))}}function animWaiting(){this.stepForwardButton.disabled=!1,0==this.skipBackButton.disabled&&(this.stepBackButton.disabled=!1),this.objectManager.statusReport.setText("Animation Paused"),this.objectManager.statusReport.setForegroundColor("#FF0000")}function animStarted(){this.skipForwardButton.disabled=!1,this.skipBackButton.disabled=!1,this.stepForwardButton.disabled=!0,this.stepBackButton.disabled=!0,this.objectManager.statusReport.setText("Animation Running"),this.objectManager.statusReport.setForegroundColor("#009900")}function animEnded(){this.skipForwardButton.disabled=!0,this.stepForwardButton.disabled=!0,0==this.skipBackButton.disabled&&this.paused&&(this.stepBackButton.disabled=!1),this.objectManager.statusReport.setText(""),this.objectManager.statusReport.setForegroundColor("#000000")}function anumUndoUnavailable(){this.skipBackButton.disabled=!0,this.stepBackButton.disabled=!0}function timeout(){this.timer=setTimeout(timeout.bind(this),30),this.update(),this.objectManager.draw()}function doPlayPause(){this.paused=!this.paused,this.paused?(this.playPauseBackButton.setAttribute("value","play"),0==this.skipBackButton.disabled&&(this.stepBackButton.disabled=!1)):this.playPauseBackButton.setAttribute("value","pause"),this.SetPaused(this.paused)}function initCanvas(t,e,i){t||(t=document.getElementById("canvas")),e||(e=document.getElementById("GeneralAnimationControls")),i||(i=document.getElementById("AlgorithmSpecificControls"));var s=new ObjectManager(t),h=new AnimationManager(s);h.canvas=t,h.generalControlBar=e,h.algorithmControlBar=i,h.skipBackButton=h.addControlToAnimationBar("Button","Skip Back"),h.skipBackButton.onclick=h.skipBack.bind(h),h.stepBackButton=h.addControlToAnimationBar("Button","Step Back"),h.stepBackButton.onclick=h.stepBack.bind(h),h.playPauseBackButton=h.addControlToAnimationBar("Button","Pause"),h.playPauseBackButton.onclick=doPlayPause.bind(h),h.stepForwardButton=h.addControlToAnimationBar("Button","Step Forward"),h.stepForwardButton.onclick=h.step.bind(h),h.skipForwardButton=h.addControlToAnimationBar("Button","Skip Forward"),h.skipForwardButton.onclick=h.skipForward.bind(h);var r=document.createElement("div");r.setAttribute("display","inline-block"),r.setAttribute("float","left");var n=document.createElement("td"),a=document.createElement("table"),o=document.createElement("tr"),l=document.createElement("td");o.appendChild(l),l.appendChild(r),a.appendChild(o),o=document.createElement("tr"),(l=document.createElement("td")).align="center";var d=document.createTextNode("Animation Speed");o.appendChild(l),l.appendChild(d),a.appendChild(o),n.appendChild(a),e&&e.appendChild(n);var c=getCookie("VisualizationSpeed");c=null==c||""==c?ANIMATION_SPEED_DEFAULT:parseInt(c),e&&$(r).slider({animate:!0,value:c,change:function(t,e){setCookie("VisualizationSpeed",String(e.value),30)},slide:function(t,e){h.SetSpeed(e.value)}}),h.SetSpeed(c),r.setAttribute("style","width:200px");var g=getCookie("VisualizationWidth");g=null==g||""==g?t.width:parseInt(g);var m=getCookie("VisualizationHeight");m=null==m||""==m?t.height:parseInt(m);var p=getCookie("VisualizationControlSwapped");return this.swapped="true"==p,this.swapped&&reorderSibling(this.canvas,this.generalControlBar.parentNode),t.width=g,t.height=m,n=document.createElement("td"),d=document.createTextNode(" w:"),n.appendChild(d),e&&e.appendChild(n),h.widthEntry=h.addControlToAnimationBar("Text",t.width),h.widthEntry.size=4,h.widthEntry.onkeydown=returnSubmit(h.widthEntry,h.changeSize.bind(h),4,!0),n=document.createElement("td"),d=document.createTextNode("       h:"),n.appendChild(d),e&&e.appendChild(n),h.heightEntry=h.addControlToAnimationBar("Text",t.height),h.heightEntry.onkeydown=returnSubmit(h.heightEntry,h.changeSize.bind(h),4,!0),h.sizeButton=h.addControlToAnimationBar("Button","Change Canvas Size"),h.sizeButton.onclick=h.changeSize.bind(h),h.swapButton=h.addControlToAnimationBar("Button","Move Controls"),h.swapButton.onclick=swapControlDiv.bind(h),h.addListener("AnimationStarted",h,animStarted),h.addListener("AnimationEnded",h,animEnded),h.addListener("AnimationWaiting",h,animWaiting),h.addListener("AnimationUndoUnavailable",h,anumUndoUnavailable),s.width=t.width,s.height=t.height,h}function AnimationManager(t){AnimationManager.superclass.constructor.call(this),this.animatedObjects=t,this.objectManager=t,this.paused=!1,this.animationPaused=!1,this.awaitingStep=!1,this.currentlyAnimating=!1,this.AnimationSteps=[],this.currentAnimation=0,this.previousAnimationSteps=[],this.currFrame=0,this.animationBlockLength=0,this.currentBlock=null,this.undoStack=[],this.doingUndo=!1,this.undoAnimationStepIndices=[],this.undoAnimationStepIndicesStack=[],this.animationBlockLength=10,this.lerp=function(t,e,i){return(e-t)*i+t},this.SetPaused=function(t){this.animationPaused=t,this.animationPaused||this.step()},this.SetSpeed=function(t){this.animationBlockLength=Math.floor((100-t)/2)},this.parseBool=function(t){var e=t.toUpperCase();return!("False"==e||"f"==e||" 0"==e||"0"==e||""==e)},this.parseColor=function(t){return"#"==t.charAt(0)?t:"0x"==t.substring(0,2)?"#"+t.substring(2):void 0},this.changeSize=function(){var t=parseInt(this.widthEntry.value),e=parseInt(this.heightEntry.value);t>100&&(this.canvas.width=t,this.animatedObjects.width=t,setCookie("VisualizationWidth",String(t),30)),e>100&&(this.canvas.height=e,this.animatedObjects.height=e,setCookie("VisualizationHeight",String(e),30)),t.value=this.canvas.width,this.heightEntry.value=this.canvas.height,this.animatedObjects.draw(),this.fireEvent("CanvasSizeChanged",{width:this.canvas.width,height:this.canvas.height})},this.startNextBlock=function(){this.awaitingStep=!1,this.currentBlock=[];var t=[];if(this.currentAnimation==this.AnimationSteps.length)return this.currentlyAnimating=!1,this.awaitingStep=!1,this.fireEvent("AnimationEnded","NoData"),clearTimeout(this.timer),this.animatedObjects.update(),void this.animatedObjects.draw();this.undoAnimationStepIndices.push(this.currentAnimation);for(var e=!1,i=!1;this.currentAnimation<this.AnimationSteps.length&&!e;){var s=this.AnimationSteps[this.currentAnimation].split("<;>");if("CREATECIRCLE"==s[0].toUpperCase())this.animatedObjects.addCircleObject(parseInt(s[1]),s[2]),s.length>4&&this.animatedObjects.setNodePosition(parseInt(s[1]),parseInt(s[3]),parseInt(s[4])),t.push(new UndoCreate(parseInt(s[1])));else if("CONNECT"==s[0].toUpperCase())s.length>7?this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),this.parseColor(s[3]),parseFloat(s[4]),this.parseBool(s[5]),s[6],parseInt(s[7])):s.length>6?this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),this.parseColor(s[3]),parseFloat(s[4]),this.parseBool(s[5]),s[6],0):s.length>5?this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),this.parseColor(s[3]),parseFloat(s[4]),this.parseBool(s[5]),"",0):s.length>4?this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),this.parseColor(s[3]),parseFloat(s[4]),!0,"",0):s.length>3?this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),this.parseColor(s[3]),0,!0,"",0):this.animatedObjects.connectEdge(parseInt(s[1]),parseInt(s[2]),"#000000",0,!0,"",0),t.push(new UndoConnect(parseInt(s[1]),parseInt(s[2]),!1));else if("CREATERECTANGLE"==s[0].toUpperCase())9==s.length?this.animatedObjects.addRectangleObject(parseInt(s[1]),s[2],parseInt(s[3]),parseInt(s[4]),s[7],s[8],"#ffffff","#000000"):this.animatedObjects.addRectangleObject(parseInt(s[1]),s[2],parseInt(s[3]),parseInt(s[4]),"center","center","#ffffff","#000000"),s.length>6&&this.animatedObjects.setNodePosition(parseInt(s[1]),parseInt(s[5]),parseInt(s[6])),t.push(new UndoCreate(parseInt(s[1])));else if("MOVE"==s[0].toUpperCase()){var h=new SingleAnimation(m=parseInt(s[1]),this.animatedObjects.getNodeX(m),this.animatedObjects.getNodeY(m),parseInt(s[2]),parseInt(s[3]));this.currentBlock.push(h),t.push(new UndoMove(h.objectID,h.toX,h.toY,h.fromX,h.fromY)),i=!0}else if("MOVETOALIGNRIGHT"==s[0].toUpperCase()){var r=parseInt(s[1]),n=parseInt(s[2]),a=this.animatedObjects.getAlignRightPos(r,n);h=new SingleAnimation(r,this.animatedObjects.getNodeX(r),this.animatedObjects.getNodeY(r),a[0],a[1]);this.currentBlock.push(h),t.push(new UndoMove(h.objectID,h.toX,h.toY,h.fromX,h.fromY)),i=!0}else if("STEP"==s[0].toUpperCase())e=!0;else if("SETFOREGROUNDCOLOR"==s[0].toUpperCase()){r=parseInt(s[1]);var o=this.animatedObjects.foregroundColor(r);this.animatedObjects.setForegroundColor(r,this.parseColor(s[2])),t.push(new UndoSetForegroundColor(r,o))}else if("SETBACKGROUNDCOLOR"==s[0].toUpperCase())r=parseInt(s[1]),o=this.animatedObjects.backgroundColor(r),this.animatedObjects.setBackgroundColor(r,this.parseColor(s[2])),t.push(new UndoSetBackgroundColor(r,o));else if("SETHIGHLIGHT"==s[0].toUpperCase()){var l=this.parseBool(s[2]);this.animatedObjects.setHighlight(parseInt(s[1]),l),t.push(new UndoHighlight(parseInt(s[1]),!l))}else if("DISCONNECT"==s[0].toUpperCase()){var d=this.animatedObjects.disconnect(parseInt(s[1]),parseInt(s[2]));null!=d&&t.push(d)}else if("SETALPHA"==s[0].toUpperCase()){var c=this.animatedObjects.getAlpha(parseInt(s[1]));this.animatedObjects.setAlpha(parseInt(s[1]),parseFloat(s[2])),t.push(new UndoSetAlpha(parseInt(s[1]),c))}else if("SETTEXT"==s[0].toUpperCase())if(s.length>3){var g=this.animatedObjects.getText(parseInt(s[1]),parseInt(s[3]));this.animatedObjects.setText(parseInt(s[1]),s[2],parseInt(s[3])),void 0!=g&&t.push(new UndoSetText(parseInt(s[1]),g,parseInt(s[3])))}else g=this.animatedObjects.getText(parseInt(s[1]),0),this.animatedObjects.setText(parseInt(s[1]),s[2],0),void 0!=g&&t.push(new UndoSetText(parseInt(s[1]),g,0));else if("DELETE"==s[0].toUpperCase()){var m=parseInt(s[1]),p=this.animatedObjects.deleteIncident(m);p.length>0&&(t=t.concat(p));var u=this.animatedObjects.getObject(m);null!=u&&(t.push(u.createUndoDelete()),this.animatedObjects.removeObject(m))}else if("CREATEHIGHLIGHTCIRCLE"==s[0].toUpperCase())s.length>5?this.animatedObjects.addHighlightCircleObject(parseInt(s[1]),this.parseColor(s[2]),parseFloat(s[5])):this.animatedObjects.addHighlightCircleObject(parseInt(s[1]),this.parseColor(s[2]),20),s.length>4&&this.animatedObjects.setNodePosition(parseInt(s[1]),parseInt(s[3]),parseInt(s[4])),t.push(new UndoCreate(parseInt(s[1])));else if("CREATELABEL"==s[0].toUpperCase())6==s.length?this.animatedObjects.addLabelObject(parseInt(s[1]),s[2],this.parseBool(s[5])):this.animatedObjects.addLabelObject(parseInt(s[1]),s[2],!0),s.length>=5&&this.animatedObjects.setNodePosition(parseInt(s[1]),parseFloat(s[3]),parseFloat(s[4])),t.push(new UndoCreate(parseInt(s[1])));else if("SETEDGECOLOR"==s[0].toUpperCase()){var _=parseInt(s[1]),I=parseInt(s[2]),S=this.parseColor(s[3]);o=this.animatedObjects.setEdgeColor(_,I,S);t.push(new UndoSetEdgeColor(_,I,o))}else if("SETEDGEALPHA"==s[0].toUpperCase()){_=parseInt(s[1]),I=parseInt(s[2]);var D=parseFloat(s[3]),T=this.animatedObjects.setEdgeAlpha(_,I,D);t.push(new UndoSetEdgeAlpha(_,I,T))}else if("SETEDGEHIGHLIGHT"==s[0].toUpperCase()){l=this.parseBool(s[3]),_=parseInt(s[1]),I=parseInt(s[2]);var L=this.animatedObjects.setEdgeHighlight(_,I,l);t.push(new UndoHighlightEdge(_,I,L))}else if("SETHEIGHT"==s[0].toUpperCase()){r=parseInt(s[1]);var R=this.animatedObjects.getHeight(r);this.animatedObjects.setHeight(r,parseInt(s[2])),t.push(new UndoSetHeight(r,R))}else if("SETLAYER"==s[0].toUpperCase())this.animatedObjects.setLayer(parseInt(s[1]),parseInt(s[2]));else if("CREATELINKEDLIST"==s[0].toUpperCase())11==s.length?this.animatedObjects.addLinkedListObject(parseInt(s[1]),s[2],parseInt(s[3]),parseInt(s[4]),parseFloat(s[7]),this.parseBool(s[8]),this.parseBool(s[9]),parseInt(s[10]),"#FFFFFF","#000000"):this.animatedObjects.addLinkedListObject(parseInt(s[1]),s[2],parseInt(s[3]),parseInt(s[4]),.25,!0,!1,1,"#FFFFFF","#000000"),s.length>6&&(this.animatedObjects.setNodePosition(parseInt(s[1]),parseInt(s[5]),parseInt(s[6])),t.push(new UndoCreate(parseInt(s[1]))));else if("SETNULL"==s[0].toUpperCase()){var A=this.animatedObjects.getNull(parseInt(s[1]));this.animatedObjects.setNull(parseInt(s[1]),this.parseBool(s[2])),t.push(new UndoSetNull(parseInt(s[1]),A))}else if("SETTEXTCOLOR"==s[0].toUpperCase())s.length>3?(o=this.animatedObjects.getTextColor(parseInt(s[1]),parseInt(s[3])),this.animatedObjects.setTextColor(parseInt(s[1]),this.parseColor(s[2]),parseInt(s[3])),t.push(new UndoSetTextColor(parseInt(s[1]),o,parseInt(s[3])))):(o=this.animatedObjects.getTextColor(parseInt(s[1]),0),this.animatedObjects.setTextColor(parseInt(s[1]),this.parseColor(s[2]),0),t.push(new UndoSetTextColor(parseInt(s[1]),o,0)));else if("CREATEBTREENODE"==s[0].toUpperCase())this.animatedObjects.addBTreeNode(parseInt(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseInt(s[4]),this.parseColor(s[7]),this.parseColor(s[8])),this.animatedObjects.setNodePosition(parseInt(s[1]),parseInt(s[5]),parseInt(s[6])),t.push(new UndoCreate(parseInt(s[1])));else if("SETWIDTH"==s[0].toUpperCase()){r=parseInt(s[1]);this.animatedObjects.setWidth(r,parseInt(s[2]));var E=this.animatedObjects.getWidth(r);t.push(new UndoSetWidth(r,E))}else if("SETNUMELEMENTS"==s[0].toUpperCase()){var C=this.animatedObjects.getObject(parseInt(s[1]));t.push(new UndoSetNumElements(C,parseInt(s[2]))),this.animatedObjects.setNumElements(parseInt(s[1]),parseInt(s[2]))}else if("SETPOSITION"==s[0].toUpperCase()){r=parseInt(s[1]);var f=this.animatedObjects.getNodeX(r),x=this.animatedObjects.getNodeY(r);t.push(new UndoSetPosition(r,f,x)),this.animatedObjects.setNodePosition(r,parseInt(s[2]),parseInt(s[3]))}else if("ALIGNRIGHT"==s[0].toUpperCase()){r=parseInt(s[1]),f=this.animatedObjects.getNodeX(r),x=this.animatedObjects.getNodeY(r);t.push(new UndoSetPosition(r,f.oldY)),this.animatedObjects.alignRight(r,parseInt(s[2]))}else if("ALIGNLEFT"==s[0].toUpperCase()){r=parseInt(s[1]),f=this.animatedObjects.getNodeX(r),x=this.animatedObjects.getNodeY(r);t.push(new UndoSetPosition(r,f.oldY)),this.animatedObjects.alignLeft(r,parseInt(s[2]))}else if("ALIGNTOP"==s[0].toUpperCase()){r=parseInt(s[1]),f=this.animatedObjects.getNodeX(r),x=this.animatedObjects.getNodeY(r);t.push(new UndoSetPosition(r,f.oldY)),this.animatedObjects.alignTop(r,parseInt(s[2]))}else if("ALIGNBOTTOM"==s[0].toUpperCase()){r=parseInt(s[1]),f=this.animatedObjects.getNodeX(r),x=this.animatedObjects.getNodeY(r);t.push(new UndoSetPosition(r,f.oldY)),this.animatedObjects.alignBottom(r,parseInt(s[2]))}else if("SETHIGHLIGHTINDEX"==s[0].toUpperCase()){r=parseInt(s[1]);var y=parseInt(s[2]),H=this.animatedObjects.getHighlightIndex(r);t.push(new UndoSetHighlightIndex(r,H)),this.animatedObjects.setHighlightIndex(r,y)}this.currentAnimation=this.currentAnimation+1}this.currFrame=0,(!i&&this.animationPaused||!i&&this.currentAnimation==this.AnimationSteps.length)&&(this.currFrame=this.animationBlockLength),this.undoStack.push(t)},this.StartNewAnimation=function(t){clearTimeout(this.timer),null!=this.AnimationSteps&&(this.previousAnimationSteps.push(this.AnimationSteps),this.undoAnimationStepIndicesStack.push(this.undoAnimationStepIndices)),void 0==t||0==t.length?this.AnimationSteps=["Step"]:this.AnimationSteps=t,this.undoAnimationStepIndices=new Array,this.currentAnimation=0,this.startNextBlock(),this.currentlyAnimating=!0,this.fireEvent("AnimationStarted","NoData"),this.timer=setTimeout(timeout.bind(this),30)},this.stepBack=function(){this.awaitingStep&&null!=this.undoStack&&0!=this.undoStack.length?(this.fireEvent("AnimationStarted","NoData"),clearTimeout(this.timer),this.awaitingStep=!1,this.undoLastBlock(),clearTimeout(this.timer),this.timer=setTimeout(timeout.bind(this),30)):!this.currentlyAnimating&&this.animationPaused&&null!=this.undoAnimationStepIndices&&(this.fireEvent("AnimationStarted","NoData"),this.currentlyAnimating=!0,this.undoLastBlock(),clearTimeout(this.timer),this.timer=setTimeout(timeout.bind(this),30))},this.step=function(){this.awaitingStep&&(this.startNextBlock(),this.fireEvent("AnimationStarted","NoData"),this.currentlyAnimating=!0,clearTimeout(this.timer),this.timer=setTimeout(timeout.bind(this),30))},this.clearHistory=function(){this.undoStack=[],this.undoAnimationStepIndices=null,this.previousAnimationSteps=[],this.undoAnimationStepIndicesStack=[],this.AnimationSteps=null,this.fireEvent("AnimationUndoUnavailable","NoData"),clearTimeout(this.timer),this.animatedObjects.update(),this.animatedObjects.draw()},this.skipBack=function(){var t=null!=this.undoAnimationStepIndices&&0!=this.undoAnimationStepIndices.length;if(t){var e;for(e=0;null!=this.currentBlock&&e<this.currentBlock.length;e++){var i=this.currentBlock[e].objectID;this.animatedObjects.setNodePosition(i,this.currentBlock[e].toX,this.currentBlock[e].toY)}for(this.doingUndo&&this.finishUndoBlock(this.undoStack.pop());t;){for(this.undoLastBlock(),e=0;e<this.currentBlock.length;e++)i=this.currentBlock[e].objectID,this.animatedObjects.setNodePosition(i,this.currentBlock[e].toX,this.currentBlock[e].toY);t=this.finishUndoBlock(this.undoStack.pop())}clearTimeout(this.timer),this.animatedObjects.update(),this.animatedObjects.draw(),null!=this.undoStack&&0!=this.undoStack.length||this.fireEvent("AnimationUndoUnavailable","NoData")}},this.resetAll=function(){this.clearHistory(),this.animatedObjects.clearAllObjects(),this.animatedObjects.draw(),clearTimeout(this.timer)},this.skipForward=function(){if(this.currentlyAnimating){for(this.animatedObjects.runFast=!0;null!=this.AnimationSteps&&this.currentAnimation<this.AnimationSteps.length;){var t;for(t=0;null!=this.currentBlock&&t<this.currentBlock.length;t++){var e=this.currentBlock[t].objectID;this.animatedObjects.setNodePosition(e,this.currentBlock[t].toX,this.currentBlock[t].toY)}for(this.doingUndo&&this.finishUndoBlock(this.undoStack.pop()),this.startNextBlock(),t=0;t<this.currentBlock.length;t++){e=this.currentBlock[t].objectID;this.animatedObjects.setNodePosition(e,this.currentBlock[t].toX,this.currentBlock[t].toY)}}this.animatedObjects.update(),this.currentlyAnimating=!1,this.awaitingStep=!1,this.doingUndo=!1,this.animatedObjects.runFast=!1,this.fireEvent("AnimationEnded","NoData"),clearTimeout(this.timer),this.animatedObjects.update(),this.animatedObjects.draw()}},this.finishUndoBlock=function(t){for(var e=t.length-1;e>=0;e--)t[e].undoInitialStep(this.animatedObjects);return this.doingUndo=!1,0!=this.undoAnimationStepIndices.length||(this.awaitingStep=!1,this.currentlyAnimating=!1,this.undoAnimationStepIndices=this.undoAnimationStepIndicesStack.pop(),this.AnimationSteps=this.previousAnimationSteps.pop(),this.fireEvent("AnimationEnded","NoData"),this.fireEvent("AnimationUndo","NoData"),this.currentBlock=[],null!=this.undoStack&&0!=this.undoStack.length||(this.currentlyAnimating=!1,this.awaitingStep=!1,this.fireEvent("AnimationUndoUnavailable","NoData")),clearTimeout(this.timer),this.animatedObjects.update(),this.animatedObjects.draw(),!1)},this.undoLastBlock=function(){if(0!=this.undoAnimationStepIndices.length&&this.undoAnimationStepIndices.length>0){this.doingUndo=!0;var t=!1;this.currentAnimation=this.undoAnimationStepIndices.pop(),this.currentBlock=[];var e,i=this.undoStack[this.undoStack.length-1];for(e=i.length-1;e>=0;e--){var s=i[e].addUndoAnimation(this.currentBlock);t=t||s}this.currFrame=0,!t&&this.animationPaused&&(this.currFrame=this.animationBlockLength),this.currentlyAnimating=!0}},this.setLayer=function(t,e){this.animatedObjects.setLayer(t,e),this.animatedObjects.draw()},this.setAllLayers=function(t){this.animatedObjects.setAllLayers(t),this.animatedObjects.draw()},this.update=function(){if(this.currentlyAnimating){var t;for(this.currFrame=this.currFrame+1,t=0;t<this.currentBlock.length;t++)if(this.currFrame==this.animationBlockLength||1==this.currFrame&&0==this.animationBlockLength)this.animatedObjects.setNodePosition(this.currentBlock[t].objectID,this.currentBlock[t].toX,this.currentBlock[t].toY);else if(this.currFrame<this.animationBlockLength){var e=this.currentBlock[t].objectID,i=1/(this.animationBlockLength-this.currFrame),s=(this.animatedObjects.getNodeX(e),this.animatedObjects.getNodeY(e),this.currentBlock[t].toX,this.currentBlock[t].toY,this.lerp(this.animatedObjects.getNodeX(e),this.currentBlock[t].toX,i)),h=this.lerp(this.animatedObjects.getNodeY(e),this.currentBlock[t].toY,i);this.animatedObjects.setNodePosition(e,s,h)}this.currFrame>=this.animationBlockLength&&(this.doingUndo?this.finishUndoBlock(this.undoStack.pop())&&(this.awaitingStep=!0,this.fireEvent("AnimationWaiting","NoData")):this.animationPaused&&this.currentAnimation<this.AnimationSteps.length?(this.awaitingStep=!0,this.fireEvent("AnimationWaiting","NoData"),this.currentBlock=[]):this.startNextBlock()),this.animatedObjects.update()}}}function SingleAnimation(t,e,i,s,h){this.objectID=t,this.fromX=e,this.fromY=i,this.toX=s,this.toY=h}AnimationManager.inheritFrom(EventListener),AnimationManager.prototype.addControlToAnimationBar=function(t,e,i){if(!this.generalControlBar)return{};void 0==i&&(i="input");var s=document.createElement(i);s.setAttribute("type",t),s.setAttribute("value",e);var h=document.createElement("td");return h.appendChild(s),this.generalControlBar.appendChild(h),s};var HighlightCircle=function(t,e,i){HighlightCircle.superclass.constructor.call(this),this.objectID=t,this.radius=i,this.thickness=4,this.foregroundColor=e,this.x=0,this.y=0,this.alpha=1};function UndoDeleteHighlightCircle(t,e,i,s,h,r,n){this.objectID=t,this.x=e,this.y=i,this.color=s,this.r=h,this.layer=r,this.alpha=n}HighlightCircle.inheritFrom(AnimatedObject),HighlightCircle.prototype.draw=function(t){t.globalAlpha=this.alpha,t.strokeStyle=this.foregroundColor,t.lineWidth=this.thickness,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.stroke()},HighlightCircle.prototype.createUndoDelete=function(){return new UndoDeleteHighlightCircle(this.objectID,this.x,this.y,this.foregroundColor,this.radius,this.layer,this.alpha)},UndoDeleteHighlightCircle.inheritFrom(UndoBlock),UndoDeleteHighlightCircle.prototype.undoInitialStep=function(t){t.addHighlightCircleObject(this.objectID,this.color,this.r),t.setLayer(this.objectID,this.layer),t.setNodePosition(this.objectID,this.x,this.y),t.setAlpha(this.objectID,this.alpha)};var LINE_maxHeightDiff=5,LINE_minHeightDiff=3,LINE_range=LINE_maxHeightDiff-LINE_minHeightDiff+1,LINE_highlightDiff=3,currentAlg,currentAlg,currentAlg,currentAlg;function Line(t,e,i,s,h,r,n){this.arrowHeight=8,this.arrowWidth=4,this.Node1=t,this.Node2=e,this.Dirty=!1,this.directed=h,this.edgeColor=i,this.edgeLabel=r,this.highlighted=!1,this.addedToScene=!0,this.anchorPoint=n,this.highlightDiff=0,this.curve=s,this.alpha=1,this.color=function(){return this.edgeColor},this.setColor=function(t){this.edgeColor=t,Dirty=!0},this.setHighlight=function(t){this.highlighted=t},this.pulseHighlight=function(t){if(this.highlighted){var e=t/14,i=Math.abs(e%(2*LINE_range-2)-LINE_range+1);this.highlightDiff=i+LINE_minHeightDiff,Dirty=!0}},this.hasNode=function(t){return this.Node1==t||this.Node2==t},this.createUndoDisconnect=function(){return new UndoConnect(this.Node1.objectID,this.Node2.objectID,!0,this.edgeColor,this.directed,this.curve,this.edgeLabel,this.anchorPoint)},this.sign=function(t){return t>0?1:-1},this.drawArrow=function(t,e,i){i.strokeStyle=e,i.fillStyle=e,i.lineWidth=t;var s=this.Node1.getTailPointerAttachPos(this.Node2.x,this.Node2.y,this.anchorPoint),h=this.Node2.getHeadPointerAttachPos(this.Node1.x,this.Node1.y),r=(s=this.Node1.getTailPointerAttachPos(this.Node2.x,this.Node2.y,this.anchorPoint),(h=this.Node2.getHeadPointerAttachPos(this.Node1.x,this.Node1.y))[0]-s[0]),n=h[1]-s[1],a=r/2+s[0],o=n/2+s[1],l=a-n*this.curve,d=o+r*this.curve;i.beginPath(),i.moveTo(s[0],s[1]),i.quadraticCurveTo(l,d,h[0],h[1]),i.stroke();var c=.25*s[0]+.5*l+.25*h[0],g=.25*s[1]+.5*d+.25*h[1],m=Math.sqrt(n*n+r*r);if(0!=m&&(c+=-n*this.sign(this.curve)/m*10,g+=r*this.sign(this.curve)/m*10),i.textAlign="center",i.font="10px sans-serif",i.textBaseline="middle",i.fillText(this.edgeLabel,c,g),this.directed){var p=l-h[0],u=d-h[1],_=Math.sqrt(p*p+u*u);_>0&&(p/=_,u/=_,i.beginPath(),i.moveTo(h[0],h[1]),i.lineTo(h[0]+p*this.arrowHeight-u*this.arrowWidth,h[1]+u*this.arrowHeight+p*this.arrowWidth),i.lineTo(h[0]+p*this.arrowHeight+u*this.arrowWidth,h[1]+u*this.arrowHeight-p*this.arrowWidth),i.lineTo(h[0],h[1]),i.closePath(),i.stroke(),i.fill())}},this.draw=function(t){this.addedToScene&&(t.globalAlpha=this.alpha,this.highlighted&&this.drawArrow(this.highlightDiff,"#FF0000",t),this.drawArrow(1,this.edgeColor,t))}}function UndoConnect(t,e,i,s,h,r,n,a){this.fromID=t,this.toID=e,this.connect=i,this.color=s,this.directed=h,this.curve=r,this.edgeLabel=n,this.anchorPoint=a}function ObjectManager(t){this.Nodes=[],this.Edges=[],this.BackEdges=[],this.activeLayers=[],this.activeLayers[0]=!0,this.ctx=t.getContext("2d"),this.framenum=0,this.width=0,this.height=0,this.statusReport=new AnimatedLabel(-1,"XXX",!1,30,this.ctx),this.statusReport.x=30,this.draw=function(){var t,e;for(this.framenum++,this.framenum>1e3&&(this.framenum=0),this.ctx.clearRect(0,0,this.width,this.height),this.statusReport.y=this.height-15,t=0;t<this.Nodes.length;t++)null==this.Nodes[t]||this.Nodes[t].highlighted||!this.Nodes[t].addedToScene||this.Nodes[t].alwaysOnTop||this.Nodes[t].draw(this.ctx);for(t=0;t<this.Nodes.length;t++)null!=this.Nodes[t]&&this.Nodes[t].highlighted&&!this.Nodes[t].alwaysOnTop&&this.Nodes[t].addedToScene&&(this.Nodes[t].pulseHighlight(this.framenum),this.Nodes[t].draw(this.ctx));for(t=0;t<this.Nodes.length;t++)null!=this.Nodes[t]&&this.Nodes[t].alwaysOnTop&&this.Nodes[t].addedToScene&&(this.Nodes[t].pulseHighlight(this.framenum),this.Nodes[t].draw(this.ctx));for(t=0;t<this.Edges.length;t++)if(null!=this.Edges[t])for(e=0;e<this.Edges[t].length;e++)this.Edges[t][e].addedToScene&&(this.Edges[t][e].pulseHighlight(this.framenum),this.Edges[t][e].draw(this.ctx));this.statusReport.draw(this.ctx)},this.update=function(){},this.setLayers=function(t,e){for(var i=0;i<e.length;i++)this.activeLayers[e[i]]=t;this.resetLayers()},this.addHighlightCircleObject=function(t,e,i){if(null!=this.Nodes[t]&&void 0!=this.Nodes[t])throw"addHighlightCircleObject:Object with same ID ("+String(t)+") already Exists!";var s=new HighlightCircle(t,e,i);this.Nodes[t]=s},this.setEdgeAlpha=function(t,e,i){var s=1;if(null!=this.Edges[t]&&void 0!=this.Edges[t])for(var h=this.Edges[t].length-1;h>=0;h--)null!=this.Edges[t][h]&&void 0!=this.Edges[t][h]&&this.Edges[t][h].Node2==this.Nodes[e]&&(s=this.Edges[t][h].alpha,this.Edges[t][h].alpha=i);return s},this.setAlpha=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setAlpha(e)},this.getAlpha=function(t){return null!=this.Nodes[t]&&void 0!=this.Nodes[t]?this.Nodes[t].getAlpha():-1},this.getTextColor=function(t,e){return null!=this.Nodes[t]&&void 0!=this.Nodes[t]?this.Nodes[t].getTextColor(e):"#000000"},this.setTextColor=function(t,e,i){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setTextColor(e,i)},this.setHighlightIndex=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setHighlightIndex(e)},this.setAllLayers=function(t){this.activeLayers=[];for(var e=0;e<t.length;e++)this.activeLayers[t[e]]=!0;this.resetLayers()},this.resetLayers=function(){var t;for(t=0;t<this.Nodes.length;t++)null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&(this.Nodes[t].addedToScene=1==this.activeLayers[this.Nodes[t].layer]);for(t=this.Edges.length-1;t>=0;t--)if(null!=this.Edges[t]&&void 0!=this.Edges[t])for(var e=0;e<this.Edges[t].length;e++)null!=this.Edges[t][e]&&void 0!=this.Edges[t][e]&&(this.Edges[t][e].addedToScene=1==this.activeLayers[this.Edges[t][e].Node1.layer]&&1==this.activeLayers[this.Edges[t][e].Node2.layer])},this.setLayer=function(t,e){if(null!=this.Nodes[t]&&void 0!=this.Nodes[t]){if(this.Nodes[t].layer=e,this.activeLayers[e]?this.Nodes[t].addedToScene=!0:this.Nodes[t].addedToScene=!1,null!=this.Edges[t]&&void 0!=this.Edges[t])for(var i=0;i<this.Edges[t].length;i++){null!=(s=this.Edges[t][i])&&void 0!=s&&(s.addedToScene=s.Node1.addedToScene&&s.Node2.addedToScene)}if(null!=this.BackEdges[t]&&void 0!=this.BackEdges[t])for(i=0;i<this.BackEdges[t].length;i++){var s;null!=(s=this.BackEdges[t][i])&&void 0!=s&&(s.addedToScene=s.Node1.addedToScene&&s.Node2.addedToScene)}}},this.clearAllObjects=function(){this.Nodes=[],this.Edges=[],this.BackEdges=[]},this.setForegroundColor=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setForegroundColor(e)},this.setBackgroundColor=function(t,e){null!=this.Nodes[t]&&this.Nodes[t].setBackgroundColor(e)},this.setHighlight=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setHighlight(e)},this.getHighlight=function(t){return null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].getHighlight()},this.getHighlightIndex=function(t){return null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].getHighlightIndex()},this.setWidth=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setWidth(e)},this.setHeight=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setHeight(e)},this.getHeight=function(t){return null==this.Nodes[t]||void 0==this.Nodes[t]?-1:this.Nodes[t].getHeight()},this.getWidth=function(t){return null==this.Nodes[t]||void 0==this.Nodes[t]?-1:this.Nodes[t].getWidth()},this.backgroundColor=function(t){return null!=this.Nodes[t]?this.Nodes[t].backgroundColor:"#000000"},this.foregroundColor=function(t){return null!=this.Nodes[t]?this.Nodes[t].foregroundColor:"#000000"},this.disconnect=function(t,e){var i,s=null;if(null!=this.Edges[t]){var h=this.Edges[t].length;for(i=h-1;i>=0;i--)if(null!=this.Edges[t][i]&&this.Edges[t][i].Node2==this.Nodes[e]){var r=this.Edges[t][i];s=r.createUndoDisconnect(),this.Edges[t][i]=this.Edges[t][h-1],h-=1,this.Edges[t].pop()}}if(null!=this.BackEdges[e])for(i=(h=this.BackEdges[e].length)-1;i>=0;i--)null!=this.BackEdges[e][i]&&this.BackEdges[e][i].Node1==this.Nodes[t]&&(r=this.BackEdges[e][i],this.BackEdges[e][i]=this.BackEdges[e][h-1],h-=1,this.BackEdges[e].pop());return s},this.deleteIncident=function(t){var e=[];if(null!=this.Edges[t]){for(var i=this.Edges[t].length,s=i-1;s>=0;s--){var h=this.Edges[t][s],r=h.Node2.identifier();e.push(h.createUndoDisconnect());for(var n=this.BackEdges[r].length,a=n-1;a>=0;a--)this.BackEdges[r][a]==h&&(this.BackEdges[r][a]=this.BackEdges[r][n-1],n-=1,this.BackEdges[r].pop())}this.Edges[t]=null}if(null!=this.BackEdges[t]){for(s=(i=this.BackEdges[t].length)-1;s>=0;s--){var o=(h=this.BackEdges[t][s]).Node1.identifier();for(e.push(h.createUndoDisconnect()),a=(n=this.Edges[o].length)-1;a>=0;a--)this.Edges[o][a]==h&&(this.Edges[o][a]=this.Edges[o][n-1],n-=1,this.Edges[o].pop())}this.BackEdges[t]=null}return e},this.removeObject=function(t){this.Nodes[t];t==this.Nodes.length-1?this.Nodes.pop():this.Nodes[t]=null},this.getObject=function(t){if(null==this.Nodes[t]||void 0==this.Nodes[t])throw"getObject:Object with ID ("+String(t)+") does not exist";return this.Nodes[t]},this.addCircleObject=function(t,e){if(null!=this.Nodes[t]&&void 0!=this.Nodes[t])throw"addCircleObject:Object with same ID ("+String(t)+") already Exists!";var i=new AnimatedCircle(t,e);this.Nodes[t]=i},this.getNodeX=function(t){if(null==this.Nodes[t]||void 0==this.Nodes[t])throw"getting x position of an object that does not exit";return this.Nodes[t].x},this.getTextWidth=function(t){this.ctx.font="10px sans-serif",void 0==t&&(w=3);var e=t.split("\n"),i=0;if(1==e.length)i=this.ctx.measureText(t).width;else for(var s=0;s<e.length;s++)i=Math.max(i,this.ctx.measureText(e[s]).width);return i},this.setText=function(t,e,i){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setText(e,i,this.getTextWidth(e))},this.getText=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t])throw"getting text of an object that does not exit";return this.Nodes[t].getText(e)},this.getNodeY=function(t){if(null==this.Nodes[t]||void 0==this.Nodes[t])throw"getting y position of an object that does not exit";return this.Nodes[t].y},this.connectEdge=function(t,e,i,s,h,r,n){var a=this.Nodes[t],o=this.Nodes[e];if(null==a||null==o)throw"Tried to connect two nodes, one didn't exist!";var l=new Line(a,o,i,s,h,r,n);null!=this.Edges[t]&&void 0!=this.Edges[t]||(this.Edges[t]=[]),null!=this.BackEdges[e]&&void 0!=this.BackEdges[e]||(this.BackEdges[e]=[]),l.addedToScene=a.addedToScene&&o.addedToScene,this.Edges[t].push(l),this.BackEdges[e].push(l)},this.setNull=function(t,e){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].setNull(e)},this.getNull=function(t){return null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&this.Nodes[t].getNull()},this.setEdgeColor=function(t,e,i){var s="#000000";if(null!=this.Edges[t]&&void 0!=this.Edges[t])for(var h=this.Edges[t].length-1;h>=0;h--)null!=this.Edges[t][h]&&void 0!=this.Edges[t][h]&&this.Edges[t][h].Node2==this.Nodes[e]&&(s=this.Edges[t][h].color(),this.Edges[t][h].setColor(i));return s},this.alignTop=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);this.Nodes[t].alignTop(this.Nodes[e])},this.alignLeft=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);this.Nodes[t].alignLeft(this.Nodes[e])},this.alignRight=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);this.Nodes[t].alignRight(this.Nodes[e])},this.getAlignRightPos=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);return this.Nodes[t].getAlignRightPos(this.Nodes[e])},this.getAlignLeftPos=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);return this.Nodes[t].getAlignLeftPos(this.Nodes[e])},this.alignBottom=function(t,e){if(null==this.Nodes[t]||void 0==this.Nodes[t]||null==this.Nodes[e]||void 0==this.Nodes[e])throw"Tring to align two nodes, one doesn't exist: "+String(t)+","+String(e);this.Nodes[t].alignBottom(this.Nodes[e])},this.setEdgeHighlight=function(t,e,i){var s=!1;if(null!=this.Edges[t]&&void 0!=this.Edges[t])for(var h=this.Edges[t].length-1;h>=0;h--)null!=this.Edges[t][h]&&void 0!=this.Edges[t][h]&&this.Edges[t][h].Node2==this.Nodes[e]&&(s=this.Edges[t][h].highlighted,this.Edges[t][h].setHighlight(i));return s},this.addLabelObject=function(t,e,i){if(null!=this.Nodes[t]&&void 0!=this.Nodes[t])throw new Error("addLabelObject: Object Already Exists!");var s=new AnimatedLabel(t,e,i,this.getTextWidth(e),this.ctx);this.Nodes[t]=s},this.addLinkedListObject=function(t,e,i,s,h,r,n,a,o,l){if(null!=this.Nodes[t])throw new Error("addLinkedListObject:Object with same ID already Exists!");var d=new AnimatedLinkedList(t,e,i,s,h,r,n,a,o,l);this.Nodes[t]=d},this.getNumElements=function(t){return this.Nodes[t].getNumElements()},this.setNumElements=function(t,e){this.Nodes[t].setNumElements(e)},this.addBTreeNode=function(t,e,i,s,h,r){if(h=void 0==h?"#FFFFFF":h,r=void 0==r?"#FFFFFF":r,null!=this.Nodes[t]&&void 0!=Nodes[t])throw"addBTreeNode:Object with same ID already Exists!";var n=new AnimatedBTreeNode(t,e,i,s,h,r);this.Nodes[t]=n},this.addRectangleObject=function(t,e,i,s,h,r,n,a){if(null!=this.Nodes[t]||void 0!=this.Nodes[t])throw new Error("addRectangleObject:Object with same ID already Exists!");var o=new AnimatedRectangle(t,e,i,s,h,r,n,a);this.Nodes[t]=o},this.setNodePosition=function(t,e,i){null!=this.Nodes[t]&&void 0!=this.Nodes[t]&&void 0!=e&&void 0!=i&&(this.Nodes[t].x=e,this.Nodes[t].y=i)}}function UndoBlock(){}function UndoMove(t,e,i,s,h){this.objectID=t,this.fromX=e,this.fromY=i,this.toX=s,this.toY=h}function UndoCreate(t){this.objectID=t}function UndoHighlight(t,e){this.objectID=t,this.highlightValue=e}function UndoSetHeight(t,e){this.objectID=t,this.height=e}function UndoSetWidth(t,e){this.objectID=t,this.width=e}function UndoSetNumElements(t,e){if(this.objectID=t.objectID,this.sizeBeforeChange=t.getNumElements(),this.sizeAfterChange=e,this.sizeBeforeChange>this.sizeAfterChange){this.labels=new Array(this.sizeBeforeChange-this.sizeAfterChange),this.colors=new Array(this.sizeBeforeChange-this.sizeAfterChange);for(var i=0;i<this.sizeBeforeChange-this.sizeAfterChange;i++)this.labels[i]=t.getText(i+this.sizeAfterChange),this.colors[i]=t.getTextColor(i+this.sizeAfterChange)}}function UndoSetAlpha(t,e){this.objectID=t,this.alphaVal=e}function UndoSetNull(t,e){this.objectID=t,this.nullVal=e}function UndoSetForegroundColor(t,e){this.objectID=t,this.color=e}function UndoSetBackgroundColor(t,e){this.objectID=t,this.color=e}function UndoSetHighlightIndex(t,e){this.objectID=t,this.index=e}function UndoSetText(t,e,i){this.objectID=t,this.newText=e,this.labelIndex=i}function UndoSetTextColor(t,e,i){this.objectID=t,this.color=e,this.index=i}function UndoHighlightEdge(t,e,i){this.fromID=t,this.toID=e,this.highlightValue=i}function UndoSetEdgeColor(t,e,i){this.fromID=t,this.toID=e,this.color=i}function UndoSetEdgeAlpha(t,e,i){this.fromID=t,this.toID=e,this.alpha=i}function UndoSetPosition(t,e,i){this.objectID=t,this.x=e,this.y=i}function Algorithm(t){}function controlKey(t){return 8==t||9==t||37==t||38==t||39==t||40==t||46==t}function StackArray(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new StackArray(t,canvas.width,canvas.height)}function StackLL(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new StackLL(t,canvas.width,canvas.height)}function QueueArray(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new QueueArray(t,canvas.width,canvas.height)}function QueueLL(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new QueueLL(t,canvas.width,canvas.height)}UndoConnect.prototype.undoInitialStep=function(t){this.connect?t.connectEdge(this.fromID,this.toID,this.color,this.curve,this.directed,this.edgeLabel,this.anchorPoint):t.disconnect(this.fromID,this.toID)},UndoConnect.prototype.addUndoAnimation=function(t){return!1},UndoBlock.prototype.addUndoAnimation=function(t){return!1},UndoBlock.prototype.undoInitialStep=function(t){},UndoMove.inheritFrom(UndoBlock),UndoMove.prototype.addUndoAnimation=function(t){var e=new SingleAnimation(this.objectID,this.fromX,this.fromY,this.toX,this.toY);return t.push(e),!0},UndoCreate.inheritFrom(UndoBlock),UndoCreate.prototype.undoInitialStep=function(t){t.removeObject(this.objectID)},UndoHighlight.inheritFrom(UndoBlock),UndoHighlight.prototype.undoInitialStep=function(t){t.setHighlight(this.objectID,this.highlightValue)},UndoSetHeight.inheritFrom(UndoBlock),UndoSetHeight.prototype.undoInitialStep=function(t){t.setHeight(this.objectID,this.height)},UndoSetWidth.inheritFrom(UndoBlock),UndoSetWidth.prototype.undoInitialStep=function(t){t.setWidth(this.objectID,this.width)},UndoSetNumElements.inheritFrom(UndoBlock),UndoSetNumElements.prototype.undoInitialStep=function(t){if(t.setNumElements(this.objectID,this.sizeBeforeChange),this.sizeBeforeChange>this.sizeAfterChange)for(var e=0;e<this.sizeBeforeChange-this.sizeAfterChange;e++)t.setText(this.objectID,this.labels[e],e+this.sizeAfterChange),t.setTextColor(this.objectID,this.colors[e],e+this.sizeAfterChange)},UndoSetAlpha.inheritFrom(UndoBlock),UndoSetAlpha.prototype.undoInitialStep=function(t){t.setAlpha(this.objectID,this.alphaVal)},UndoSetNull.inheritFrom(UndoBlock),UndoSetNull.prototype.undoInitialStep=function(t){t.setNull(this.objectID,this.nullVal)},UndoSetForegroundColor.inheritFrom(UndoBlock),UndoSetForegroundColor.prototype.undoInitialStep=function(t){t.setForegroundColor(this.objectID,this.color)},UndoSetBackgroundColor.inheritFrom(UndoBlock),UndoSetBackgroundColor.prototype.undoInitialStep=function(t){t.setBackgroundColor(this.objectID,this.color)},UndoSetHighlightIndex.inheritFrom(UndoBlock),UndoSetHighlightIndex.prototype.undoInitialStep=function(t){t.setHighlightIndex(this.objectID,this.index)},UndoSetText.inheritFrom(UndoBlock),UndoSetText.prototype.undoInitialStep=function(t){t.setText(this.objectID,this.newText,this.labelIndex)},UndoSetTextColor.inheritFrom(UndoBlock),UndoSetTextColor.prototype.undoInitialStep=function(t){t.setTextColor(this.objectID,this.color,this.index)},UndoHighlightEdge.inheritFrom(UndoBlock),UndoHighlightEdge.prototype.undoInitialStep=function(t){t.setEdgeHighlight(this.fromID,this.toID,this.highlightValue)},UndoSetEdgeColor.inheritFrom(UndoBlock),UndoSetEdgeColor.prototype.undoInitialStep=function(t){t.setEdgeColor(this.fromID,this.toID,this.color)},UndoSetEdgeAlpha.inheritFrom(UndoBlock),UndoSetEdgeAlpha.prototype.undoInitialStep=function(t){t.setEdgeAlpha(this.fromID,this.toID,this.alpha)},UndoSetPosition.inheritFrom(UndoBlock),UndoSetPosition.prototype.undoInitialStep=function(t){t.setNodePosition(this.objectID,this.x,this.y)},Algorithm.prototype.setCodeAlpha=function(t,e){var i,s;for(i=0;i<t.length;i++)for(s=0;s<t[i].length;s++)this.cmd("SetAlpha",t[i][s],e)},Algorithm.prototype.addCodeToCanvasBase=function(t,e,i,s,h,r){r=void 0!==r?r:0;var n,a,o=Array(t.length);for(n=0;n<t.length;n++)for(o[n]=new Array(t[n].length),a=0;a<t[n].length;a++)o[n][a]=this.nextIndex++,this.cmd("CreateLabel",o[n][a],t[n][a],e,i+n*s,0),this.cmd("SetForegroundColor",o[n][a],h),this.cmd("SetLayer",o[n][a],r),a>0&&this.cmd("AlignRight",o[n][a],o[n][a-1]);return o},Algorithm.prototype.init=function(t,e,i){this.animationManager=t,t.addListener("AnimationStarted",this,this.disableUI),t.addListener("AnimationEnded",this,this.enableUI),t.addListener("AnimationUndo",this,this.undo),this.canvasWidth=e,this.canvasHeight=i,this.actionHistory=[],this.recordAnimation=!0,this.commands=[]},Algorithm.prototype.sizeChanged=function(t,e){},Algorithm.prototype.implementAction=function(t,e){var i=[t,e];this.actionHistory.push(i);var s=t(e);this.animationManager.StartNewAnimation(s)},Algorithm.prototype.isAllDigits=function(t){for(var e=t.length-1;e>=0;e--)if(t.charAt(e)<"0"||t.charAt(e)>"9")return!1;return!0},Algorithm.prototype.normalizeNumber=function(t,e){return this.isAllDigits(t)&&""!=t?("OOO0000"+t).substr(-e,e):t},Algorithm.prototype.disableUI=function(t){},Algorithm.prototype.enableUI=function(t){},Algorithm.prototype.returnSubmitFloat=function(t,e,i){return void 0!=i&&(t.size=i),function(s){var h=0;if(window.event?h=s.keyCode:s.which&&(h=s.which),13!=h)return controlKey(h)?void 0:109==h?void 0:(void 0!=i||t.value.length<i)&&h>=48&&h<=57?void 0:(void 0!=i||t.value.length<i)&&190==h&&-1==t.value.indexOf(".")&&void 0;e()}},Algorithm.prototype.returnSubmit=function(t,e,i,s){return void 0!=i&&(t.size=i),function(h){var r=0;if(window.event?r=h.keyCode:h.which&&(r=h.which),13==r&&null!==e)e();else{if(190==r||59==r||173==r||189==r)return!1;if((void 0!=i&&t.value.length>=i||s&&(r<48||r>57))&&!controlKey(r))return!1}}},Algorithm.prototype.addReturnSubmit=function(t,e){t.onkeydown=this.returnSubmit(t,e,4,!1)},Algorithm.prototype.reset=function(){},Algorithm.prototype.undo=function(t){this.actionHistory.pop(),this.reset();var e=this.actionHistory.length;this.recordAnimation=!1;for(var i=0;i<e;i++)this.actionHistory[i][0](this.actionHistory[i][1]);this.recordAnimation=!0},Algorithm.prototype.clearHistory=function(){this.actionHistory=[]},Algorithm.prototype.cmd=function(){if(this.recordAnimation){var t=arguments[0];for(i=1;i<arguments.length;i++)t=t+"<;>"+String(arguments[i]);this.commands.push(t)}},Algorithm.prototype.addLabelToAlgorithmBar=function(t){var e=document.createTextNode(t),i=document.createElement("td");i.appendChild(e);var s=this.animationManager.algorithmControlBar;return s&&s.appendChild(i),e},Algorithm.prototype.addCheckboxToAlgorithmBar=function(t){var e=document.createElement("input");e.setAttribute("type","checkbox"),e.setAttribute("value",t);var i=document.createTextNode(t),s=document.createElement("td");s.appendChild(e),s.appendChild(i);var h=this.animationManager.algorithmControlBar;return h&&h.appendChild(s),e},Algorithm.prototype.addRadioButtonGroupToAlgorithmBar=function(t,e){for(var i=[],s=document.createElement("table"),h=0;h<t.length;h++){var r=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("name",e),a.setAttribute("value",t[h]),n.appendChild(a),r.appendChild(n);var o=document.createTextNode(" "+t[h]);n.appendChild(o),s.appendChild(r),i.push(a)}var l=document.createElement("td");l.appendChild(s);var d=this.animationManager.algorithmControlBar;return d&&d.appendChild(l),i},Algorithm.prototype.addControlToAlgorithmBar=function(t,e){var i=document.createElement("input");i.setAttribute("type",t),i.setAttribute("value",e);var s=document.createElement("td");s.appendChild(i);var h=this.animationManager.algorithmControlBar;return h&&h.appendChild(s),i},StackArray.inheritFrom(Algorithm),StackArray.ARRAY_START_X=100,StackArray.ARRAY_START_Y=200,StackArray.ARRAY_ELEM_WIDTH=50,StackArray.ARRAY_ELEM_HEIGHT=50,StackArray.ARRRAY_ELEMS_PER_LINE=15,StackArray.ARRAY_LINE_SPACING=130,StackArray.TOP_POS_X=180,StackArray.TOP_POS_Y=100,StackArray.TOP_LABEL_X=130,StackArray.TOP_LABEL_Y=100,StackArray.PUSH_LABEL_X=50,StackArray.PUSH_LABEL_Y=30,StackArray.PUSH_ELEMENT_X=120,StackArray.PUSH_ELEMENT_Y=30,StackArray.SIZE=30,StackArray.prototype.init=function(t,e,i){StackArray.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.setup(),this.initialIndex=this.nextIndex},StackArray.prototype.addControls=function(){this.controls=[],this.pushField=this.addControlToAlgorithmBar("Text",""),this.pushField.onkeydown=this.returnSubmit(this.pushField,this.pushCallback.bind(this),6),this.pushButton=this.addControlToAlgorithmBar("Button","Push"),this.pushButton.onclick=this.pushCallback.bind(this),this.controls.push(this.pushField),this.controls.push(this.pushButton),this.popButton=this.addControlToAlgorithmBar("Button","Pop"),this.popButton.onclick=this.popCallback.bind(this),this.controls.push(this.popButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear Stack"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton)},StackArray.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},StackArray.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},StackArray.prototype.setup=function(){this.nextIndex=0,this.arrayID=new Array(StackArray.SIZE),this.arrayLabelID=new Array(StackArray.SIZE);for(var t=0;t<StackArray.SIZE;t++)this.arrayID[t]=this.nextIndex++,this.arrayLabelID[t]=this.nextIndex++;this.topID=this.nextIndex++,this.topLabelID=this.nextIndex++,this.arrayData=new Array(StackArray.SIZE),this.top=0,this.leftoverLabelID=this.nextIndex++,this.commands=new Array;for(t=0;t<StackArray.SIZE;t++){var e=t%StackArray.ARRRAY_ELEMS_PER_LINE*StackArray.ARRAY_ELEM_WIDTH+StackArray.ARRAY_START_X,i=Math.floor(t/StackArray.ARRRAY_ELEMS_PER_LINE)*StackArray.ARRAY_LINE_SPACING+StackArray.ARRAY_START_Y;this.cmd("CreateRectangle",this.arrayID[t],"",StackArray.ARRAY_ELEM_WIDTH,StackArray.ARRAY_ELEM_HEIGHT,e,i),this.cmd("CreateLabel",this.arrayLabelID[t],t,e,i+StackArray.ARRAY_ELEM_HEIGHT),this.cmd("SetForegroundColor",this.arrayLabelID[t],"#0000FF")}this.cmd("CreateLabel",this.topLabelID,"top",StackArray.TOP_LABEL_X,StackArray.TOP_LABEL_Y),this.cmd("CreateRectangle",this.topID,0,StackArray.ARRAY_ELEM_WIDTH,StackArray.ARRAY_ELEM_HEIGHT,StackArray.TOP_POS_X,StackArray.TOP_POS_Y),this.cmd("CreateLabel",this.leftoverLabelID,"",StackArray.PUSH_LABEL_X,StackArray.PUSH_LABEL_Y),this.highlight1ID=this.nextIndex++,this.highlight2ID=this.nextIndex++,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},StackArray.prototype.reset=function(){this.top=0,this.nextIndex=this.initialIndex},StackArray.prototype.pushCallback=function(t){if(this.top<StackArray.SIZE&&""!=this.pushField.value){var e=this.pushField.value;this.pushField.value="",this.implementAction(this.push.bind(this),e)}},StackArray.prototype.popCallback=function(t){this.top>0&&this.implementAction(this.pop.bind(this),"")},StackArray.prototype.clearCallback=function(t){this.implementAction(this.clearData.bind(this),"")},StackArray.prototype.clearData=function(t){return this.commands=new Array,this.clearAll(),this.commands},StackArray.prototype.push=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;this.arrayData[this.top]=t,this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Pushing Value: ",StackArray.PUSH_LABEL_X,StackArray.PUSH_LABEL_Y),this.cmd("CreateLabel",i,t,StackArray.PUSH_ELEMENT_X,StackArray.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("CreateHighlightCircle",this.highlight1ID,"#0000FF",StackArray.TOP_POS_X,StackArray.TOP_POS_Y),this.cmd("Step");var s=this.top%StackArray.ARRRAY_ELEMS_PER_LINE*StackArray.ARRAY_ELEM_WIDTH+StackArray.ARRAY_START_X,h=Math.floor(this.top/StackArray.ARRRAY_ELEMS_PER_LINE)*StackArray.ARRAY_LINE_SPACING+StackArray.ARRAY_START_Y;return this.cmd("Move",this.highlight1ID,s,h+StackArray.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Move",i,s,h),this.cmd("Step"),this.cmd("Settext",this.arrayID[this.top],t),this.cmd("Delete",i),this.cmd("Delete",this.highlight1ID),this.cmd("SetHighlight",this.topID,1),this.cmd("Step"),this.top=this.top+1,this.cmd("SetText",this.topID,this.top),this.cmd("Delete",e),this.cmd("Step"),this.cmd("SetHighlight",this.topID,0),this.commands},StackArray.prototype.pop=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Popped Value: ",StackArray.PUSH_LABEL_X,StackArray.PUSH_LABEL_Y),this.cmd("SetHighlight",this.topID,1),this.cmd("Step"),this.top=this.top-1,this.cmd("SetText",this.topID,this.top),this.cmd("Step"),this.cmd("SetHighlight",this.topID,0),this.cmd("CreateHighlightCircle",this.highlight1ID,"#0000FF",StackArray.TOP_POS_X,StackArray.TOP_POS_Y),this.cmd("Step");var s=this.top%StackArray.ARRRAY_ELEMS_PER_LINE*StackArray.ARRAY_ELEM_WIDTH+StackArray.ARRAY_START_X,h=Math.floor(this.top/StackArray.ARRRAY_ELEMS_PER_LINE)*StackArray.ARRAY_LINE_SPACING+StackArray.ARRAY_START_Y;return this.cmd("Move",this.highlight1ID,s,h+StackArray.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("CreateLabel",i,this.arrayData[this.top],s,h),this.cmd("Settext",this.arrayID[this.top],""),this.cmd("Move",i,StackArray.PUSH_ELEMENT_X,StackArray.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Delete",i),this.cmd("Delete",e),this.cmd("Delete",this.highlight1ID),this.cmd("SetText",this.leftoverLabelID,"Popped Value: "+this.arrayData[this.top]),this.commands},StackArray.prototype.clearAll=function(){this.commands=new Array;for(var t=0;t<this.top;t++)this.cmd("SetText",this.arrayID[t],"");return this.top=0,this.cmd("SetText",this.topID,"0"),this.commands},StackLL.inheritFrom(Algorithm),StackLL.LINKED_LIST_START_X=100,StackLL.LINKED_LIST_START_Y=200,StackLL.LINKED_LIST_ELEM_WIDTH=70,StackLL.LINKED_LIST_ELEM_HEIGHT=30,StackLL.LINKED_LIST_INSERT_X=250,StackLL.LINKED_LIST_INSERT_Y=50,StackLL.LINKED_LIST_ELEMS_PER_LINE=8,StackLL.LINKED_LIST_ELEM_SPACING=100,StackLL.LINKED_LIST_LINE_SPACING=100,StackLL.TOP_POS_X=180,StackLL.TOP_POS_Y=100,StackLL.TOP_LABEL_X=130,StackLL.TOP_LABEL_Y=100,StackLL.TOP_ELEM_WIDTH=30,StackLL.TOP_ELEM_HEIGHT=30,StackLL.PUSH_LABEL_X=50,StackLL.PUSH_LABEL_Y=30,StackLL.PUSH_ELEMENT_X=120,StackLL.PUSH_ELEMENT_Y=30,StackLL.SIZE=32,StackLL.prototype.init=function(t,e,i){StackLL.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.setup(),this.initialIndex=this.nextIndex},StackLL.prototype.addControls=function(){this.controls=[],this.pushField=this.addControlToAlgorithmBar("Text",""),this.pushField.onkeydown=this.returnSubmit(this.pushField,this.pushCallback.bind(this),6),this.pushButton=this.addControlToAlgorithmBar("Button","Push"),this.pushButton.onclick=this.pushCallback.bind(this),this.controls.push(this.pushField),this.controls.push(this.pushButton),this.popButton=this.addControlToAlgorithmBar("Button","Pop"),this.popButton.onclick=this.popCallback.bind(this),this.controls.push(this.popButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear Stack"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton)},StackLL.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},StackLL.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},StackLL.prototype.setup=function(){this.linkedListElemID=new Array(StackLL.SIZE);for(var t=0;t<StackLL.SIZE;t++)this.linkedListElemID[t]=this.nextIndex++;this.topID=this.nextIndex++,this.topLabelID=this.nextIndex++,this.arrayData=new Array(StackLL.SIZE),this.top=0,this.leftoverLabelID=this.nextIndex++,this.cmd("CreateLabel",this.topLabelID,"Top",StackLL.TOP_LABEL_X,StackLL.TOP_LABEL_Y),this.cmd("CreateRectangle",this.topID,"",StackLL.TOP_ELEM_WIDTH,StackLL.TOP_ELEM_HEIGHT,StackLL.TOP_POS_X,StackLL.TOP_POS_Y),this.cmd("SetNull",this.topID,1),this.cmd("CreateLabel",this.leftoverLabelID,"",StackLL.PUSH_LABEL_X,StackLL.PUSH_LABEL_Y),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},StackLL.prototype.resetLinkedListPositions=function(){for(var t=this.top-1;t>=0;t--){var e=(this.top-1-t)%StackLL.LINKED_LIST_ELEMS_PER_LINE*StackLL.LINKED_LIST_ELEM_SPACING+StackLL.LINKED_LIST_START_X,i=Math.floor((this.top-1-t)/StackLL.LINKED_LIST_ELEMS_PER_LINE)*StackLL.LINKED_LIST_LINE_SPACING+StackLL.LINKED_LIST_START_Y;this.cmd("Move",this.linkedListElemID[t],e,i)}},StackLL.prototype.reset=function(){this.top=0,this.nextIndex=this.initialIndex},StackLL.prototype.pushCallback=function(t){if(this.top<StackLL.SIZE&&""!=this.pushField.value){var e=this.pushField.value;this.pushField.value="",this.implementAction(this.push.bind(this),e)}},StackLL.prototype.popCallback=function(t){this.top>0&&this.implementAction(this.pop.bind(this),"")},StackLL.prototype.clearCallback=function(t){this.implementAction(this.clearAll.bind(this),"")},StackLL.prototype.push=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;return this.arrayData[this.top]=t,this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLinkedList",this.linkedListElemID[this.top],"",StackLL.LINKED_LIST_ELEM_WIDTH,StackLL.LINKED_LIST_ELEM_HEIGHT,StackLL.LINKED_LIST_INSERT_X,StackLL.LINKED_LIST_INSERT_Y,.25,0,1,1),this.cmd("CreateLabel",e,"Pushing Value: ",StackLL.PUSH_LABEL_X,StackLL.PUSH_LABEL_Y),this.cmd("CreateLabel",i,t,StackLL.PUSH_ELEMENT_X,StackLL.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Move",i,StackLL.LINKED_LIST_INSERT_X,StackLL.LINKED_LIST_INSERT_Y),this.cmd("Step"),this.cmd("SetText",this.linkedListElemID[this.top],t),this.cmd("Delete",i),0==this.top?(this.cmd("SetNull",this.topID,0),this.cmd("SetNull",this.linkedListElemID[this.top],1)):(this.cmd("Connect",this.linkedListElemID[this.top],this.linkedListElemID[this.top-1]),this.cmd("Step"),this.cmd("Disconnect",this.topID,this.linkedListElemID[this.top-1])),this.cmd("Connect",this.topID,this.linkedListElemID[this.top]),this.cmd("Step"),this.top=this.top+1,this.resetLinkedListPositions(),this.cmd("Delete",e),this.cmd("Step"),this.commands},StackLL.prototype.pop=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;return this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Popped Value: ",StackLL.PUSH_LABEL_X,StackLL.PUSH_LABEL_Y),this.cmd("CreateLabel",i,this.arrayData[this.top-1],StackLL.LINKED_LIST_START_X,StackLL.LINKED_LIST_START_Y),this.cmd("Move",i,StackLL.PUSH_ELEMENT_X,StackLL.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Disconnect",this.topID,this.linkedListElemID[this.top-1]),1==this.top?this.cmd("SetNull",this.topID,1):this.cmd("Connect",this.topID,this.linkedListElemID[this.top-2]),this.cmd("Step"),this.cmd("Delete",this.linkedListElemID[this.top-1]),this.top=this.top-1,this.resetLinkedListPositions(),this.cmd("Delete",i),this.cmd("Delete",e),this.cmd("SetText",this.leftoverLabelID,"Popped Value: "+this.arrayData[this.top]),this.commands},StackLL.prototype.clearAll=function(){this.commands=new Array;for(var t=0;t<this.top;t++)this.cmd("Delete",this.linkedListElemID[t]);return this.top=0,this.cmd("SetNull",this.topID,1),this.commands},QueueArray.inheritFrom(Algorithm),QueueArray.ARRAY_START_X=100,QueueArray.ARRAY_START_Y=200,QueueArray.ARRAY_ELEM_WIDTH=50,QueueArray.ARRAY_ELEM_HEIGHT=50,QueueArray.ARRRAY_ELEMS_PER_LINE=15,QueueArray.ARRAY_LINE_SPACING=130,QueueArray.HEAD_POS_X=180,QueueArray.HEAD_POS_Y=100,QueueArray.HEAD_LABEL_X=130,QueueArray.HEAD_LABEL_Y=100,QueueArray.TAIL_POS_X=280,QueueArray.TAIL_POS_Y=100,QueueArray.TAIL_LABEL_X=230,QueueArray.TAIL_LABEL_Y=100,QueueArray.QUEUE_LABEL_X=50,QueueArray.QUEUE_LABEL_Y=30,QueueArray.QUEUE_ELEMENT_X=120,QueueArray.QUEUE_ELEMENT_Y=30,QueueArray.INDEX_COLOR="#0000FF",QueueArray.SIZE=15,QueueArray.prototype.init=function(t,e,i){QueueArray.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.setup(),this.initialIndex=this.nextIndex},QueueArray.prototype.addControls=function(){this.controls=[],this.enqueueField=this.addControlToAlgorithmBar("Text",""),this.enqueueField.onkeydown=this.returnSubmit(this.enqueueField,this.enqueueCallback.bind(this),6),this.enqueueButton=this.addControlToAlgorithmBar("Button","Enqueue"),this.enqueueButton.onclick=this.enqueueCallback.bind(this),this.controls.push(this.enqueueField),this.controls.push(this.enqueueButton),this.dequeueButton=this.addControlToAlgorithmBar("Button","Dequeue"),this.dequeueButton.onclick=this.dequeueCallback.bind(this),this.controls.push(this.dequeueButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear Queue"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton)},QueueArray.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},QueueArray.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},QueueArray.prototype.setup=function(){this.nextIndex=0,this.arrayID=new Array(QueueArray.SIZE),this.arrayLabelID=new Array(QueueArray.SIZE);for(var t=0;t<QueueArray.SIZE;t++)this.arrayID[t]=this.nextIndex++,this.arrayLabelID[t]=this.nextIndex++;this.headID=this.nextIndex++,headLabelID=this.nextIndex++,this.tailID=this.nextIndex++,tailLabelID=this.nextIndex++,this.arrayData=new Array(QueueArray.SIZE),this.head=0,this.tail=0,this.leftoverLabelID=this.nextIndex++;for(t=0;t<QueueArray.SIZE;t++){var e=t%QueueArray.ARRRAY_ELEMS_PER_LINE*QueueArray.ARRAY_ELEM_WIDTH+QueueArray.ARRAY_START_X,i=Math.floor(t/QueueArray.ARRRAY_ELEMS_PER_LINE)*QueueArray.ARRAY_LINE_SPACING+QueueArray.ARRAY_START_Y;this.cmd("CreateRectangle",this.arrayID[t],"",QueueArray.ARRAY_ELEM_WIDTH,QueueArray.ARRAY_ELEM_HEIGHT,e,i),this.cmd("CreateLabel",this.arrayLabelID[t],t,e,i+QueueArray.ARRAY_ELEM_HEIGHT),this.cmd("SetForegroundColor",this.arrayLabelID[t],QueueArray.INDEX_COLOR)}this.cmd("CreateLabel",headLabelID,"Head",QueueArray.HEAD_LABEL_X,QueueArray.HEAD_LABEL_Y),this.cmd("CreateRectangle",this.headID,0,QueueArray.ARRAY_ELEM_WIDTH,QueueArray.ARRAY_ELEM_HEIGHT,QueueArray.HEAD_POS_X,QueueArray.HEAD_POS_Y),this.cmd("CreateLabel",tailLabelID,"Tail",QueueArray.TAIL_LABEL_X,QueueArray.TAIL_LABEL_Y),this.cmd("CreateRectangle",this.tailID,0,QueueArray.ARRAY_ELEM_WIDTH,QueueArray.ARRAY_ELEM_HEIGHT,QueueArray.TAIL_POS_X,QueueArray.TAIL_POS_Y),this.cmd("CreateLabel",this.leftoverLabelID,"",QueueArray.QUEUE_LABEL_X,QueueArray.QUEUE_LABEL_Y),this.initialIndex=this.nextIndex,this.highlight1ID=this.nextIndex++,this.highlight2ID=this.nextIndex++,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},QueueArray.prototype.reset=function(){this.top=0,this.nextIndex=this.initialIndex},QueueArray.prototype.enqueueCallback=function(t){if((this.tail+1)%QueueArray.SIZE!=this.head&&""!=this.enqueueField.value){var e=this.enqueueField.value;this.enqueueField.value="",this.implementAction(this.enqueue.bind(this),e)}},QueueArray.prototype.dequeueCallback=function(t){this.tail!=this.head&&this.implementAction(this.dequeue.bind(this),"")},QueueArray.prototype.clearCallback=function(t){this.implementAction(this.clearAll.bind(this),"")},QueueArray.prototype.enqueue=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;this.arrayData[this.tail]=t,this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Enqueuing Value: ",QueueArray.QUEUE_LABEL_X,QueueArray.QUEUE_LABEL_Y),this.cmd("CreateLabel",i,t,QueueArray.QUEUE_ELEMENT_X,QueueArray.QUEUE_ELEMENT_Y),this.cmd("Step"),this.cmd("CreateHighlightCircle",this.highlight1ID,QueueArray.INDEX_COLOR,QueueArray.TAIL_POS_X,QueueArray.TAIL_POS_Y),this.cmd("Step");var s=this.tail%QueueArray.ARRRAY_ELEMS_PER_LINE*QueueArray.ARRAY_ELEM_WIDTH+QueueArray.ARRAY_START_X,h=Math.floor(this.tail/QueueArray.ARRRAY_ELEMS_PER_LINE)*QueueArray.ARRAY_LINE_SPACING+QueueArray.ARRAY_START_Y;return this.cmd("Move",this.highlight1ID,s,h+QueueArray.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Move",i,s,h),this.cmd("Step"),this.cmd("Settext",this.arrayID[this.tail],t),this.cmd("Delete",i),this.cmd("Delete",this.highlight1ID),this.cmd("SetHighlight",this.tailID,1),this.cmd("Step"),this.tail=(this.tail+1)%QueueArray.SIZE,this.cmd("SetText",this.tailID,this.tail),this.cmd("Step"),this.cmd("SetHighlight",this.tailID,0),this.cmd("Delete",e),this.commands},QueueArray.prototype.dequeue=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Dequeued Value: ",QueueArray.QUEUE_LABEL_X,QueueArray.QUEUE_LABEL_Y),this.cmd("CreateHighlightCircle",this.highlight1ID,QueueArray.INDEX_COLOR,QueueArray.HEAD_POS_X,QueueArray.HEAD_POS_Y),this.cmd("Step");var s=this.head%QueueArray.ARRRAY_ELEMS_PER_LINE*QueueArray.ARRAY_ELEM_WIDTH+QueueArray.ARRAY_START_X,h=Math.floor(this.head/QueueArray.ARRRAY_ELEMS_PER_LINE)*QueueArray.ARRAY_LINE_SPACING+QueueArray.ARRAY_START_Y;this.cmd("Move",this.highlight1ID,s,h+QueueArray.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Delete",this.highlight1ID);var r=this.arrayData[this.head];return this.cmd("CreateLabel",i,r,s,h),this.cmd("Settext",this.arrayID[this.head],""),this.cmd("Move",i,QueueArray.QUEUE_ELEMENT_X,QueueArray.QUEUE_ELEMENT_Y),this.cmd("Step"),this.cmd("SetHighlight",this.headID,1),this.cmd("Step"),this.head=(this.head+1)%QueueArray.SIZE,this.cmd("SetText",this.headID,this.head),this.cmd("Step"),this.cmd("SetHighlight",this.headID,0),this.cmd("SetText",this.leftoverLabelID,"Dequeued Value: "+r),this.cmd("Delete",e),this.cmd("Delete",i),this.commands},QueueArray.prototype.clearAll=function(){this.commands=new Array,this.cmd("SetText",this.leftoverLabelID,"");for(var t=0;t<QueueArray.SIZE;t++)this.cmd("SetText",this.arrayID[t],"");return this.head=0,this.tail=0,this.cmd("SetText",this.headID,"0"),this.cmd("SetText",this.tailID,"0"),this.commands},QueueLL.inheritFrom(Algorithm),QueueLL.LINKED_LIST_START_X=100,QueueLL.LINKED_LIST_START_Y=200,QueueLL.LINKED_LIST_ELEM_WIDTH=70,QueueLL.LINKED_LIST_ELEM_HEIGHT=30,QueueLL.LINKED_LIST_INSERT_X=250,QueueLL.LINKED_LIST_INSERT_Y=50,QueueLL.LINKED_LIST_ELEMS_PER_LINE=8,QueueLL.LINKED_LIST_ELEM_SPACING=100,QueueLL.LINKED_LIST_LINE_SPACING=100,QueueLL.TOP_POS_X=180,QueueLL.TOP_POS_Y=100,QueueLL.TOP_LABEL_X=130,QueueLL.TOP_LABEL_Y=100,QueueLL.TOP_ELEM_WIDTH=30,QueueLL.TOP_ELEM_HEIGHT=30,QueueLL.TAIL_POS_X=180,QueueLL.TAIL_LABEL_X=130,QueueLL.PUSH_LABEL_X=50,QueueLL.PUSH_LABEL_Y=30,QueueLL.PUSH_ELEMENT_X=120,QueueLL.PUSH_ELEMENT_Y=30,QueueLL.SIZE=32,QueueLL.prototype.init=function(t,e,i){QueueLL.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.tail_pos_y=i-QueueLL.LINKED_LIST_ELEM_HEIGHT,this.tail_label_y=this.tail_pos_y,this.setup(),this.initialIndex=this.nextIndex},QueueLL.prototype.addControls=function(){this.controls=[],this.enqueueField=this.addControlToAlgorithmBar("Text",""),this.enqueueField.onkeydown=this.returnSubmit(this.enqueueField,this.enqueueCallback.bind(this),6),this.enqueueButton=this.addControlToAlgorithmBar("Button","Enqueue"),this.enqueueButton.onclick=this.enqueueCallback.bind(this),this.controls.push(this.enqueueField),this.controls.push(this.enqueueButton),this.dequeueButton=this.addControlToAlgorithmBar("Button","Dequeue"),this.dequeueButton.onclick=this.dequeueCallback.bind(this),this.controls.push(this.dequeueButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear Queue"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton)},QueueLL.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},QueueLL.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},QueueLL.prototype.setup=function(){this.linkedListElemID=new Array(QueueLL.SIZE);for(var t=0;t<QueueLL.SIZE;t++)this.linkedListElemID[t]=this.nextIndex++;this.headID=this.nextIndex++,this.headLabelID=this.nextIndex++,this.tailID=this.nextIndex++,this.tailLabelID=this.nextIndex++,this.arrayData=new Array(QueueLL.SIZE),this.top=0,this.leftoverLabelID=this.nextIndex++,this.cmd("CreateLabel",this.headLabelID,"Head",QueueLL.TOP_LABEL_X,QueueLL.TOP_LABEL_Y),this.cmd("CreateRectangle",this.headID,"",QueueLL.TOP_ELEM_WIDTH,QueueLL.TOP_ELEM_HEIGHT,QueueLL.TOP_POS_X,QueueLL.TOP_POS_Y),this.cmd("SetNull",this.headID,1),this.cmd("CreateLabel",this.tailLabelID,"Tail",QueueLL.TAIL_LABEL_X,this.tail_label_y),this.cmd("CreateRectangle",this.tailID,"",QueueLL.TOP_ELEM_WIDTH,QueueLL.TOP_ELEM_HEIGHT,QueueLL.TAIL_POS_X,this.tail_pos_y),this.cmd("SetNull",this.tailID,1),this.cmd("CreateLabel",this.leftoverLabelID,"",5,QueueLL.PUSH_LABEL_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},QueueLL.prototype.resetLinkedListPositions=function(){for(var t=this.top-1;t>=0;t--){var e=(this.top-1-t)%QueueLL.LINKED_LIST_ELEMS_PER_LINE*QueueLL.LINKED_LIST_ELEM_SPACING+QueueLL.LINKED_LIST_START_X,i=Math.floor((this.top-1-t)/QueueLL.LINKED_LIST_ELEMS_PER_LINE)*QueueLL.LINKED_LIST_LINE_SPACING+QueueLL.LINKED_LIST_START_Y;this.cmd("Move",this.linkedListElemID[t],e,i)}},QueueLL.prototype.reset=function(){this.top=0,this.nextIndex=this.initialIndex},QueueLL.prototype.enqueueCallback=function(t){if(this.top<QueueLL.SIZE&&""!=this.enqueueField.value){var e=this.enqueueField.value;this.enqueueField.value="",this.implementAction(this.enqueue.bind(this),e)}},QueueLL.prototype.dequeueCallback=function(t){this.top>0&&this.implementAction(this.dequeue.bind(this),"")},QueueLL.prototype.clearCallback=function(t){this.implementAction(this.clearData.bind(this),"")},QueueLL.prototype.enqueue=function(t){this.commands=new Array,this.arrayData[this.top]=t,this.cmd("SetText",this.leftoverLabelID,"");for(var e=this.top;e>0;e--)this.arrayData[e]=this.arrayData[e-1],this.linkedListElemID[e]=this.linkedListElemID[e-1];this.arrayData[0]=t,this.linkedListElemID[0]=this.nextIndex++;var i=this.nextIndex++,s=this.nextIndex++;return this.cmd("CreateLinkedList",this.linkedListElemID[0],"",QueueLL.LINKED_LIST_ELEM_WIDTH,QueueLL.LINKED_LIST_ELEM_HEIGHT,QueueLL.LINKED_LIST_INSERT_X,QueueLL.LINKED_LIST_INSERT_Y,.25,0,1,1),this.cmd("SetNull",this.linkedListElemID[0],1),this.cmd("CreateLabel",i,"Enqueuing Value: ",QueueLL.PUSH_LABEL_X,QueueLL.PUSH_LABEL_Y),this.cmd("CreateLabel",s,t,QueueLL.PUSH_ELEMENT_X,QueueLL.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Move",s,QueueLL.LINKED_LIST_INSERT_X,QueueLL.LINKED_LIST_INSERT_Y),this.cmd("Step"),this.cmd("SetText",this.linkedListElemID[0],t),this.cmd("Delete",s),0==this.top?(this.cmd("SetNull",this.headID,0),this.cmd("SetNull",this.tailID,0),this.cmd("connect",this.headID,this.linkedListElemID[this.top]),this.cmd("connect",this.tailID,this.linkedListElemID[this.top])):(this.cmd("SetNull",this.linkedListElemID[1],0),this.cmd("Connect",this.linkedListElemID[1],this.linkedListElemID[0]),this.cmd("Step"),this.cmd("Disconnect",this.tailID,this.linkedListElemID[1])),this.cmd("Connect",this.tailID,this.linkedListElemID[0]),this.cmd("Step"),this.top=this.top+1,this.resetLinkedListPositions(),this.cmd("Delete",i),this.cmd("Step"),this.commands},QueueLL.prototype.dequeue=function(t){this.commands=new Array;var e=this.nextIndex++,i=this.nextIndex++;return this.cmd("SetText",this.leftoverLabelID,""),this.cmd("CreateLabel",e,"Dequeued Value: ",QueueLL.PUSH_LABEL_X,QueueLL.PUSH_LABEL_Y),this.cmd("CreateLabel",i,this.arrayData[this.top-1],QueueLL.LINKED_LIST_START_X,QueueLL.LINKED_LIST_START_Y),this.cmd("Move",i,QueueLL.PUSH_ELEMENT_X,QueueLL.PUSH_ELEMENT_Y),this.cmd("Step"),this.cmd("Disconnect",this.headID,this.linkedListElemID[this.top-1]),1==this.top?(this.cmd("SetNull",this.headID,1),this.cmd("SetNull",this.tailID,1),this.cmd("Disconnect",this.tailID,this.linkedListElemID[this.top-1])):this.cmd("Connect",this.headID,this.linkedListElemID[this.top-2]),this.cmd("Step"),this.cmd("Delete",this.linkedListElemID[this.top-1]),this.top=this.top-1,this.resetLinkedListPositions(),this.cmd("Delete",i),this.cmd("Delete",e),this.cmd("SetText",this.leftoverLabelID,"Dequeued Value: "+this.arrayData[this.top]),this.commands},QueueLL.prototype.clearAll=function(){this.commands=new Array;for(var t=0;t<this.top;t++)this.cmd("Delete",this.linkedListElemID[t]);return this.top=0,this.cmd("SetNull",this.headID,1),this.commands},Search.CODE_START_X=10,Search.CODE_START_Y=10,Search.CODE_LINE_HEIGHT=14,Search.CODE_HIGHLIGHT_COLOR="#FF0000",Search.CODE_STANDARD_COLOR="#000000",Search.SMALL_SIZE=0,Search.LARGE_SIZE=1,Search.EXTRA_FIELD_WIDTH=50,Search.EXTRA_FIELD_HEIGHT=50,Search.SEARCH_FOR_X=450,Search.SEARCH_FOR_Y=30,Search.RESULT_X=550,Search.RESULT_Y=30,Search.INDEX_X=450,Search.INDEX_Y=130,Search.HIGHLIGHT_CIRCLE_SIZE_SMALL=20,Search.HIGHLIGHT_CIRCLE_SIZE_LARGE=10,Search.HIGHLIGHT_CIRCLE_SIZE=Search.HIGHLIGHT_CIRCLE_SIZE_SMALL,Search.LOW_CIRCLE_COLOR="#1010FF",Search.LOW_BACKGROUND_COLOR="#F0F0FF",Search.MID_CIRCLE_COLOR="#118C4E",Search.MID_BACKGROUND_COLOR="#F0FFF0",Search.HIGH_CIRCLE_COLOR="#FF9009",Search.HIGH_BACKGROUND_COLOR="#FFFFF0",Search.LOW_POS_X=350,Search.LOW_POS_Y=130,Search.MID_POS_X=450,Search.MID_POS_Y=130,Search.HIGH_POS_X=550,Search.HIGH_POS_Y=130,Search.ARRAY_START_X_SMALL=100,Search.ARRAY_START_X_LARGE=100,Search.ARRAY_START_X=Search.ARRAY_START_X_SMALL,Search.ARRAY_START_Y_SMALL=240,Search.ARRAY_START_Y_LARGE=200,Search.ARRAY_START_Y=Search.ARRAY_START_Y_SMALL,Search.ARRAY_ELEM_WIDTH_SMALL=50,Search.ARRAY_ELEM_WIDTH_LARGE=25,Search.ARRAY_ELEM_WIDTH=Search.ARRAY_ELEM_WIDTH_SMALL,Search.ARRAY_ELEM_HEIGHT_SMALL=50,Search.ARRAY_ELEM_HEIGHT_LARGE=20,Search.ARRAY_ELEM_HEIGHT=Search.ARRAY_ELEM_HEIGHT_SMALL,Search.ARRAY_ELEMS_PER_LINE_SMALL=16,Search.ARRAY_ELEMS_PER_LINE_LARGE=30,Search.ARRAY_ELEMS_PER_LINE=Search.ARRAY_ELEMS_PER_LINE_SMALL,Search.ARRAY_LINE_SPACING_LARGE=40,Search.ARRAY_LINE_SPACING_SMALL=130,Search.ARRAY_LINE_SPACING=Search.ARRAY_LINE_SPACING_SMALL,Search.SIZE_SMALL=32,Search.SIZE_LARGE=180;var SIZE=Search.SIZE_SMALL,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg;function Search(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new Search(t,canvas.width,canvas.height)}function AVL(t,e,i){this.init(t,e,i)}function AVLNode(t,e,i,s,h){this.data=t,this.x=s,this.y=h,this.heightLabelID=i,this.height=1,this.graphicID=e,this.left=null,this.right=null,this.parent=null}function init(){var t=initCanvas();currentAlg=new AVL(t,canvas.width,canvas.height)}function BPlusTree(t,e,i){this.init(t,e,i)}function BTreeNode(t,e,i){this.widths=[],this.keys=[],this.children=[],this.x=e,this.y=i,this.graphicID=t,this.numKeys=1,this.isLeaf=!0,this.parent=null,this.leftWidth=0,this.rightWidth=0,this.next=null}function init(){var t=initCanvas();currentAlg=new BPlusTree(t,canvas.width,canvas.height)}function BST(t,e,i){this.init(t,e,i)}function BSTNode(t,e,i,s){this.data=t,this.x=i,this.y=s,this.graphicID=e,this.left=null,this.right=null,this.parent=null}function init(){var t=initCanvas();currentAlg=new BST(t,canvas.width,canvas.height)}function BTree(t,e,i,s){this.initial_max_degree=this.max_degree=s||3,this.init(t,e,i)}function BTreeNode(t,e,i){this.widths=[],this.keys=[],this.children=[],this.x=e,this.y=i,this.graphicID=t,this.numKeys=1,this.isLeaf=!0,this.parent=null,this.leftWidth=0,this.rightWidth=0}function init(){var t=initCanvas();currentAlg=new BTree(t,canvas.width,canvas.height)}function RadixTree(t,e,i){this.init(t,e,i)}function RadixNode(t,e,i,s){this.wordRemainder=t,this.x=i,this.y=s,this.graphicID=e,this.children=new Array(26),this.childWidths=new Array(26);for(var h=0;h<26;h++)this.children[h]=null,this.childWidths[h]=0;this.width=0,this.parent=null,this.isword=!1}function init(){var t=initCanvas();currentAlg=new RadixTree(t,canvas.width,canvas.height)}function RedBlack(t,e,i){this.init(t,e,i)}Search.inheritFrom(Algorithm),Search.LINEAR_CODE=[["def ","linearSearch(listData, value)"],["    index = 0"],["    while (","index < len(listData)"," and ","listData[index] < value","):"],["        index++;"],["    if (","index >= len(listData"," or ","listData[index] != value","):"],["        return -1"],["    return index"]],Search.BINARY_CODE=[["def ","binarySearch(listData, value)"],["    low = 0"],["    high = len(listData) - 1"],["    while (","low <= high",")"],["        mid = (low + high) / 2"],["        if (","listData[mid] == value","):"],["            return mid"],["        elif (","listData[mid] < value",")"],["            low = mid + 1"],["        else:"],["            high = mid - 1"],["    return -1"]],Search.prototype.init=function(t,e,i){Search.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.commands=[],this.setup(),this.initialIndex=this.nextIndex},Search.prototype.addControls=function(){this.controls=[],this.searchField=this.addControlToAlgorithmBar("Text",""),this.searchField.onkeydown=this.returnSubmit(this.searchField,null,6,!0),this.linearSearchButton=this.addControlToAlgorithmBar("Button","Linear Search"),this.linearSearchButton.onclick=this.linearSearchCallback.bind(this),this.controls.push(this.searchField),this.controls.push(this.linearSearchButton),this.binarySearchButton=this.addControlToAlgorithmBar("Button","Binary Search"),this.binarySearchButton.onclick=this.binarySearchCallback.bind(this),this.controls.push(this.binarySearchButton);var t=this.addRadioButtonGroupToAlgorithmBar(["Small","Large"],"List Size");this.smallListButton=t[0],this.smallListButton.onclick=this.smallListCallback.bind(this),this.largeListButton=t[1],this.largeListButton.onclick=this.largeListCallback.bind(this),this.smallListButton.checked=!0},Search.prototype.smallListCallback=function(t){this.size!=Search.SMALL_SIZE&&(this.animationManager.resetAll(),this.setup_small())},Search.prototype.largeListCallback=function(t){this.size!=Search.LARGE_SIZE&&(this.animationManager.resetAll(),this.setup_large())},Search.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},Search.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},Search.prototype.getIndexX=function(t){return t%Search.ARRAY_ELEMS_PER_LINE*Search.ARRAY_ELEM_WIDTH+Search.ARRAY_START_X},Search.prototype.getIndexY=function(t){return-1==t&&(t=0),Math.floor(t/Search.ARRAY_ELEMS_PER_LINE)*Search.ARRAY_LINE_SPACING+Search.ARRAY_START_Y+Search.ARRAY_ELEM_HEIGHT},Search.prototype.setup=function(){this.nextIndex=0,this.values=new Array(SIZE),this.arrayData=new Array(SIZE),this.arrayID=new Array(SIZE),this.arrayLabelID=new Array(SIZE);for(var t=0;t<SIZE;t++)this.arrayData[t]=Math.floor(1+999*Math.random()),this.arrayID[t]=this.nextIndex++,this.arrayLabelID[t]=this.nextIndex++;for(t=1;t<SIZE;t++){for(var e=this.arrayData[t],i=t;i>0&&this.arrayData[i-1]>e;)this.arrayData[i]=this.arrayData[i-1],i-=1;this.arrayData[i]=e}this.leftoverLabelID=this.nextIndex++,this.commands=new Array;for(t=0;t<SIZE;t++){var s=this.getIndexX(t),h=this.getIndexY(t);this.cmd("CreateRectangle",this.arrayID[t],this.arrayData[t],Search.ARRAY_ELEM_WIDTH,Search.ARRAY_ELEM_HEIGHT,s,h-Search.ARRAY_ELEM_HEIGHT),this.cmd("CreateLabel",this.arrayLabelID[t],t,s,h),this.cmd("SetForegroundColor",this.arrayLabelID[t],"#0000FF")}this.movingLabelID=this.nextIndex++,this.cmd("CreateLabel",this.movingLabelID,"",0,0),this.searchForBoxID=this.nextIndex++,this.searchForBoxLabel=this.nextIndex++,this.cmd("CreateRectangle",this.searchForBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.SEARCH_FOR_X,Search.SEARCH_FOR_Y),this.cmd("CreateLabel",this.searchForBoxLabel,"Seaching For  ",Search.SEARCH_FOR_X,Search.SEARCH_FOR_Y),this.cmd("AlignLeft",this.searchForBoxLabel,this.searchForBoxID),this.resultBoxID=this.nextIndex++,this.resultBoxLabel=this.nextIndex++,this.resultString=this.nextIndex++,this.cmd("CreateRectangle",this.resultBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.RESULT_X,Search.RESULT_Y),this.cmd("CreateLabel",this.resultBoxLabel,"Result  ",Search.RESULT_X,Search.RESULT_Y),this.cmd("CreateLabel",this.resultString,"",Search.RESULT_X,Search.RESULT_Y),this.cmd("AlignLeft",this.resultBoxLabel,this.resultBoxID),this.cmd("AlignRight",this.resultString,this.resultBoxID),this.cmd("SetTextColor",this.resultString,"#FF0000"),this.indexBoxID=this.nextIndex++,this.indexBoxLabel=this.nextIndex++,this.cmd("CreateRectangle",this.indexBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.INDEX_X,Search.INDEX_Y),this.cmd("CreateLabel",this.indexBoxLabel,"index  ",Search.INDEX_X,Search.INDEX_Y),this.cmd("AlignLeft",this.indexBoxLabel,this.indexBoxID),this.midBoxID=this.nextIndex++,this.midBoxLabel=this.nextIndex++,this.cmd("CreateRectangle",this.midBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.MID_POS_X,Search.MID_POS_Y),this.cmd("CreateLabel",this.midBoxLabel,"mid  ",Search.MID_POS_X,Search.MID_POS_Y),this.cmd("AlignLeft",this.midBoxLabel,this.midBoxID),this.cmd("SetForegroundColor",this.midBoxID,Search.MID_CIRCLE_COLOR),this.cmd("SetTextColor",this.midBoxID,Search.MID_CIRCLE_COLOR),this.cmd("SetBackgroundColor",this.midBoxID,Search.MID_BACKGROUND_COLOR),this.midCircleID=this.nextIndex++,this.cmd("CreateHighlightCircle",this.midCircleID,Search.MID_CIRCLE_COLOR,0,0,Search.HIGHLIGHT_CIRCLE_SIZE),this.lowBoxID=this.nextIndex++,this.lowBoxLabel=this.nextIndex++,this.cmd("CreateRectangle",this.lowBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.LOW_POS_X,Search.LOW_POS_Y),this.cmd("CreateLabel",this.lowBoxLabel,"low  ",Search.LOW_POS_X,Search.LOW_POS_Y),this.cmd("AlignLeft",this.lowBoxLabel,this.lowBoxID),this.cmd("SetForegroundColor",this.lowBoxID,Search.LOW_CIRCLE_COLOR),this.cmd("SetTextColor",this.lowBoxID,Search.LOW_CIRCLE_COLOR),this.cmd("SetBackgroundColor",this.lowBoxID,Search.LOW_BACKGROUND_COLOR),this.lowCircleID=this.nextIndex++,this.cmd("CreateHighlightCircle",this.lowCircleID,Search.LOW_CIRCLE_COLOR,0,0,Search.HIGHLIGHT_CIRCLE_SIZE),this.highBoxID=this.nextIndex++,this.highBoxLabel=this.nextIndex++,this.cmd("CreateRectangle",this.highBoxID,"",Search.EXTRA_FIELD_WIDTH,Search.EXTRA_FIELD_HEIGHT,Search.HIGH_POS_X,Search.HIGH_POS_Y),this.cmd("CreateLabel",this.highBoxLabel,"high  ",Search.HIGH_POS_X,Search.HIGH_POS_Y),this.cmd("AlignLeft",this.highBoxLabel,this.highBoxID),this.cmd("SetForegroundColor",this.highBoxID,Search.HIGH_CIRCLE_COLOR),this.cmd("SetTextColor",this.highBoxID,Search.HIGH_CIRCLE_COLOR),this.cmd("SetBackgroundColor",this.highBoxID,Search.HIGH_BACKGROUND_COLOR),this.highCircleID=this.nextIndex++,this.cmd("CreateHighlightCircle",this.highCircleID,Search.HIGH_CIRCLE_COLOR,0,0,Search.HIGHLIGHT_CIRCLE_SIZE),this.cmd("SetALpha",this.lowBoxID,0),this.cmd("SetALpha",this.lowBoxLabel,0),this.cmd("SetALpha",this.midBoxID,0),this.cmd("SetALpha",this.midBoxLabel,0),this.cmd("SetALpha",this.highBoxID,0),this.cmd("SetALpha",this.highBoxLabel,0),this.cmd("SetALpha",this.midCircleID,0),this.cmd("SetALpha",this.lowCircleID,0),this.cmd("SetALpha",this.highCircleID,0),this.cmd("SetALpha",this.indexBoxID,0),this.cmd("SetALpha",this.indexBoxLabel,0),this.highlight1ID=this.nextIndex++,this.highlight2ID=this.nextIndex++,this.binaryCodeID=this.addCodeToCanvasBase(Search.BINARY_CODE,Search.CODE_START_X,Search.CODE_START_Y,Search.CODE_LINE_HEIGHT,Search.CODE_STANDARD_COLOR),this.linearCodeID=this.addCodeToCanvasBase(Search.LINEAR_CODE,Search.CODE_START_X,Search.CODE_START_Y,Search.CODE_LINE_HEIGHT,Search.CODE_STANDARD_COLOR),this.setCodeAlpha(this.binaryCodeID,0),this.setCodeAlpha(this.linearCodeID,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},Search.prototype.setup_small=function(){Search.HIGHLIGHT_CIRCLE_SIZE=Search.HIGHLIGHT_CIRCLE_SIZE_SMALL,Search.ARRAY_START_X=Search.ARRAY_START_X_SMALL,Search.ARRAY_START_Y=Search.ARRAY_START_Y_SMALL,Search.ARRAY_ELEM_WIDTH=Search.ARRAY_ELEM_WIDTH_SMALL,Search.ARRAY_ELEM_HEIGHT=Search.ARRAY_ELEM_HEIGHT_SMALL,Search.ARRAY_ELEMS_PER_LINE=Search.ARRAY_ELEMS_PER_LINE_SMALL,Search.ARRAY_LINE_SPACING=Search.ARRAY_LINE_SPACING_SMALL,SIZE=Search.SIZE_SMALL,this.size=Search.SMALL_SIZE,this.setup()},Search.prototype.setup_large=function(){Search.HIGHLIGHT_CIRCLE_SIZE=Search.HIGHLIGHT_CIRCLE_SIZE_LARGE,Search.ARRAY_START_X=Search.ARRAY_START_X_LARGE,Search.ARRAY_START_Y=Search.ARRAY_START_Y_LARGE,Search.ARRAY_ELEM_WIDTH=Search.ARRAY_ELEM_WIDTH_LARGE,Search.ARRAY_ELEM_HEIGHT=Search.ARRAY_ELEM_HEIGHT_LARGE,Search.ARRAY_ELEMS_PER_LINE=Search.ARRAY_ELEMS_PER_LINE_LARGE,Search.ARRAY_LINE_SPACING=Search.ARRAY_LINE_SPACING_LARGE,SIZE=Search.SIZE_LARGE,this.size=Search.LARGE_SIZE,this.setup()},Search.prototype.linearSearchCallback=function(t){var e=this.searchField.value;this.implementAction(this.linearSearch.bind(this),e)},Search.prototype.binarySearchCallback=function(t){var e=this.searchField.value;this.implementAction(this.binarySearch.bind(this),e)},Search.prototype.binarySearch=function(t){this.commands=new Array,this.setCodeAlpha(this.binaryCodeID,1),this.setCodeAlpha(this.linearCodeID,0),this.cmd("SetALpha",this.lowBoxID,1),this.cmd("SetALpha",this.lowBoxLabel,1),this.cmd("SetALpha",this.midBoxID,1),this.cmd("SetALpha",this.midBoxLabel,1),this.cmd("SetALpha",this.highBoxID,1),this.cmd("SetALpha",this.highBoxLabel,1),this.cmd("SetAlpha",this.lowCircleID,1),this.cmd("SetAlpha",this.midCircleID,1),this.cmd("SetAlpha",this.highCircleID,1),this.cmd("SetPosition",this.lowCircleID,Search.LOW_POS_X,Search.LOW_POS_Y),this.cmd("SetPosition",this.midCircleID,Search.MID_POS_X,Search.MID_POS_Y),this.cmd("SetPosition",this.highCircleID,Search.HIGH_POS_X,Search.HIGH_POS_Y),this.cmd("SetAlpha",this.indexBoxID,0),this.cmd("SetAlpha",this.indexBoxLabel,0),this.cmd("SetText",this.resultString,""),this.cmd("SetText",this.resultBoxID,""),this.cmd("SetText",this.movingLabelID,"");var e=0,i=SIZE-1;this.cmd("Move",this.lowCircleID,this.getIndexX(0),this.getIndexY(0)),this.cmd("SetText",this.searchForBoxID,t),this.cmd("SetForegroundColor",this.binaryCodeID[1][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.lowBoxID,1),this.cmd("SetText",this.lowBoxID,0),this.cmd("step"),this.cmd("SetForegroundColor",this.binaryCodeID[1][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.lowBoxID,0),this.cmd("SetForegroundColor",this.binaryCodeID[2][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.highBoxID,1),this.cmd("SetText",this.highBoxID,SIZE-1),this.cmd("Move",this.highCircleID,this.getIndexX(SIZE-1),this.getIndexY(SIZE-1)),this.cmd("step"),this.cmd("SetForegroundColor",this.binaryCodeID[2][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.highBoxID,0);for(var s=!0;s;)if(this.cmd("SetHighlight",this.highBoxID,1),this.cmd("SetHighlight",this.lowBoxID,1),this.cmd("SetForegroundColor",this.binaryCodeID[3][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("step"),this.cmd("SetHighlight",this.highBoxID,0),this.cmd("SetHighlight",this.lowBoxID,0),this.cmd("SetForegroundColor",this.binaryCodeID[3][1],Search.CODE_STANDARD_COLOR),e>i)s=!1;else{var h=Math.floor((i+e)/2);if(this.cmd("SetForegroundColor",this.binaryCodeID[4][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.highBoxID,1),this.cmd("SetHighlight",this.lowBoxID,1),this.cmd("SetHighlight",this.midBoxID,1),this.cmd("SetText",this.midBoxID,h),this.cmd("Move",this.midCircleID,this.getIndexX(h),this.getIndexY(h)),this.cmd("step"),this.cmd("SetForegroundColor",this.binaryCodeID[4][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.midBoxID,0),this.cmd("SetHighlight",this.highBoxID,0),this.cmd("SetHighlight",this.lowBoxID,0),this.cmd("SetHighlight",this.searchForBoxID,1),this.cmd("SetHighlight",this.arrayID[h],1),this.cmd("SetForegroundColor",this.binaryCodeID[5][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("step"),this.cmd("SetHighlight",this.searchForBoxID,0),this.cmd("SetHighlight",this.arrayID[h],0),this.cmd("SetForegroundColor",this.binaryCodeID[5][1],Search.CODE_STANDARD_COLOR),this.arrayData[h]==t)s=!1;else if(this.cmd("SetForegroundColor",this.binaryCodeID[7][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.searchForBoxID,1),this.cmd("SetHighlight",this.arrayID[h],1),this.cmd("step"),this.cmd("SetForegroundColor",this.binaryCodeID[7][1],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.searchForBoxID,0),this.cmd("SetHighlight",this.arrayID[h],0),this.arrayData[h]<t){this.cmd("SetForegroundColor",this.binaryCodeID[8][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.lowID,1),this.cmd("SetText",this.lowBoxID,h+1),this.cmd("Move",this.lowCircleID,this.getIndexX(h+1),this.getIndexY(h+1)),e=h+1;for(var r=0;r<e;r++)this.cmd("SetAlpha",this.arrayID[r],.2);this.cmd("Step"),this.cmd("SetForegroundColor",this.binaryCodeID[8][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.lowBoxID,0)}else{this.cmd("SetForegroundColor",this.binaryCodeID[10][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.highBoxID,1),i=h-1,this.cmd("SetText",this.highBoxID,i),this.cmd("Move",this.highCircleID,this.getIndexX(i),this.getIndexY(i));for(r=i+1;r<SIZE;r++)this.cmd("SetAlpha",this.arrayID[r],.2);this.cmd("Step"),this.cmd("SetForegroundColor",this.binaryCodeID[10][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.midBoxID,0)}}i<e?(this.cmd("SetText",this.resultString,"   Element Not found"),this.cmd("SetText",this.resultBoxID,-1),this.cmd("AlignRight",this.resultString,this.resultBoxID),this.cmd("SetForegroundColor",this.binaryCodeID[11][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.binaryCodeID[11][0],Search.CODE_STANDARD_COLOR)):(this.cmd("SetText",this.resultString,"   Element found"),this.cmd("SetText",this.movingLabelID,h),this.cmd("SetPosition",this.movingLabelID,this.getIndexX(h),this.getIndexY(h)),this.cmd("Move",this.movingLabelID,Search.RESULT_X,Search.RESULT_Y),this.cmd("AlignRight",this.resultString,this.resultBoxID),this.cmd("SetForegroundColor",this.binaryCodeID[6][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.binaryCodeID[6][0],Search.CODE_STANDARD_COLOR));for(r=0;r<SIZE;r++)this.cmd("SetAlpha",this.arrayID[r],1);return this.commands},Search.prototype.linearSearch=function(t){this.commands=new Array,this.setCodeAlpha(this.binaryCodeID,0),this.setCodeAlpha(this.linearCodeID,1),this.cmd("SetALpha",this.lowBoxID,0),this.cmd("SetALpha",this.lowBoxLabel,0),this.cmd("SetALpha",this.midBoxID,0),this.cmd("SetALpha",this.midBoxLabel,0),this.cmd("SetALpha",this.highBoxID,0),this.cmd("SetALpha",this.highBoxLabel,0),this.cmd("SetAlpha",this.lowCircleID,1),this.cmd("SetAlpha",this.midCircleID,0),this.cmd("SetAlpha",this.highCircleID,0),this.cmd("SetPosition",this.lowCircleID,Search.INDEX_X,Search.INDEX_Y),this.cmd("SetALpha",this.indexBoxID,1),this.cmd("SetALpha",this.indexBoxLabel,1),this.cmd("SetText",this.resultString,""),this.cmd("SetText",this.resultBoxID,""),this.cmd("SetText",this.movingLabelID,"");var e=!0;this.cmd("SetText",this.searchForBoxID,t),this.cmd("SetForegroundColor",this.linearCodeID[1][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.indexBoxID,1),this.cmd("SetText",this.indexBoxID,"0"),this.cmd("Move",this.lowCircleID,this.getIndexX(0),this.getIndexY(0)),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[1][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.indexBoxID,0);for(var i=0;e;)i==SIZE?(this.cmd("SetForegroundColor",this.linearCodeID[2][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[2][1],Search.CODE_STANDARD_COLOR),e=!1):(this.cmd("SetHighlight",this.arrayID[i],1),this.cmd("SetHighlight",this.searchForBoxID,1),this.cmd("SetForegroundColor",this.linearCodeID[2][3],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[2][3],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.arrayID[i],0),this.cmd("SetHighlight",this.searchForBoxID,0),(e=this.arrayData[i]<t)&&(i++,this.cmd("SetForegroundColor",this.linearCodeID[3][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.indexBoxID,1),this.cmd("SetText",this.indexBoxID,i),this.cmd("Move",this.lowCircleID,this.getIndexX(i),this.getIndexY(i)),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[3][0],Search.CODE_STANDARD_COLOR),this.cmd("SetHighlight",this.indexBoxID,0)));return i==SIZE?(this.cmd("SetForegroundColor",this.linearCodeID[4][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[4][1],Search.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[5][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[5][0],Search.CODE_STANDARD_COLOR)):this.arrayData[i]==t?(this.cmd("SetForegroundColor",this.linearCodeID[4][1],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[4][2],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[4][3],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetHighlight",this.arrayID[i],1),this.cmd("SetHighlight",this.searchForBoxID,1),this.cmd("Step"),this.cmd("SetHighlight",this.arrayID[i],0),this.cmd("SetHighlight",this.searchForBoxID,0),this.cmd("SetForegroundColor",this.linearCodeID[4][1],Search.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[4][2],Search.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[4][3],Search.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[6][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",this.resultString,"   Element found"),this.cmd("SetText",this.movingLabelID,i),this.cmd("SetPosition",this.movingLabelID,this.getIndexX(i),this.getIndexY(i)),this.cmd("Move",this.movingLabelID,Search.RESULT_X,Search.RESULT_Y),this.cmd("AlignRight",this.resultString,this.resultBoxID),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[6][0],Search.CODE_STANDARD_COLOR)):(this.cmd("SetHighlight",this.arrayID[i],1),this.cmd("SetHighlight",this.searchForBoxID,1),this.cmd("SetForegroundColor",this.linearCodeID[4][3],Search.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetHighlight",this.arrayID[i],0),this.cmd("SetHighlight",this.searchForBoxID,0),this.cmd("SetForegroundColor",this.linearCodeID[4][3],Search.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.linearCodeID[5][0],Search.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",this.resultString,"   Element Not found"),this.cmd("SetText",this.resultBoxID,-1),this.cmd("AlignRight",this.resultString,this.resultBoxID),this.cmd("Step"),this.cmd("SetForegroundColor",this.linearCodeID[5][0],Search.CODE_STANDARD_COLOR)),this.commands},AVL.inheritFrom(Algorithm),AVL.HIGHLIGHT_LABEL_COLOR="#FF0000",AVL.HIGHLIGHT_LINK_COLOR="#FF0000",AVL.HIGHLIGHT_COLOR="#007700",AVL.HEIGHT_LABEL_COLOR="#007700",AVL.LINK_COLOR="#007700",AVL.HIGHLIGHT_CIRCLE_COLOR="#007700",AVL.FOREGROUND_COLOR="0x007700",AVL.BACKGROUND_COLOR="#DDFFDD",AVL.PRINT_COLOR=AVL.FOREGROUND_COLOR,AVL.WIDTH_DELTA=50,AVL.HEIGHT_DELTA=50,AVL.STARTING_Y=50,AVL.FIRST_PRINT_POS_X=50,AVL.PRINT_VERTICAL_GAP=20,AVL.PRINT_HORIZONTAL_GAP=50,AVL.EXPLANITORY_TEXT_X=10,AVL.EXPLANITORY_TEXT_Y=10,AVL.prototype.init=function(t,e,i){var s=AVL.superclass.init;this.first_print_pos_y=i-2*AVL.PRINT_VERTICAL_GAP,this.print_max=e-10,s.call(this,t,e,i),this.startingX=e/2,this.addControls(),this.nextIndex=1,this.commands=[],this.cmd("CreateLabel",0,"",AVL.EXPLANITORY_TEXT_X,AVL.EXPLANITORY_TEXT_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},AVL.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},AVL.prototype.reset=function(){this.nextIndex=1,this.treeRoot=null},AVL.prototype.insertCallback=function(t){var e=this.insertField.value;""!=(e=this.normalizeNumber(e,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},AVL.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(e,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},AVL.prototype.findCallback=function(t){var e=this.findField.value;""!=e&&(e=this.normalizeNumber(e,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e))},AVL.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},AVL.prototype.sizeChanged=function(t,e){this.startingX=t/2},AVL.prototype.printTree=function(t){if(this.commands=[],null!=this.treeRoot){this.highlightID=this.nextIndex++;var e=this.nextIndex;this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,this.treeRoot.x,this.treeRoot.y),this.xPosOfNextLabel=AVL.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.treeRoot),this.cmd("Delete",this.highlightID),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},AVL.prototype.printTreeRec=function(t){this.cmd("Step"),null!=t.left&&(this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.printTreeRec(t.left),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"));var e=this.nextIndex++;this.cmd("CreateLabel",e,t.data,t.x,t.y),this.cmd("SetForegroundColor",e,AVL.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=AVL.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=AVL.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=AVL.PRINT_VERTICAL_GAP),null!=t.right&&(this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.printTreeRec(t.right),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"))},AVL.prototype.findElement=function(t){return this.commands=[],this.highlightID=this.nextIndex++,this.doFind(this.treeRoot,t),this.commands},AVL.prototype.doFind=function(t,e){this.cmd("SetText",0,"Searchiing for "+e),null!=t?(this.cmd("SetHighlight",t.graphicID,1),t.data==e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" = "+e+" (Element found!)"),this.cmd("Step"),this.cmd("SetText",0,"Found:"+e),this.cmd("SetHighlight",t.graphicID,0)):t.data>e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" < "+t.data+" (look to left subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.left,e)):(this.cmd("SetText",0," Searching for "+e+" : "+e+" > "+t.data+" (look to right subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.right,e))):(this.cmd("SetText",0," Searching for "+e+" : < Empty Tree > (Element not found)"),this.cmd("Step"),this.cmd("SetText",0," Searching for "+e+" :  (Element not found)"))},AVL.prototype.insertElement=function(t){if(this.commands=[],this.cmd("SetText",0," Inserting "+t),null==this.treeRoot){var e=this.nextIndex++,i=this.nextIndex++;this.cmd("CreateCircle",e,t,this.startingX,AVL.STARTING_Y),this.cmd("SetForegroundColor",e,AVL.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",e,AVL.BACKGROUND_COLOR),this.cmd("CreateLabel",i,1,this.startingX-20,AVL.STARTING_Y-20),this.cmd("SetForegroundColor",i,AVL.HEIGHT_LABEL_COLOR),this.cmd("Step"),this.treeRoot=new AVLNode(t,e,i,this.startingX,AVL.STARTING_Y),this.treeRoot.height=1}else{e=this.nextIndex++,i=this.nextIndex++,this.highlightID=this.nextIndex++,this.cmd("CreateCircle",e,t,30,AVL.STARTING_Y),this.cmd("SetForegroundColor",e,AVL.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",e,AVL.BACKGROUND_COLOR),this.cmd("CreateLabel",i,"",80,80),this.cmd("SetForegroundColor",i,AVL.HEIGHT_LABEL_COLOR),this.cmd("Step");var s=new AVLNode(t,e,i,100,100);this.cmd("SetHighlight",s.graphicID,1),s.height=1,this.insert(s,this.treeRoot)}return this.cmd("SetText",0," "),this.commands},AVL.prototype.singleRotateRight=function(t){var e=t,i=(e.right,t.left),s=(i.left,i.right);this.cmd("SetText",0,"Single Rotate Right"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,AVL.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,AVL.LINK_COLOR),i.parent=e.parent,this.treeRoot==e?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,AVL.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,AVL.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.right=e,e.parent=i,e.left=s,this.resetHeight(e),this.resetHeight(i),this.resizeTree()},AVL.prototype.singleRotateLeft=function(t){var e=t,i=t.right,s=(e.left,i.left);i.right;this.cmd("SetText",0,"Single Rotate Left"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,AVL.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,AVL.LINK_COLOR),i.parent=e.parent,this.treeRoot==e?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,AVL.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,AVL.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.left=e,e.parent=i,e.right=s,this.resetHeight(e),this.resetHeight(i),this.resizeTree()},AVL.prototype.getHeight=function(t){return null==t?0:t.height},AVL.prototype.resetHeight=function(t){if(null!=t){var e=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1;t.height!=e&&(t.height=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1,this.cmd("SetText",t.heightLabelID,e))}},AVL.prototype.doubleRotateRight=function(t){this.cmd("SetText",0,"Double Rotate Right");var e=t.left,i=t.left.right,s=t,h=(e.left,i.left),r=i.right;s.right;this.cmd("Disconnect",s.graphicID,e.graphicID),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",s.graphicID,e.graphicID,AVL.HIGHLIGHT_LINK_COLOR),this.cmd("Connect",e.graphicID,i.graphicID,AVL.HIGHLIGHT_LINK_COLOR),this.cmd("Step"),null!=h&&(this.cmd("Disconnect",i.graphicID,h.graphicID),h.parent=e,e.right=h,this.cmd("Connect",e.graphicID,h.graphicID,AVL.LINK_COLOR)),null!=r&&(this.cmd("Disconnect",i.graphicID,r.graphicID),r.parent=s,s.left=h,this.cmd("Connect",s.graphicID,r.graphicID,AVL.LINK_COLOR)),null==s.parent?(i.parent=null,this.treeRoot=i):(this.cmd("Disconnect",s.parent.graphicID,s.graphicID),this.cmd("Connect",s.parent.graphicID,i.graphicID,AVL.LINK_COLOR),s.isLeftChild()?s.parent.left=i:s.parent.right=i,i.parent=s.parent,s.parent=i),this.cmd("Disconnect",s.graphicID,e.graphicID),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,AVL.LINK_COLOR),this.cmd("Connect",i.graphicID,s.graphicID,AVL.LINK_COLOR),i.left=e,e.parent=i,i.right=s,s.parent=i,e.right=h,s.left=r,this.resetHeight(e),this.resetHeight(s),this.resetHeight(i),this.resizeTree()},AVL.prototype.doubleRotateLeft=function(t){this.cmd("SetText",0,"Double Rotate Left");var e=t,i=t.right.left,s=t.right,h=(e.left,i.left),r=i.right;s.right;this.cmd("Disconnect",e.graphicID,s.graphicID),this.cmd("Disconnect",s.graphicID,i.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,AVL.HIGHLIGHT_LINK_COLOR),this.cmd("Connect",s.graphicID,i.graphicID,AVL.HIGHLIGHT_LINK_COLOR),this.cmd("Step"),null!=h&&(this.cmd("Disconnect",i.graphicID,h.graphicID),h.parent=e,e.right=h,this.cmd("Connect",e.graphicID,h.graphicID,AVL.LINK_COLOR)),null!=r&&(this.cmd("Disconnect",i.graphicID,r.graphicID),r.parent=s,s.left=h,this.cmd("Connect",s.graphicID,r.graphicID,AVL.LINK_COLOR)),null==e.parent?(i.parent=null,this.treeRoot=i):(this.cmd("Disconnect",e.parent.graphicID,e.graphicID),this.cmd("Connect",e.parent.graphicID,i.graphicID,AVL.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i,i.parent=e.parent,e.parent=i),this.cmd("Disconnect",e.graphicID,s.graphicID),this.cmd("Disconnect",s.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,AVL.LINK_COLOR),this.cmd("Connect",i.graphicID,s.graphicID,AVL.LINK_COLOR),i.left=e,e.parent=i,i.right=s,s.parent=i,e.right=h,s.left=r,this.resetHeight(e),this.resetHeight(s),this.resetHeight(i),this.resizeTree()},AVL.prototype.insert=function(t,e){this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",t.graphicID,1),t.data<e.data?this.cmd("SetText",0,t.data+" < "+e.data+".  Looking at left subtree"):this.cmd("SetText",0,t.data+" >= "+e.data+".  Looking at right subtree"),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),t.data<e.data?null==e.left?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetText",t.heightLabelID,1),this.cmd("SetHighlight",t.graphicID,0),e.left=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,AVL.LINK_COLOR),this.resizeTree(),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.left.x,e.left.y),this.cmd("Move",this.highlightID,e.x,e.y),this.cmd("SetText",0,"Unwinding Recursion"),this.cmd("Step"),this.cmd("Delete",this.highlightID),e.height<e.left.height+1&&(e.height=e.left.height+1,this.cmd("SetText",e.heightLabelID,e.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HEIGHT_LABEL_COLOR))):(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.left.x,e.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.left),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.left.x,e.left.y),this.cmd("Move",this.highlightID,e.x,e.y),this.cmd("SetText",0,"Unwinding Recursion"),this.cmd("Step"),this.cmd("Delete",this.highlightID),e.height<e.left.height+1&&(e.height=e.left.height+1,this.cmd("SetText",e.heightLabelID,e.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HEIGHT_LABEL_COLOR)),(null!=e.right&&e.left.height>e.right.height+1||null==e.right&&e.left.height>1)&&(t.data<e.left.data?this.singleRotateRight(e):this.doubleRotateRight(e))):null==e.right?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetText",t.heightLabelID,1),this.cmd("SetHighlight",t.graphicID,0),e.right=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,AVL.LINK_COLOR),t.x=e.x+AVL.WIDTH_DELTA/2,t.y=e.y+AVL.HEIGHT_DELTA,this.cmd("Move",t.graphicID,t.x,t.y),this.resizeTree(),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.right.x,e.right.y),this.cmd("Move",this.highlightID,e.x,e.y),this.cmd("SetText",0,"Unwinding Recursion"),this.cmd("Step"),this.cmd("Delete",this.highlightID),e.height<e.right.height+1&&(e.height=e.right.height+1,this.cmd("SetText",e.heightLabelID,e.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HEIGHT_LABEL_COLOR))):(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.right.x,e.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.right),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,e.right.x,e.right.y),this.cmd("Move",this.highlightID,e.x,e.y),this.cmd("SetText",0,"Unwinding Recursion"),this.cmd("Step"),this.cmd("Delete",this.highlightID),e.height<e.right.height+1&&(e.height=e.right.height+1,this.cmd("SetText",e.heightLabelID,e.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",e.heightLabelID,AVL.HEIGHT_LABEL_COLOR)),(null!=e.left&&e.right.height>e.left.height+1||null==e.left&&e.right.height>1)&&(t.data>=e.right.data?this.singleRotateLeft(e):this.doubleRotateLeft(e)))},AVL.prototype.deleteElement=function(t){return this.commands=[],this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0," "),this.highlightID=this.nextIndex++,this.treeDelete(this.treeRoot,t),this.cmd("SetText",0," "),this.commands},AVL.prototype.treeDelete=function(t,e){var i=!1;if(null!=t)if(null!=t.parent&&(i=t.parent.left==t),this.cmd("SetHighlight",t.graphicID,1),e<t.data?this.cmd("SetText",0,e+" < "+t.data+".  Looking at left subtree"):e>t.data?this.cmd("SetText",0,e+" > "+t.data+".  Looking at right subtree"):this.cmd("SetText",0,e+" == "+t.data+".  Found node to delete"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),e==t.data)if(null==t.left&&null==t.right)this.cmd("SetText",0,"Node to delete is a leaf.  Delete it."),this.cmd("Delete",t.graphicID),this.cmd("Delete",t.heightLabelID),i&&null!=t.parent?t.parent.left=null:null!=t.parent?t.parent.right=null:this.treeRoot=null,this.resizeTree(),this.cmd("Step");else if(null==t.left)this.cmd("SetText",0,"Node to delete has no left child.  \nSet parent of deleted node to right child of deleted node."),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.right.graphicID,AVL.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),this.cmd("Delete",t.heightLabelID),i?t.parent.left=t.right:t.parent.right=t.right,t.right.parent=t.parent):(this.cmd("Delete",t.graphicID),this.cmd("Delete",t.heightLabelID),this.treeRoot=t.right,this.treeRoot.parent=null),this.resizeTree();else if(null==t.right)this.cmd("SetText",0,"Node to delete has no right child.  \nSet parent of deleted node to left child of deleted node."),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.left.graphicID,AVL.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),this.cmd("Delete",t.heightLabelID),i?t.parent.left=t.left:t.parent.right=t.left,t.left.parent=t.parent):(this.cmd("Delete",t.graphicID),this.cmd("Delete",t.heightLabelID),this.treeRoot=t.left,this.treeRoot.parent=null),this.resizeTree();else{this.cmd("SetText",0,"Node to delete has two childern.  \nFind largest node in left subtree."),this.highlightID=this.nextIndex,this.nextIndex+=1,this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.x,t.y);var s=t;for(s=t.left,this.cmd("Move",this.highlightID,s.x,s.y),this.cmd("Step");null!=s.right;)s=s.right,this.cmd("Move",this.highlightID,s.x,s.y),this.cmd("Step");this.cmd("SetText",t.graphicID," ");var h=this.nextIndex;for(this.nextIndex+=1,this.cmd("CreateLabel",h,s.data,s.x,s.y),this.cmd("SetForegroundColor",h,AVL.HEIGHT_LABEL_COLOR),t.data=s.data,this.cmd("Move",h,t.x,t.y),this.cmd("SetText",0,"Copy largest value of left subtree into node to delete."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Delete",h),this.cmd("SetText",t.graphicID,t.data),this.cmd("Delete",this.highlightID),this.cmd("SetText",0,"Remove node whose value we copied."),null==s.left?(s.parent!=t?s.parent.right=null:t.left=null,this.cmd("Delete",s.graphicID),this.cmd("Delete",s.heightLabelID),this.resizeTree()):(this.cmd("Disconnect",s.parent.graphicID,s.graphicID),this.cmd("Connect",s.parent.graphicID,s.left.graphicID,AVL.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",s.graphicID),this.cmd("Delete",s.heightLabelID),s.parent!=t?(s.parent.right=s.left,s.left.parent=s.parent):(t.left=s.left,s.left.parent=t),this.resizeTree()),s=s.parent,this.getHeight(s)!=Math.max(this.getHeight(s.left),this.getHeight(s.right))+1&&(s.height=Math.max(this.getHeight(s.left),this.getHeight(s.right))+1,this.cmd("SetText",s.heightLabelID,s.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",s.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",s.heightLabelID,AVL.HEIGHT_LABEL_COLOR));s!=t;){var r=s.parent;this.getHeight(s.left)-this.getHeight(s.right)>1&&(this.getHeight(s.left.right)>this.getHeight(s.left.left)?this.doubleRotateRight(s):this.singleRotateRight(s)),null!=r.right&&(r==t?this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,r.left.x,r.left.y):this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,r.right.x,r.right.y),this.cmd("Move",this.highlightID,r.x,r.y),this.cmd("SetText",0,"Backing up ..."),this.getHeight(r)!=Math.max(this.getHeight(r.left),this.getHeight(r.right))+1&&(r.height=Math.max(this.getHeight(r.left),this.getHeight(r.right))+1,this.cmd("SetText",r.heightLabelID,t.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",r.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",r.heightLabelID,AVL.HEIGHT_LABEL_COLOR)),this.cmd("Step"),this.cmd("Delete",this.highlightID)),s=r}this.getHeight(t.right)-this.getHeight(t.left)>1&&(this.getHeight(t.right.left)>this.getHeight(t.right.right)?this.doubleRotateLeft(t):this.singleRotateLeft(t))}else e<t.data?(null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.left,e),null!=t.left&&(this.cmd("SetText",0,"Unwinding recursion."),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.left.x,t.left.y),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.getHeight(t.right)-this.getHeight(t.left)>1&&(this.getHeight(t.right.left)>this.getHeight(t.right.right)?this.doubleRotateLeft(t):this.singleRotateLeft(t)),this.getHeight(t)!=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1&&(t.height=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1,this.cmd("SetText",t.heightLabelID,t.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",t.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",t.heightLabelID,AVL.HEIGHT_LABEL_COLOR))):(null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.right,e),null!=t.right&&(this.cmd("SetText",0,"Unwinding recursion."),this.cmd("CreateHighlightCircle",this.highlightID,AVL.HIGHLIGHT_COLOR,t.right.x,t.right.y),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.getHeight(t.left)-this.getHeight(t.right)>1&&(this.getHeight(t.left.right)>this.getHeight(t.left.left)?this.doubleRotateRight(t):this.singleRotateRight(t)),this.getHeight(t)!=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1&&(t.height=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1,this.cmd("SetText",t.heightLabelID,t.height),this.cmd("SetText",0,"Adjusting height after recursive call"),this.cmd("SetForegroundColor",t.heightLabelID,AVL.HIGHLIGHT_LABEL_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",t.heightLabelID,AVL.HEIGHT_LABEL_COLOR)));else this.cmd("SetText",0,"Elemet "+e+" not found, could not delete")},AVL.prototype.resizeTree=function(){var t=this.startingX;this.resizeWidths(this.treeRoot),null!=this.treeRoot&&(this.treeRoot.leftWidth>t?t=this.treeRoot.leftWidth:this.treeRoot.rightWidth>t&&(t=Math.max(this.treeRoot.leftWidth,2*t-this.treeRoot.rightWidth)),this.setNewPositions(this.treeRoot,t,AVL.STARTING_Y,0),this.animateNewPositions(this.treeRoot),this.cmd("Step"))},AVL.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?(e-=t.rightWidth,t.heightLabelX=e-20):1==s?(e+=t.leftWidth,t.heightLabelX=e+20):t.heightLabelX=e-20,t.x=e,t.heightLabelY=t.y-20,this.setNewPositions(t.left,e,i+AVL.HEIGHT_DELTA,-1),this.setNewPositions(t.right,e,i+AVL.HEIGHT_DELTA,1))},AVL.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.cmd("Move",t.heightLabelID,t.heightLabelX,t.heightLabelY),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},AVL.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),AVL.WIDTH_DELTA/2),t.rightWidth=Math.max(this.resizeWidths(t.right),AVL.WIDTH_DELTA/2),t.leftWidth+t.rightWidth)},AVL.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},AVL.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},AVLNode.prototype.isLeftChild=function(){return null==this.parent||this.parent.left==this},BPlusTree.FIRST_PRINT_POS_X=50,BPlusTree.PRINT_VERTICAL_GAP=20,BPlusTree.PRINT_MAX=990,BPlusTree.PRINT_HORIZONTAL_GAP=50,BPlusTree.MIN_MAX_DEGREE=3,BPlusTree.MAX_MAX_DEGREE=7,BPlusTree.HEIGHT_DELTA=50,BPlusTree.NODE_SPACING=15,BPlusTree.STARTING_Y=30,BPlusTree.WIDTH_PER_ELEM=40,BPlusTree.NODE_HEIGHT=20,BPlusTree.MESSAGE_X=5,BPlusTree.MESSAGE_Y=10,BPlusTree.LINK_COLOR="#007700",BPlusTree.HIGHLIGHT_CIRCLE_COLOR="#007700",BPlusTree.FOREGROUND_COLOR="#007700",BPlusTree.BACKGROUND_COLOR="#EEFFEE",BPlusTree.PRINT_COLOR=BPlusTree.FOREGROUND_COLOR,BPlusTree.inheritFrom(Algorithm),BPlusTree.prototype.init=function(t,e,i){BPlusTree.superclass.init.call(this,t,e,i),this.nextIndex=0,this.preemptiveSplit=!1,this.starting_x=e/2,this.addControls(),this.max_keys=2,this.min_keys=1,this.split_index=1,this.max_degree=3,this.messageID=this.nextIndex++,this.cmd("CreateLabel",this.messageID,"",BPlusTree.MESSAGE_X,BPlusTree.MESSAGE_Y,0),this.moveLabel1ID=this.nextIndex++,this.moveLabel2ID=this.nextIndex++,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.commands=new Array,this.first_print_pos_y=i-3*BPlusTree.PRINT_VERTICAL_GAP,this.xPosOfNextLabel=100,this.yPosOfNextLabel=200},BPlusTree.prototype.addControls=function(){var t;for(this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.controls.push(this.deleteField),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.controls.push(this.deleteButton),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.controls.push(this.findField),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.controls.push(this.findButton),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this),this.controls.push(this.printButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton),radioButtonNames=[],t=BPlusTree.MIN_MAX_DEGREE;t<=BPlusTree.MAX_MAX_DEGREE;t++)radioButtonNames.push("Max. Degree = "+String(t));for(this.maxDegreeRadioButtons=this.addRadioButtonGroupToAlgorithmBar(radioButtonNames,"MaxDegree"),this.maxDegreeRadioButtons[0].checked=!0,t=0;t<this.maxDegreeRadioButtons.length;t++)this.maxDegreeRadioButtons[t].onclick=this.maxDegreeChangedHandler.bind(this,t+BPlusTree.MIN_MAX_DEGREE)},BPlusTree.prototype.reset=function(){this.nextIndex=3,this.max_degree=3,this.max_keys=2,this.min_keys=1,this.split_index=1,this.treeRoot=null,this.ignoreInputs=!0,this.ignoreInputs=!1},BPlusTree.prototype.enableUI=function(t){var e;for(e=0;e<this.controls.length;e++)this.controls[e].disabled=!1;for(e=0;e<this.maxDegreeRadioButtons.length;e++)this.maxDegreeRadioButtons[e].disabled=!1},BPlusTree.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0;for(e=0;e<this.maxDegreeRadioButtons.length;e++)this.maxDegreeRadioButtons[e].disabled=!0},BPlusTree.prototype.maxDegreeChangedHandler=function(t,e){this.max_degree!=t&&this.implementAction(this.changeDegree.bind(this),t)},BPlusTree.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},BPlusTree.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(this.deleteField.value,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},BPlusTree.prototype.clearCallback=function(t){this.implementAction(this.clearTree.bind(this),"")},BPlusTree.prototype.premtiveSplitCallback=function(t){},BPlusTree.prototype.changePreemtiveSplit=function(t){},BPlusTree.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},BPlusTree.prototype.printTree=function(t){this.commands=new Array,this.cmd("SetText",this.messageID,"Printing tree");var e=this.nextIndex;if(null!=this.treeRoot){this.xPosOfNextLabel=BPlusTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y;var i=this.treeRoot;for(this.cmd("SetHighlight",i.graphicID,1),this.cmd("Step");!i.isLeaf;)this.cmd("SetEdgeHighlight",i.graphicID,i.children[0].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",i.graphicID,0),this.cmd("SetHighlight",i.children[0].graphicID,1),this.cmd("SetEdgeHighlight",i.graphicID,i.children[0].graphicID,0),this.cmd("Step"),i=i.children[0];for(;null!=i;){for(this.cmd("SetHighlight",i.graphicID,1),h=0;h<i.numKeys;h++){var s=this.nextIndex++;this.cmd("CreateLabel",s,i.keys[h],this.getLabelX(i,h),i.y),this.cmd("SetForegroundColor",s,BPlusTree.PRINT_COLOR),this.cmd("Move",s,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=BPlusTree.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>BPlusTree.PRINT_MAX&&(this.xPosOfNextLabel=BPlusTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=BPlusTree.PRINT_VERTICAL_GAP)}null!=i.next&&(this.cmd("SetEdgeHighlight",i.graphicID,i.next.graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",i.graphicID,i.next.graphicID,0)),this.cmd("SetHighlight",i.graphicID,0),i=i.next}this.cmd("Step");for(var h=e;h<this.nextIndex;h++)this.cmd("Delete",h);this.nextIndex=e}return this.cmd("SetText",this.messageID,""),this.commands},BPlusTree.prototype.clearTree=function(t){return this.commands=new Array,this.deleteTree(this.treeRoot),this.treeRoot=null,this.nextIndex=3,this.commands},BPlusTree.prototype.deleteTree=function(t){if(null!=t){if(!t.isLeaf)for(var e=0;e<=t.numKeys;e++)this.cmd("Disconnect",t.graphicID,t.children[e].graphicID),this.deleteTree(t.children[e]),t.children[e];this.cmd("Delete",t.graphicID)}},BPlusTree.prototype.changeDegree=function(t){this.commands=new Array,this.deleteTree(this.treeRoot),this.treeRoot=null,this.nextIndex=3;var e=t;return this.ignoreInputs=!0,this.maxDegreeRadioButtons[e-BPlusTree.MIN_MAX_DEGREE].checked=!0,this.ignoreInputs=!1,this.max_degree=e,this.max_keys=e-1,this.min_keys=Math.floor((e+1)/2)-1,this.split_index=Math.floor(e/2),0==this.commands.length&&this.cmd("Step"),e%2!=0&&this.preemptiveSplit&&(this.preemptiveSplit=!1,this.premptiveSplitBox.checked=!1),this.commands},BPlusTree.prototype.findCallback=function(t){var e;e=this.normalizeNumber(this.findField.value,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},BPlusTree.prototype.findElement=function(t){return this.commands=new Array,this.cmd("SetText",this.messageID,"Finding "+t),this.findInTree(this.treeRoot,t),this.commands},BPlusTree.prototype.findInTree=function(t,e){if(null!=t){var i;for(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),i=0;i<t.numKeys&&t.keys[i]<e;i++);i==t.numKeys?t.isLeaf?(this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,0),this.findInTree(t.children[t.numKeys],e)):t.keys[i]>e?t.isLeaf?(this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0),this.findInTree(t.children[i],e)):t.isLeaf?(this.cmd("SetTextColor",t.graphicID,"#FF0000",i),this.cmd("SetText",this.messageID,"Element "+e+" found"),this.cmd("Step"),this.cmd("SetTextColor",t.graphicID,BPlusTree.FOREGROUND_COLOR,i),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Step")):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,0),this.findInTree(t.children[i+1],e))}else this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")},BPlusTree.prototype.insertElement=function(t){return this.commands=new Array,this.cmd("SetText",this.messageID,"Inserting "+t),this.cmd("Step"),null==this.treeRoot?(this.treeRoot=new BTreeNode(this.nextIndex++,this.starting_x,BPlusTree.STARTING_Y),this.cmd("CreateBTreeNode",this.treeRoot.graphicID,BPlusTree.WIDTH_PER_ELEM,BPlusTree.NODE_HEIGHT,1,this.starting_x,BPlusTree.STARTING_Y,BPlusTree.BACKGROUND_COLOR,BPlusTree.FOREGROUND_COLOR),this.treeRoot.keys[0]=t,this.cmd("SetText",this.treeRoot.graphicID,t,0)):(this.insert(this.treeRoot,t),this.treeRoot.isLeaf||this.resizeTree()),this.cmd("SetText",this.messageID,""),this.commands},BPlusTree.prototype.insert=function(t,e){if(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),t.isLeaf){this.cmd("SetText",this.messageID,"Inserting "+e+".  Inserting into a leaf"),t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys);for(var i=t.numKeys-1;i>0&&t.keys[i-1]>e;)t.keys[i]=t.keys[i-1],this.cmd("SetText",t.graphicID,t.keys[i],i),i--;t.keys[i]=e,this.cmd("SetText",t.graphicID,t.keys[i],i),this.cmd("SetHighlight",t.graphicID,0),null!=t.next&&(this.cmd("Disconnect",t.graphicID,t.next.graphicID),this.cmd("Connect",t.graphicID,t.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",t.numKeys)),this.resizeTree(),this.insertRepair(t)}else{for(var s=0;s<t.numKeys&&t.keys[s]<e;)s++;this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,0),this.cmd("SetHighlight",t.graphicID,0),this.insert(t.children[s],e)}},BPlusTree.prototype.insertRepair=function(t){if(!(t.numKeys<=this.max_keys))if(null!=t.parent){var e=this.split(t);this.insertRepair(e)}else this.treeRoot=this.split(t)},BPlusTree.prototype.split=function(t){this.cmd("SetText",this.messageID,"Node now contains too many keys.  Splitting ..."),this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);var e,i,s=new BTreeNode(this.nextIndex++,t.x+100,t.y),h=t.keys[this.split_index];if(null!=t.parent){var r=t.parent;for(e=0;e<r.numKeys+1&&r.children[e]!=t;e++);if(e==r.numKeys+1)throw new Error("Couldn't find which child we were!");for(this.cmd("SetNumElements",r.graphicID,r.numKeys+1),n=r.numKeys;n>e;n--)r.children[n+1]=r.children[n],this.cmd("Disconnect",r.graphicID,r.children[n].graphicID),this.cmd("Connect",r.graphicID,r.children[n].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",n+1),r.keys[n]=r.keys[n-1],this.cmd("SetText",r.graphicID,r.keys[n],n);r.numKeys++,r.keys[e]=h,this.cmd("SetText",r.graphicID,"",e),this.cmd("CreateLabel",this.moveLabel1ID,h,this.getLabelX(t,this.split_index),t.y),this.cmd("Move",this.moveLabel1ID,this.getLabelX(r,e),r.y),r.children[e+1]=s,s.parent=r}t.isLeaf?(i=this.split_index,s.next=t.next,t.next=s):i=this.split_index+1,s.numKeys=t.numKeys-i,this.cmd("CreateBTreeNode",s.graphicID,BPlusTree.WIDTH_PER_ELEM,BPlusTree.NODE_HEIGHT,t.numKeys-i,t.x,t.y,BPlusTree.BACKGROUND_COLOR,BPlusTree.FOREGROUND_COLOR),t.isLeaf&&(null!=s.next&&(this.cmd("Disconnect",t.graphicID,s.next.graphicID),this.cmd("Connect",s.graphicID,s.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",s.numKeys)),this.cmd("Connect",t.graphicID,s.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",this.split_index));for(var n=i;n<t.numKeys+1;n++)s.children[n-i]=t.children[n],null!=t.children[n]&&(s.isLeaf=!1,this.cmd("Disconnect",t.graphicID,t.children[n].graphicID),this.cmd("Connect",s.graphicID,s.children[n-i].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",n-i),null!=t.children[n]&&(t.children[n].parent=s),t.children[n]=null);for(n=i;n<t.numKeys;n++)s.keys[n-i]=t.keys[n],this.cmd("SetText",s.graphicID,s.keys[n-i],n-i);var a=t;for(a.numKeys=this.split_index,n=this.split_index;n<t.numKeys;n++)this.cmd("SetText",t.graphicID,"",n);return this.cmd("SetNumElements",t.graphicID,this.split_index),null!=t.parent?(this.cmd("Connect",r.graphicID,s.graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",e+1),this.resizeTree(),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",r.graphicID,h,e),t.parent):(this.treeRoot=new BTreeNode(this.nextIndex++,this.starting_x,BPlusTree.STARTING_Y),this.cmd("CreateBTreeNode",this.treeRoot.graphicID,BPlusTree.WIDTH_PER_ELEM,BPlusTree.NODE_HEIGHT,1,this.starting_x,BPlusTree.STARTING_Y,BPlusTree.BACKGROUND_COLOR,BPlusTree.FOREGROUND_COLOR),this.treeRoot.keys[0]=h,this.cmd("SetText",this.treeRoot.graphicID,h,0),this.treeRoot.children[0]=a,this.treeRoot.children[1]=s,a.parent=this.treeRoot,s.parent=this.treeRoot,this.cmd("Connect",this.treeRoot.graphicID,a.graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",0),this.cmd("Connect",this.treeRoot.graphicID,s.graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",1),this.treeRoot.isLeaf=!1,this.treeRoot)},BPlusTree.prototype.deleteElement=function(t){return this.commands=new Array,this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0,""),this.cmd("SetText",0,""),this.doDelete(this.treeRoot,t),0==this.treeRoot.numKeys&&(this.cmd("Delete",this.treeRoot.graphicID),this.treeRoot=this.treeRoot.children[0],this.treeRoot.parent=null,this.resizeTree()),this.commands},BPlusTree.prototype.doDelete=function(t,e){if(null!=t){var i;for(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),i=0;i<t.numKeys&&t.keys[i]<e;i++);if(i==t.numKeys)t.isLeaf?this.cmd("SetHighlight",t.graphicID,0):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,0),this.doDelete(t.children[t.numKeys],e));else if(t.isLeaf||t.keys[i]!=e)if(t.isLeaf)if(t.isLeaf&&t.keys[i]==e){this.cmd("SetTextColor",t.graphicID,16711680,i),this.cmd("Step"),this.cmd("SetTextColor",t.graphicID,BPlusTree.FOREGROUND_COLOR,i);for(var s=i;s<t.numKeys-1;s++)t.keys[s]=t.keys[s+1],this.cmd("SetText",t.graphicID,t.keys[s],s);if(t.numKeys--,this.cmd("SetText",t.graphicID,"",t.numKeys),this.cmd("SetNumElements",t.graphicID,t.numKeys),this.cmd("SetHighlight",t.graphicID,0),null!=t.next&&(this.cmd("Disconnect",t.graphicID,t.next.graphicID),this.cmd("Connect",t.graphicID,t.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",t.numKeys)),0==i&&null!=t.parent){var h,r="",n=t.parent;for(h=0;n.children[h]!=t;h++);for(0==t.numKeys?h==n.numKeys||(r=n.children[h+1].keys[0]):r=t.keys[0];null!=n;){h>0&&n.keys[h-1]==e&&(n.keys[h-1]=r,this.cmd("SetText",n.graphicID,n.keys[h-1],h-1));var a=n.parent;for(h=0;null!=a&&a.children[h]!=n;h++);n=a}}this.repairAfterDelete(t)}else this.cmd("SetHighlight",t.graphicID,0);else this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0),this.doDelete(t.children[i],e);else this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,0),this.doDelete(t.children[i+1],e)}},BPlusTree.prototype.mergeRight=function(t){this.cmd("SetText",this.messageID,"Merging node");var e=t.parent,i=0;for(i=0;e.children[i]!=t;i++);var s=e.children[i+1];this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",s.graphicID,1),this.cmd("Step"),t.isLeaf?this.cmd("SetNumElements",t.graphicID,t.numKeys+s.numKeys):(this.cmd("SetNumElements",t.graphicID,t.numKeys+s.numKeys+1),this.cmd("SetText",t.graphicID,"",t.numKeys),this.cmd("CreateLabel",this.moveLabel1ID,e.keys[i],this.getLabelX(e,i),e.y),t.keys[t.numKeys]=e.keys[i]),t.x=(t.x+s.x)/2,this.cmd("SetPosition",t.graphicID,t.x,t.y);for(var h=t.numKeys,r=0;r<s.numKeys;r++){var n=t.numKeys+1+r;t.isLeaf&&(n-=1),t.keys[n]=s.keys[r],this.cmd("SetText",t.graphicID,t.keys[n],n),this.cmd("SetText",s.graphicID,"",r)}if(t.isLeaf)t.numKeys=t.numKeys+s.numKeys,t.next=s.next,null!=s.next&&this.cmd("Connect",t.graphicID,t.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",t.numKeys);else{for(r=0;r<=s.numKeys;r++)this.cmd("Disconnect",s.graphicID,s.children[r].graphicID),t.children[t.numKeys+1+r]=s.children[r],t.children[t.numKeys+1+r].parent=t,this.cmd("Connect",t.graphicID,t.children[t.numKeys+1+r].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",t.numKeys+1+r);t.numKeys=t.numKeys+s.numKeys+1}for(this.cmd("Disconnect",e.graphicID,s.graphicID),r=i+1;r<e.numKeys;r++)this.cmd("Disconnect",e.graphicID,e.children[r+1].graphicID),e.children[r]=e.children[r+1],this.cmd("Connect",e.graphicID,e.children[r].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",r),e.keys[r-1]=e.keys[r],this.cmd("SetText",e.graphicID,e.keys[r-1],r-1);return this.cmd("SetText",e.graphicID,"",e.numKeys-1),e.numKeys--,this.cmd("SetNumElements",e.graphicID,e.numKeys),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",s.graphicID,0),this.cmd("Delete",s.graphicID),t.isLeaf||(this.cmd("Move",this.moveLabel1ID,this.getLabelX(t,h),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",t.graphicID,t.keys[h],h)),this.cmd("SetText",this.messageID,""),t},BPlusTree.prototype.stealFromRight=function(t,e){var i=t.parent;this.cmd("SetNumElements",t.graphicID,t.numKeys+1),this.cmd("SetText",this.messageID,"Stealing from right sibling");var s=i.children[e+1];if(t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys),t.isLeaf&&(this.cmd("Disconnect",t.graphicID,t.next.graphicID),this.cmd("Connect",t.graphicID,t.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",t.numKeys)),this.cmd("SetText",t.graphicID,"",t.numKeys-1),this.cmd("SetText",i.graphicID,"",e),this.cmd("SetText",s.graphicID,"",0),t.isLeaf?(this.cmd("CreateLabel",this.moveLabel1ID,s.keys[1],this.getLabelX(s,1),s.y),this.cmd("CreateLabel",this.moveLabel2ID,s.keys[0],this.getLabelX(s,0),s.y),t.keys[t.numKeys-1]=s.keys[0],i.keys[e]=s.keys[1]):(this.cmd("CreateLabel",this.moveLabel1ID,s.keys[0],this.getLabelX(s,0),s.y),this.cmd("CreateLabel",this.moveLabel2ID,i.keys[e],this.getLabelX(i,e),i.y),t.keys[t.numKeys-1]=i.keys[e],i.keys[e]=s.keys[0]),this.cmd("Move",this.moveLabel1ID,this.getLabelX(i,e),i.y),this.cmd("Move",this.moveLabel2ID,this.getLabelX(t,t.numKeys-1),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("Delete",this.moveLabel2ID),this.cmd("SetText",t.graphicID,t.keys[t.numKeys-1],t.numKeys-1),this.cmd("SetText",i.graphicID,i.keys[e],e),!t.isLeaf){t.children[t.numKeys]=s.children[0],t.children[t.numKeys].parent=t,this.cmd("Disconnect",s.graphicID,s.children[0].graphicID),this.cmd("Connect",t.graphicID,t.children[t.numKeys].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",t.numKeys);for(var h=1;h<s.numKeys+1;h++)this.cmd("Disconnect",s.graphicID,s.children[h].graphicID),s.children[h-1]=s.children[h],this.cmd("Connect",s.graphicID,s.children[h-1].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",h-1)}for(h=1;h<s.numKeys;h++)s.keys[h-1]=s.keys[h],this.cmd("SetText",s.graphicID,s.keys[h-1],h-1);return this.cmd("SetText",s.graphicID,"",s.numKeys-1),s.numKeys--,this.cmd("SetNumElements",s.graphicID,s.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,""),t.isLeaf&&null!=s.next&&(this.cmd("Disconnect",s.graphicID,s.next.graphicID),this.cmd("Connect",s.graphicID,s.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",s.numKeys)),t},BPlusTree.prototype.stealFromLeft=function(t,e){var i=t.parent;for(t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys),t.isLeaf&&null!=t.next&&(this.cmd("Disconnect",t.graphicID,t.next.graphicID),this.cmd("Connect",t.graphicID,t.next.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",t.numKeys)),this.cmd("SetText",this.messageID,"Node has too few keys.  Stealing from left sibling."),h=t.numKeys-1;h>0;h--)t.keys[h]=t.keys[h-1],this.cmd("SetText",t.graphicID,t.keys[h],h);var s=i.children[e-1];if(this.cmd("SetText",t.graphicID,"",0),this.cmd("SetText",i.graphicID,"",e-1),this.cmd("SetText",s.graphicID,"",s.numKeys-1),t.isLeaf?(this.cmd("CreateLabel",this.moveLabel1ID,s.keys[s.numKeys-1],this.getLabelX(s,s.numKeys-1),s.y),this.cmd("CreateLabel",this.moveLabel2ID,s.keys[s.numKeys-1],this.getLabelX(s,s.numKeys-1),s.y),t.keys[0]=s.keys[s.numKeys-1],i.keys[e-1]=s.keys[s.numKeys-1]):(this.cmd("CreateLabel",this.moveLabel1ID,s.keys[s.numKeys-1],this.getLabelX(s,s.numKeys-1),s.y),this.cmd("CreateLabel",this.moveLabel2ID,i.keys[e-1],this.getLabelX(i,e-1),i.y),t.keys[0]=i.keys[e-1],i.keys[e-1]=s.keys[s.numKeys-1]),this.cmd("Move",this.moveLabel1ID,this.getLabelX(i,e-1),i.y),this.cmd("Move",this.moveLabel2ID,this.getLabelX(t,0),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("Delete",this.moveLabel2ID),!t.isLeaf){for(var h=t.numKeys;h>0;h--)this.cmd("Disconnect",t.graphicID,t.children[h-1].graphicID),t.children[h]=t.children[h-1],this.cmd("Connect",t.graphicID,t.children[h].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",h);t.children[0]=s.children[s.numKeys],this.cmd("Disconnect",s.graphicID,s.children[s.numKeys].graphicID),this.cmd("Connect",t.graphicID,t.children[0].graphicID,BPlusTree.FOREGROUND_COLOR,0,0,"",0),s.children[s.numKeys]=null,t.children[0].parent=t}return this.cmd("SetText",t.graphicID,t.keys[0],0),this.cmd("SetText",i.graphicID,i.keys[e-1],e-1),this.cmd("SetText",s.graphicID,"",s.numKeys-1),s.numKeys--,this.cmd("SetNumElements",s.graphicID,s.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,""),t.isLeaf&&(this.cmd("Disconnect",s.graphicID,t.graphicID),this.cmd("Connect",s.graphicID,t.graphicID,BPlusTree.FOREGROUND_COLOR,0,1,"",s.numKeys)),t},BPlusTree.prototype.repairAfterDelete=function(t){if(t.numKeys<this.min_keys)if(null==t.parent)0==t.numKeys&&(this.cmd("Delete",t.graphicID),this.treeRoot=t.children[0],null!=this.treeRoot&&(this.treeRoot.parent=null),this.resizeTree());else{for(var e=t.parent,i=0;e.children[i]!=t;i++);if(i>0&&e.children[i-1].numKeys>this.min_keys)this.stealFromLeft(t,i);else if(i<e.numKeys&&e.children[i+1].numKeys>this.min_keys)this.stealFromRight(t,i);else if(0==i){var s=this.mergeRight(t);this.repairAfterDelete(s.parent)}else s=this.mergeRight(e.children[i-1]),this.repairAfterDelete(s.parent)}else t.parent},BPlusTree.prototype.getLabelX=function(t,e){return t.x-BPlusTree.WIDTH_PER_ELEM*t.numKeys/2+BPlusTree.WIDTH_PER_ELEM/2+e*BPlusTree.WIDTH_PER_ELEM},BPlusTree.prototype.resizeTree=function(){this.resizeWidths(this.treeRoot),this.setNewPositions(this.treeRoot,this.starting_x,BPlusTree.STARTING_Y),this.animateNewPositions(this.treeRoot)},BPlusTree.prototype.setNewPositions=function(t,e,i){if(null!=t&&(t.y=i,t.x=e,!t.isLeaf))for(var s=e-t.width/2,h=0,r=0;r<t.numKeys+1;r++)this.setNewPositions(t.children[r],s+h+t.widths[r]/2,i+BPlusTree.HEIGHT_DELTA),h+=t.widths[r]},BPlusTree.prototype.animateNewPositions=function(t){if(null!=t){var e;for(e=0;e<t.numKeys+1;e++)this.animateNewPositions(t.children[e]);this.cmd("Move",t.graphicID,t.x,t.y)}},BPlusTree.prototype.resizeWidths=function(t){if(null==t)return 0;if(t.isLeaf){for(var e=0;e<t.numKeys+1;e++)t.widths[e]=0;return t.width=t.numKeys*BPlusTree.WIDTH_PER_ELEM+BPlusTree.NODE_SPACING,t.width}var i=0;for(e=0;e<t.numKeys+1;e++)t.widths[e]=this.resizeWidths(t.children[e]),i+=t.widths[e];return i=Math.max(i,t.numKeys*BPlusTree.WIDTH_PER_ELEM+BPlusTree.NODE_SPACING),t.width=i,i},BST.LINK_COLOR="#007700",BST.HIGHLIGHT_CIRCLE_COLOR="#007700",BST.FOREGROUND_COLOR="#007700",BST.BACKGROUND_COLOR="#EEFFEE",BST.PRINT_COLOR=BST.FOREGROUND_COLOR,BST.WIDTH_DELTA=50,BST.HEIGHT_DELTA=50,BST.STARTING_Y=50,BST.FIRST_PRINT_POS_X=50,BST.PRINT_VERTICAL_GAP=20,BST.PRINT_HORIZONTAL_GAP=50,BST.inheritFrom(Algorithm),BST.prototype.init=function(t,e,i){var s=BST.superclass;this.startingX=e/2,this.first_print_pos_y=i-2*BST.PRINT_VERTICAL_GAP,this.print_max=e-10,s.init.call(this,t),this.addControls(),this.nextIndex=0,this.commands=[],this.cmd("CreateLabel",0,"",20,10,0),this.nextIndex=1,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},BST.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},BST.prototype.reset=function(){this.nextIndex=1,this.treeRoot=null},BST.prototype.insertCallback=function(t){var e=this.insertField.value;""!=(e=this.normalizeNumber(e,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},BST.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(e,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},BST.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},BST.prototype.printTree=function(t){if(this.commands=[],null!=this.treeRoot){this.highlightID=this.nextIndex++;var e=this.nextIndex;this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.xPosOfNextLabel=BST.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.treeRoot),this.cmd("Delete",this.highlightID),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},BST.prototype.printTreeRec=function(t){this.cmd("Step"),null!=t.left&&(this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.printTreeRec(t.left),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"));var e=this.nextIndex++;this.cmd("CreateLabel",e,t.data,t.x,t.y),this.cmd("SetForegroundColor",e,BST.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=BST.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=BST.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=BST.PRINT_VERTICAL_GAP),null!=t.right&&(this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.printTreeRec(t.right),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"))},BST.prototype.findCallback=function(t){var e;e=this.normalizeNumber(this.findField.value,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},BST.prototype.findElement=function(t){return this.commands=[],this.highlightID=this.nextIndex++,this.doFind(this.treeRoot,t),this.commands},BST.prototype.doFind=function(t,e){this.cmd("SetText",0,"Searching for "+e),null!=t?(this.cmd("SetHighlight",t.graphicID,1),t.data==e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" = "+e+" (Element found!)"),this.cmd("Step"),this.cmd("SetText",0,"Found:"+e),this.cmd("SetHighlight",t.graphicID,0)):t.data>e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" < "+t.data+" (look to left subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.left,e)):(this.cmd("SetText",0,"Searching for "+e+" : "+e+" > "+t.data+" (look to right subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.right,e))):(this.cmd("SetText",0,"Searching for "+e+" : < Empty Tree > (Element not found)"),this.cmd("Step"),this.cmd("SetText",0,"Searching for "+e+" :  (Element not found)"))},BST.prototype.insertElement=function(t){if(this.commands=new Array,this.cmd("SetText",0,"Inserting "+t),this.highlightID=this.nextIndex++,null==this.treeRoot)this.cmd("CreateCircle",this.nextIndex,t,this.startingX,BST.STARTING_Y),this.cmd("SetForegroundColor",this.nextIndex,BST.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,BST.BACKGROUND_COLOR),this.cmd("Step"),this.treeRoot=new BSTNode(t,this.nextIndex,this.startingX,BST.STARTING_Y),this.nextIndex+=1;else{this.cmd("CreateCircle",this.nextIndex,t,100,100),this.cmd("SetForegroundColor",this.nextIndex,BST.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,BST.BACKGROUND_COLOR),this.cmd("Step");var e=new BSTNode(t,this.nextIndex,100,100);this.nextIndex+=1,this.cmd("SetHighlight",e.graphicID,1),this.insert(e,this.treeRoot),this.resizeTree()}return this.cmd("SetText",0,""),this.commands},BST.prototype.insert=function(t,e){this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",t.graphicID,1),t.data<e.data?this.cmd("SetText",0,t.data+" < "+e.data+".  Looking at left subtree"):this.cmd("SetText",0,t.data+" >= "+e.data+".  Looking at right subtree"),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),t.data<e.data?null==e.left?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetHighlight",t.graphicID,0),e.left=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,BST.LINK_COLOR)):(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.left.x,e.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.left)):null==e.right?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetHighlight",t.graphicID,0),e.right=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,BST.LINK_COLOR),t.x=e.x+BST.WIDTH_DELTA/2,t.y=e.y+BST.HEIGHT_DELTA,this.cmd("Move",t.graphicID,t.x,t.y)):(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.right.x,e.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.right))},BST.prototype.deleteElement=function(t){return this.commands=[],this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0,""),this.highlightID=this.nextIndex++,this.treeDelete(this.treeRoot,t),this.cmd("SetText",0,""),this.commands},BST.prototype.treeDelete=function(t,e){var i=!1;if(null!=t)if(null!=t.parent&&(i=t.parent.left==t),this.cmd("SetHighlight",t.graphicID,1),e<t.data?this.cmd("SetText",0,e+" < "+t.data+".  Looking at left subtree"):e>t.data?this.cmd("SetText",0,e+" > "+t.data+".  Looking at right subtree"):this.cmd("SetText",0,e+" == "+t.data+".  Found node to delete"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),e==t.data)if(null==t.left&&null==t.right)this.cmd("SetText",0,"Node to delete is a leaf.  Delete it."),this.cmd("Delete",t.graphicID),i&&null!=t.parent?t.parent.left=null:null!=t.parent?t.parent.right=null:treeRoot=null,this.resizeTree(),this.cmd("Step");else if(null==t.left)this.cmd("SetText",0,"Node to delete has no left child.  \nSet parent of deleted node to right child of deleted node."),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.right.graphicID,BST.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),i?t.parent.left=t.right:t.parent.right=t.right,t.right.parent=t.parent):(this.cmd("Delete",t.graphicID),this.treeRoot=t.right,this.treeRoot.parent=null),this.resizeTree();else if(null==t.right)this.cmd("SetText",0,"Node to delete has no right child.  \nSet parent of deleted node to left child of deleted node."),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.left.graphicID,BST.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),i?t.parent.left=t.left:t.parent.right=t.left,t.left.parent=t.parent):(this.cmd("Delete",t.graphicID),this.treeRoot=t.left,this.treeRoot.parent=null),this.resizeTree();else{this.cmd("SetText",0,"Node to delete has two childern.  \nFind largest node in left subtree."),this.highlightID=this.nextIndex,this.nextIndex+=1,this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y);var s=t;for(s=t.left,this.cmd("Move",this.highlightID,s.x,s.y),this.cmd("Step");null!=s.right;)s=s.right,this.cmd("Move",this.highlightID,s.x,s.y),this.cmd("Step");this.cmd("SetText",t.graphicID," ");var h=this.nextIndex;this.nextIndex+=1,this.cmd("CreateLabel",h,s.data,s.x,s.y),t.data=s.data,this.cmd("Move",h,t.x,t.y),this.cmd("SetText",0,"Copy largest value of left subtree into node to delete."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Delete",h),this.cmd("SetText",t.graphicID,t.data),this.cmd("Delete",this.highlightID),this.cmd("SetText",0,"Remove node whose value we copied."),null==s.left?(s.parent!=t?s.parent.right=null:t.left=null,this.cmd("Delete",s.graphicID),this.resizeTree()):(this.cmd("Disconnect",s.parent.graphicID,s.graphicID),this.cmd("Connect",s.parent.graphicID,s.left.graphicID,BST.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",s.graphicID),s.parent!=t?(s.parent.right=s.left,s.left.parent=s.parent):(t.left=s.left,s.left.parent=t),this.resizeTree())}else e<t.data?(null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.left,e)):(null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,BST.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.right,e));else this.cmd("SetText",0,"Elemet "+e+" not found, could not delete")},BST.prototype.resizeTree=function(){var t=this.startingX;this.resizeWidths(this.treeRoot),null!=this.treeRoot&&(this.treeRoot.leftWidth>t?t=this.treeRoot.leftWidth:this.treeRoot.rightWidth>t&&(t=Math.max(this.treeRoot.leftWidth,2*t-this.treeRoot.rightWidth)),this.setNewPositions(this.treeRoot,t,BST.STARTING_Y,0),this.animateNewPositions(this.treeRoot),this.cmd("Step"))},BST.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?e-=t.rightWidth:1==s&&(e+=t.leftWidth),t.x=e,this.setNewPositions(t.left,e,i+BST.HEIGHT_DELTA,-1),this.setNewPositions(t.right,e,i+BST.HEIGHT_DELTA,1))},BST.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},BST.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),BST.WIDTH_DELTA/2),t.rightWidth=Math.max(this.resizeWidths(t.right),BST.WIDTH_DELTA/2),t.leftWidth+t.rightWidth)},BST.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},BST.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},BTree.FIRST_PRINT_POS_X=50,BTree.PRINT_VERTICAL_GAP=20,BTree.PRINT_MAX=990,BTree.PRINT_HORIZONTAL_GAP=50,BTree.MIN_MAX_DEGREE=3,BTree.MAX_MAX_DEGREE=7,BTree.HEIGHT_DELTA=50,BTree.NODE_SPACING=3,BTree.STARTING_Y=30,BTree.WIDTH_PER_ELEM=40,BTree.NODE_HEIGHT=20,BTree.MESSAGE_X=5,BTree.MESSAGE_Y=10,BTree.LINK_COLOR="#007700",BTree.HIGHLIGHT_CIRCLE_COLOR="#007700",BTree.FOREGROUND_COLOR="#007700",BTree.BACKGROUND_COLOR="#EEFFEE",BTree.PRINT_COLOR=BTree.FOREGROUND_COLOR,BTree.inheritFrom(Algorithm),BTree.prototype.init=function(t,e,i){BTree.superclass.init.call(this,t,e,i),this.nextIndex=0,this.starting_x=e/2,this.preemptiveSplit=!1,this.addControls(),this.max_keys=this.max_degree-1,this.min_keys=Math.floor((this.max_degree+1)/2)-1,this.split_index=Math.floor((this.max_degree-1)/2),this.messageID=this.nextIndex++,this.cmd("CreateLabel",this.messageID,"",BTree.MESSAGE_X,BTree.MESSAGE_Y,0),this.moveLabel1ID=this.nextIndex++,this.moveLabel2ID=this.nextIndex++,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.commands=new Array,this.first_print_pos_y=i-3*BTree.PRINT_VERTICAL_GAP,this.xPosOfNextLabel=100,this.yPosOfNextLabel=200},BTree.prototype.addControls=function(){var t;for(this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.controls.push(this.deleteField),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.controls.push(this.deleteButton),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.controls.push(this.findField),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.controls.push(this.findButton),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this),this.controls.push(this.printButton),this.clearButton=this.addControlToAlgorithmBar("Button","Clear"),this.clearButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearButton),radioButtonNames=[],t=BTree.MIN_MAX_DEGREE;t<=BTree.MAX_MAX_DEGREE;t++)radioButtonNames.push("Max. Degree = "+String(t));for(this.maxDegreeRadioButtons=this.addRadioButtonGroupToAlgorithmBar(radioButtonNames,"MaxDegree"),this.maxDegreeRadioButtons[0].checked=!0,t=0;t<this.maxDegreeRadioButtons.length;t++)this.maxDegreeRadioButtons[t].onclick=this.maxDegreeChangedHandler.bind(this,t+BTree.MIN_MAX_DEGREE);this.premptiveSplitBox=this.addCheckboxToAlgorithmBar("Preemtive Split / Merge (Even max degree only)"),this.premptiveSplitBox.onclick=this.premtiveSplitCallback.bind(this)},BTree.prototype.reset=function(){this.nextIndex=3,this.max_degree=this.initial_max_degree,this.max_keys=this.max_degree-1,this.min_keys=Math.floor((this.max_degree+1)/2)-1,this.split_index=Math.floor((this.max_degree-1)/2),this.treeRoot=null,this.ignoreInputs=!0,this.ignoreInputs=!1},BTree.prototype.enableUI=function(t){var e;for(e=0;e<this.controls.length;e++)this.controls[e].disabled=!1;if(this.preemptiveSplit)for(e=BTree.MIN_MAX_DEGREE%2;e<=BTree.MAX_MAX_DEGREE-BTree.MIN_MAX_DEGREE;e+=2)this.maxDegreeRadioButtons[e].disabled=!1;else for(e=0;e<this.maxDegreeRadioButtons.length;e++)this.maxDegreeRadioButtons[e].disabled=!1;this.max_degree%2==0&&(this.premptiveSplitBox.disabled=!1)},BTree.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0;for(e=0;e<this.maxDegreeRadioButtons.length;e++)this.maxDegreeRadioButtons[e].disabled=!0;this.premptiveSplitBox.disabled=!0},BTree.prototype.maxDegreeChangedHandler=function(t,e){this.max_degree!=t&&(this.implementAction(this.changeDegree.bind(this),t),this.animationManager.skipForward(),animationManager.clearHistory())},BTree.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},BTree.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(this.deleteField.value,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},BTree.prototype.clearCallback=function(t){this.implementAction(this.clearTree.bind(this),"")},BTree.prototype.premtiveSplitCallback=function(t){this.preemptiveSplit!=this.premptiveSplitBox.checked&&this.implementAction(this.changePreemtiveSplit.bind(this),this.premptiveSplitBox.checked)},BTree.prototype.changePreemtiveSplit=function(t){return this.commands=new Array,this.cmd("Step"),this.preemptiveSplit=t,this.premptiveSplitBox.checked!=this.preemptiveSplit&&(this.premptiveSplitBox.checked=this.preemptiveSplit),this.commands},BTree.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},BTree.prototype.printTree=function(t){this.commands=new Array,this.cmd("SetText",this.messageID,"Printing tree");var e=this.nextIndex;this.xPosOfNextLabel=BTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.treeRoot),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);return this.nextIndex=e,this.cmd("SetText",this.messageID,""),this.commands},BTree.prototype.printTreeRec=function(t){var e;if(this.cmd("SetHighlight",t.graphicID,1),t.isLeaf){for(var i=0;i<t.numKeys;i++)e=this.nextIndex++,this.cmd("CreateLabel",e,t.keys[i],this.getLabelX(t,i),t.y),this.cmd("SetForegroundColor",e,BTree.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=BTree.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>BTree.PRINT_MAX&&(this.xPosOfNextLabel=BTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=BTree.PRINT_VERTICAL_GAP);this.cmd("SetHighlight",t.graphicID,0)}else{for(this.cmd("SetEdgeHighlight",t.graphicID,t.children[0].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[0].graphicID,0),this.printTreeRec(t.children[0]),i=0;i<t.numKeys;i++)this.cmd("SetHighlight",t.graphicID,1),e=this.nextIndex++,this.cmd("CreateLabel",e,t.keys[i],this.getLabelX(t,i),t.y),this.cmd("SetForegroundColor",e,BTree.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=BTree.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>BTree.PRINT_MAX&&(this.xPosOfNextLabel=BTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=BTree.PRINT_VERTICAL_GAP),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,0),this.printTreeRec(t.children[i+1]);this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0)}},BTree.prototype.clearTree=function(t){return this.commands=new Array,this.deleteTree(this.treeRoot),this.treeRoot=null,this.nextIndex=3,this.commands},BTree.prototype.deleteTree=function(t){if(null!=t){if(!t.isLeaf)for(var e=0;e<=t.numKeys;e++)this.cmd("Disconnect",t.graphicID,t.children[e].graphicID),this.deleteTree(t.children[e]),t.children[e];this.cmd("Delete",t.graphicID)}},BTree.prototype.changeDegree=function(t){this.commands=new Array,this.deleteTree(this.treeRoot),this.treeRoot=null,this.nextIndex=3;var e=t;return this.ignoreInputs=!0,this.maxDegreeRadioButtons[e-BTree.MIN_MAX_DEGREE].checked=!0,this.ignoreInputs=!1,this.max_degree=e,this.max_keys=e-1,this.min_keys=Math.floor((e+1)/2)-1,this.split_index=Math.floor((e-1)/2),0==this.commands.length&&this.cmd("Step"),e%2!=0&&this.preemptiveSplit&&(this.preemptiveSplit=!1,this.premptiveSplitBox.checked=!1),this.commands},BTree.prototype.findCallback=function(t){var e;e=this.normalizeNumber(this.findField.value,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},BTree.prototype.findElement=function(t){return this.commands=new Array,this.cmd("SetText",this.messageID,"Finding "+t),this.findInTree(this.treeRoot,t),this.commands},BTree.prototype.findInTree=function(t,e){if(null!=t){var i;for(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),i=0;i<t.numKeys&&t.keys[i]<e;i++);i==t.numKeys?t.isLeaf?(this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,0),this.findInTree(t.children[t.numKeys],e)):t.keys[i]>e?t.isLeaf?(this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0),this.findInTree(t.children[i],e)):(this.cmd("SetTextColor",t.graphicID,"#FF0000",i),this.cmd("SetText",this.messageID,"Element "+e+" found"),this.cmd("Step"),this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Step"))}else this.cmd("SetText",this.messageID,"Element "+e+" is not in the tree")},BTree.prototype.insertElement=function(t){return this.commands=new Array,this.cmd("SetText",this.messageID,"Inserting "+t),this.cmd("Step"),null==this.treeRoot?(this.treeRoot=new BTreeNode(this.nextIndex++,this.starting_x,BTree.STARTING_Y),this.cmd("CreateBTreeNode",this.treeRoot.graphicID,BTree.WIDTH_PER_ELEM,BTree.NODE_HEIGHT,1,this.starting_x,BTree.STARTING_Y,BTree.BACKGROUND_COLOR,BTree.FOREGROUND_COLOR),this.treeRoot.keys[0]=t,this.cmd("SetText",this.treeRoot.graphicID,t,0)):(this.preemptiveSplit?(this.treeRoot.numKeys==this.max_keys&&(this.split(this.treeRoot),this.resizeTree(),this.cmd("Step")),this.insertNotFull(this.treeRoot,t)):this.insert(this.treeRoot,t),this.treeRoot.isLeaf||this.resizeTree()),this.cmd("SetText",this.messageID,""),this.commands},BTree.prototype.insertNotFull=function(t,e){if(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),t.isLeaf){this.cmd("SetText",this.messageID,"Inserting "+e+".  Inserting into a leaf"),t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys);for(var i=t.numKeys-1;i>0&&t.keys[i-1]>e;)t.keys[i]=t.keys[i-1],this.cmd("SetText",t.graphicID,t.keys[i],i),i--;t.keys[i]=e,this.cmd("SetText",t.graphicID,t.keys[i],i),this.cmd("SetHighlight",t.graphicID,0),this.resizeTree()}else{for(var s=0;s<t.numKeys&&t.keys[s]<e;)s++;if(this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,0),this.cmd("SetHighlight",t.graphicID,0),t.children[s].numKeys==this.max_keys){var h=this.split(t.children[s]);this.resizeTree(),this.cmd("Step"),this.insertNotFull(h,e)}else this.insertNotFull(t.children[s],e)}},BTree.prototype.insert=function(t,e){if(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),t.isLeaf){this.cmd("SetText",this.messageID,"Inserting "+e+".  Inserting into a leaf"),t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys);for(var i=t.numKeys-1;i>0&&t.keys[i-1]>e;)t.keys[i]=t.keys[i-1],this.cmd("SetText",t.graphicID,t.keys[i],i),i--;t.keys[i]=e,this.cmd("SetText",t.graphicID,t.keys[i],i),this.cmd("SetHighlight",t.graphicID,0),this.resizeTree(),this.insertRepair(t)}else{for(var s=0;s<t.numKeys&&t.keys[s]<e;)s++;this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[s].graphicID,0),this.cmd("SetHighlight",t.graphicID,0),this.insert(t.children[s],e)}},BTree.prototype.insertRepair=function(t){if(!(t.numKeys<=this.max_keys))if(null!=t.parent){var e=this.split(t);this.insertRepair(e)}else this.treeRoot=this.split(t)},BTree.prototype.split=function(t){this.cmd("SetText",this.messageID,"Node now contains too many keys.  Splitting ..."),this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);var e=new BTreeNode(this.nextIndex++,t.x+100,t.y);e.numKeys=t.numKeys-this.split_index-1;var i,s=t.keys[this.split_index];if(null!=t.parent){for(var h=t.parent,r=0;r<h.numKeys+1&&h.children[r]!=t;r++);if(r==h.numKeys+1)throw new Error("Couldn't find which child we were!");for(this.cmd("SetNumElements",h.graphicID,h.numKeys+1),i=h.numKeys;i>r;i--)h.children[i+1]=h.children[i],this.cmd("Disconnect",h.graphicID,h.children[i].graphicID),this.cmd("Connect",h.graphicID,h.children[i].graphicID,BTree.FOREGROUND_COLOR,0,0,"",i+1),h.keys[i]=h.keys[i-1],this.cmd("SetText",h.graphicID,h.keys[i],i);h.numKeys++,h.keys[r]=s,this.cmd("SetText",h.graphicID,"",r),this.moveLabel1ID=this.nextIndex++,this.cmd("CreateLabel",this.moveLabel1ID,s,this.getLabelX(t,this.split_index),t.y),this.cmd("SetForegroundColor",this.moveLabel1ID,BTree.FOREGROUND_COLOR),this.cmd("Move",this.moveLabel1ID,this.getLabelX(h,r),h.y),h.children[r+1]=e,e.parent=h}for(this.cmd("CreateBTreeNode",e.graphicID,BTree.WIDTH_PER_ELEM,BTree.NODE_HEIGHT,t.numKeys-this.split_index-1,t.x,t.y,BTree.BACKGROUND_COLOR,BTree.FOREGROUND_COLOR),i=this.split_index+1;i<t.numKeys+1;i++)e.children[i-this.split_index-1]=t.children[i],null!=t.children[i]&&(e.isLeaf=!1,this.cmd("Disconnect",t.graphicID,t.children[i].graphicID),this.cmd("Connect",e.graphicID,e.children[i-this.split_index-1].graphicID,BTree.FOREGROUND_COLOR,0,0,"",i-this.split_index-1),null!=t.children[i]&&(t.children[i].parent=e),t.children[i]=null);for(i=this.split_index+1;i<t.numKeys;i++)e.keys[i-this.split_index-1]=t.keys[i],this.cmd("SetText",e.graphicID,e.keys[i-this.split_index-1],i-this.split_index-1);var n=t;for(n.numKeys=this.split_index,i=this.split_index;i<t.numKeys;i++)this.cmd("SetText",t.graphicID,"",i);return this.cmd("SetNumElements",t.graphicID,this.split_index),null!=t.parent?(this.cmd("Connect",h.graphicID,e.graphicID,BTree.FOREGROUND_COLOR,0,0,"",r+1),this.resizeTree(),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",h.graphicID,s,r),t.parent):(this.treeRoot=new BTreeNode(this.nextIndex++,this.starting_x,BTree.STARTING_Y),this.cmd("CreateBTreeNode",this.treeRoot.graphicID,BTree.WIDTH_PER_ELEM,BTree.NODE_HEIGHT,1,this.starting_x,BTree.STARTING_Y,BTree.BACKGROUND_COLOR,BTree.FOREGROUND_COLOR),this.treeRoot.keys[0]=s,this.cmd("SetText",this.treeRoot.graphicID,s,0),this.treeRoot.children[0]=n,this.treeRoot.children[1]=e,n.parent=this.treeRoot,e.parent=this.treeRoot,this.cmd("Connect",this.treeRoot.graphicID,n.graphicID,BTree.FOREGROUND_COLOR,0,0,"",0),this.cmd("Connect",this.treeRoot.graphicID,e.graphicID,BTree.FOREGROUND_COLOR,0,0,"",1),this.treeRoot.isLeaf=!1,this.treeRoot)},BTree.prototype.deleteElement=function(t){return this.commands=new Array,this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0,""),this.highlightID=this.nextIndex++,this.cmd("SetText",0,""),this.preemptiveSplit?this.doDeleteNotEmpty(this.treeRoot,t):this.doDelete(this.treeRoot,t),0==this.treeRoot.numKeys&&(this.cmd("Step"),this.cmd("Delete",this.treeRoot.graphicID),this.treeRoot=this.treeRoot.children[0],this.treeRoot.parent=null,this.resizeTree()),this.commands},BTree.prototype.doDeleteNotEmpty=function(t,e){if(null!=t){var i,s;for(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),i=0;i<t.numKeys&&t.keys[i]<e;i++);if(i==t.numKeys)if(t.isLeaf)this.cmd("SetHighlight",t.graphicID,0);else if(this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,0),t.children[t.numKeys].numKeys==this.min_keys)t.children[t.numKeys-1].numKeys>this.min_keys?(s=this.stealFromLeft(t.children[t.numKeys],t.numKeys),this.doDeleteNotEmpty(s,e)):(s=this.mergeRight(t.children[t.numKeys-1]),this.doDeleteNotEmpty(s,e));else this.doDeleteNotEmpty(t.children[t.numKeys],e);else if(t.keys[i]>e)t.isLeaf?this.cmd("SetHighlight",t.graphicID,0):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0),t.children[i].numKeys>this.min_keys?this.doDeleteNotEmpty(t.children[i],e):t.children[i+1].numKeys>this.min_keys?(s=this.stealFromRight(t.children[i],i),this.doDeleteNotEmpty(s,e)):(s=this.mergeRight(t.children[i]),this.doDeleteNotEmpty(s,e)));else if(this.cmd("SetTextColor",t.graphicID,"FF0000",i),this.cmd("Step"),t.isLeaf){this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i);for(var h=i;h<t.numKeys-1;h++)t.keys[h]=t.keys[h+1],this.cmd("SetText",t.graphicID,t.keys[h],h);t.numKeys--,this.cmd("SetText",t.graphicID,"",t.numKeys),this.cmd("SetNumElements",t.graphicID,t.numKeys),this.cmd("SetHighlight",t.graphicID,0),this.resizeTree(),this.cmd("SetText",this.messageID,"")}else{this.cmd("SetText",this.messageID,"Checking to see if tree to left of element to delete \nhas an extra key"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0);var r=t.children[i];if(t.children[i].numKeys==this.min_keys){if(this.cmd("SetText",this.messageID,"Tree to left of element to delete does not have an extra key.  \nLooking to the right ..."),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i+1].graphicID,0),t.children[i+1].numKeys==this.min_keys)return this.cmd("SetText",this.messageID,"Neither subtree has extra nodes.  Mergeing around the key to delete, \nand recursively deleting ..."),this.cmd("Step"),this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i),s=this.mergeRight(t.children[i]),void this.doDeleteNotEmpty(s,e);this.cmd("SetText",this.messageID,"Tree to right of element to delete does have an extra key. \nFinding the smallest key in that subtree ..."),this.cmd("Step");for(var n=t.children[i+1];!n.isLeaf;)this.cmd("SetHighlight",n.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",n.graphicID,0),n=n.children[0].numKeys==this.min_keys?n.children[1].numKeys==this.min_keys?this.mergeRight(n.children[0]):this.stealFromRight(n.children[0],0):n.children[0];for(this.cmd("SetHighlight",n.graphicID,1),t.keys[i]=n.keys[0],this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i),this.cmd("SetText",t.graphicID,"",i),this.cmd("SetText",n.graphicID,"",0),this.cmd("CreateLabel",this.moveLabel1ID,n.keys[0],this.getLabelX(n,0),n.y),this.cmd("Move",this.moveLabel1ID,this.getLabelX(t,i),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",t.graphicID,t.keys[i],i),i=1;i<n.numKeys;i++)n.keys[i-1]=n.keys[i],this.cmd("SetText",n.graphicID,n.keys[i-1],i-1);this.cmd("SetText",n.graphicID,"",n.numKeys-1),n.numKeys--,this.cmd("SetHighlight",n.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetNumElements",n.graphicID,n.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,"")}else{for(this.cmd("SetText",this.messageID,"Tree to left of element to delete does have \nan extra key. Finding the largest key in that subtree ..."),this.cmd("Step");!r.isLeaf;)this.cmd("SetHighlight",r.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",r.graphicID,0),r.children[r.numKeys].numKeys==this.min_keys?(r.children[r.numKeys-1]>this.min_keys&&(r=this.stealFromLeft(r.children[r.numKeys],r.numKeys)),r=this.mergeRight(r.children[r.numKeys-1])):r=r.children[r.numKeys];this.cmd("SetHighlight",r.graphicID,1),t.keys[i]=r.keys[r.numKeys-1],this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i),this.cmd("SetText",t.graphicID,"",i),this.cmd("SetText",r.graphicID,"",r.numKeys-1),this.cmd("CreateLabel",this.moveLabel1ID,t.keys[i],this.getLabelX(r,r.numKeys-1),r.y),this.cmd("Move",this.moveLabel1ID,this.getLabelX(t,i),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",t.graphicID,t.keys[i],i),r.numKeys--,this.cmd("SetHighlight",r.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetNumElements",r.graphicID,r.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,"")}}}},BTree.prototype.doDelete=function(t,e){if(null!=t){var i;for(this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),i=0;i<t.numKeys&&t.keys[i]<e;i++);if(i==t.numKeys)t.isLeaf?this.cmd("SetHighlight",t.graphicID,0):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[t.numKeys].graphicID,0),this.doDelete(t.children[t.numKeys],e));else if(t.keys[i]>e)t.isLeaf?this.cmd("SetHighlight",t.graphicID,0):(this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetEdgeHighlight",t.graphicID,t.children[i].graphicID,0),this.doDelete(t.children[i],e));else if(this.cmd("SetTextColor",t.graphicID,"#FF0000",i),this.cmd("Step"),t.isLeaf){this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i);for(var s=i;s<t.numKeys-1;s++)t.keys[s]=t.keys[s+1],this.cmd("SetText",t.graphicID,t.keys[s],s);t.numKeys--,this.cmd("SetText",t.graphicID,"",t.numKeys),this.cmd("SetNumElements",t.graphicID,t.numKeys),this.cmd("SetHighlight",t.graphicID,0),this.repairAfterDelete(t)}else{for(var h=t.children[i];!h.isLeaf;)this.cmd("SetHighlight",h.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",h.graphicID,0),h=h.children[h.numKeys];this.cmd("SetHighlight",h.graphicID,1),t.keys[i]=h.keys[h.numKeys-1],this.cmd("SetTextColor",t.graphicID,BTree.FOREGROUND_COLOR,i),this.cmd("SetText",t.graphicID,"",i),this.cmd("SetText",h.graphicID,"",h.numKeys-1),this.cmd("CreateLabel",this.moveLabel1ID,t.keys[i],this.getLabelX(h,h.numKeys-1),h.y),this.cmd("Move",this.moveLabel1ID,this.getLabelX(t,i),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",t.graphicID,t.keys[i],i),h.numKeys--,this.cmd("SetHighlight",h.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetNumElements",h.graphicID,h.numKeys),this.repairAfterDelete(h)}}},BTree.prototype.mergeRight=function(t){this.cmd("SetText",this.messageID,"Merging node");var e=t.parent,i=0;for(i=0;e.children[i]!=t;i++);var s=e.children[i+1];this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",s.graphicID,1),this.cmd("Step"),this.cmd("SetNumElements",t.graphicID,t.numKeys+s.numKeys+1),t.x=(t.x+s.x)/2,this.cmd("SetPosition",t.graphicID,t.x,t.y),t.keys[t.numKeys]=e.keys[i];var h=t.numKeys;this.cmd("SetText",t.graphicID,"",t.numKeys),this.cmd("CreateLabel",this.moveLabel1ID,e.keys[i],this.getLabelX(e,i),e.y);for(var r=0;r<s.numKeys;r++)t.keys[t.numKeys+1+r]=s.keys[r],this.cmd("SetText",t.graphicID,t.keys[t.numKeys+1+r],t.numKeys+1+r),this.cmd("SetText",s.graphicID,"",r);if(!t.isLeaf)for(r=0;r<=s.numKeys;r++)this.cmd("Disconnect",s.graphicID,s.children[r].graphicID),t.children[t.numKeys+1+r]=s.children[r],t.children[t.numKeys+1+r].parent=t,this.cmd("Connect",t.graphicID,t.children[t.numKeys+1+r].graphicID,BTree.FOREGROUND_COLOR,0,0,"",t.numKeys+1+r);for(this.cmd("Disconnect",e.graphicID,s.graphicID),r=i+1;r<e.numKeys;r++)this.cmd("Disconnect",e.graphicID,e.children[r+1].graphicID),e.children[r]=e.children[r+1],this.cmd("Connect",e.graphicID,e.children[r].graphicID,BTree.FOREGROUND_COLOR,0,0,"",r),e.keys[r-1]=e.keys[r],this.cmd("SetText",e.graphicID,e.keys[r-1],r-1);return this.cmd("SetText",e.graphicID,"",e.numKeys-1),e.numKeys--,this.cmd("SetNumElements",e.graphicID,e.numKeys),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetHighlight",e.graphicID,0),this.cmd("Delete",s.graphicID),t.numKeys=t.numKeys+s.numKeys+1,this.cmd("Move",this.moveLabel1ID,this.getLabelX(t,h),t.y),this.cmd("Step"),this.cmd("Delete",this.moveLabel1ID),this.cmd("SetText",t.graphicID,t.keys[h],h),this.cmd("SetText",this.messageID,""),t},BTree.prototype.stealFromRight=function(t,e){var i=t.parent;this.cmd("SetNumElements",t.graphicID,t.numKeys+1),this.cmd("SetText",this.messageID,"Stealing from right sibling");var s=i.children[e+1];t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys),this.cmd("SetText",t.graphicID,"",t.numKeys-1),this.cmd("SetText",i.graphicID,"",e),this.cmd("SetText",s.graphicID,"",0);var h=this.nextIndex++,r=this.nextIndex++;if(this.cmd("CreateLabel",h,s.keys[0],this.getLabelX(s,0),s.y),this.cmd("CreateLabel",r,i.keys[e],this.getLabelX(i,e),i.y),this.cmd("SetForegroundColor",h,BTree.FOREGROUND_COLOR),this.cmd("SetForegroundColor",r,BTree.FOREGROUND_COLOR),this.cmd("Move",h,this.getLabelX(i,e),i.y),this.cmd("Move",r,this.getLabelX(t,t.numKeys-1),t.y),this.cmd("Step"),this.cmd("Delete",h),this.cmd("Delete",r),t.keys[t.numKeys-1]=i.keys[e],i.keys[e]=s.keys[0],this.cmd("SetText",t.graphicID,t.keys[t.numKeys-1],t.numKeys-1),this.cmd("SetText",i.graphicID,i.keys[e],e),!t.isLeaf){t.children[t.numKeys]=s.children[0],t.children[t.numKeys].parent=t,this.cmd("Disconnect",s.graphicID,s.children[0].graphicID),this.cmd("Connect",t.graphicID,t.children[t.numKeys].graphicID,BTree.FOREGROUND_COLOR,0,0,"",t.numKeys);for(var n=1;n<s.numKeys+1;n++)this.cmd("Disconnect",s.graphicID,s.children[n].graphicID),s.children[n-1]=s.children[n],this.cmd("Connect",s.graphicID,s.children[n-1].graphicID,BTree.FOREGROUND_COLOR,0,0,"",n-1)}for(n=1;n<s.numKeys;n++)s.keys[n-1]=s.keys[n],this.cmd("SetText",s.graphicID,s.keys[n-1],n-1);return this.cmd("SetText",s.graphicID,"",s.numKeys-1),s.numKeys--,this.cmd("SetNumElements",s.graphicID,s.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,""),t},BTree.prototype.stealFromLeft=function(t,e){var i=t.parent;for(t.numKeys++,this.cmd("SetNumElements",t.graphicID,t.numKeys),this.cmd("SetText",this.messageID,"Node has too few keys.  Stealing from left sibling."),n=t.numKeys-1;n>0;n--)t.keys[n]=t.keys[n-1],this.cmd("SetText",t.graphicID,t.keys[n],n);var s=i.children[e-1];this.cmd("SetText",t.graphicID,"",0),this.cmd("SetText",i.graphicID,"",e-1),this.cmd("SetText",s.graphicID,"",s.numKeys-1);var h=this.nextIndex++,r=this.nextIndex++;if(this.cmd("CreateLabel",h,s.keys[s.numKeys-1],this.getLabelX(s,s.numKeys-1),s.y),this.cmd("CreateLabel",r,i.keys[e-1],this.getLabelX(i,e-1),i.y),this.cmd("SetForegroundColor",h,BTree.FOREGROUND_COLOR),this.cmd("SetForegroundColor",r,BTree.FOREGROUND_COLOR),this.cmd("Move",h,this.getLabelX(i,e-1),i.y),this.cmd("Move",r,this.getLabelX(t,0),t.y),this.cmd("Step"),this.cmd("Delete",h),this.cmd("Delete",r),!t.isLeaf){for(var n=t.numKeys;n>0;n--)this.cmd("Disconnect",t.graphicID,t.children[n-1].graphicID),t.children[n]=t.children[n-1],this.cmd("Connect",t.graphicID,t.children[n].graphicID,BTree.FOREGROUND_COLOR,0,0,"",n);t.children[0]=s.children[s.numKeys],this.cmd("Disconnect",s.graphicID,s.children[s.numKeys].graphicID),this.cmd("Connect",t.graphicID,t.children[0].graphicID,BTree.FOREGROUND_COLOR,0,0,"",0),s.children[s.numKeys]=null,t.children[0].parent=t}return t.keys[0]=i.keys[e-1],this.cmd("SetText",t.graphicID,t.keys[0],0),i.keys[e-1]=s.keys[s.numKeys-1],this.cmd("SetText",i.graphicID,i.keys[e-1],e-1),this.cmd("SetText",s.graphicID,"",s.numKeys-1),s.numKeys--,this.cmd("SetNumElements",s.graphicID,s.numKeys),this.resizeTree(),this.cmd("SetText",this.messageID,""),t},BTree.prototype.repairAfterDelete=function(t){if(t.numKeys<this.min_keys)if(null==t.parent)0==t.numKeys&&(this.cmd("Step"),this.cmd("Delete",t.graphicID),this.treeRoot=t.children[0],null!=this.treeRoot&&(this.treeRoot.parent=null),this.resizeTree());else{for(var e=t.parent,i=0;e.children[i]!=t;i++);if(i>0&&e.children[i-1].numKeys>this.min_keys)this.stealFromLeft(t,i);else if(i<e.numKeys&&e.children[i+1].numKeys>this.min_keys)this.stealFromRight(t,i);else if(0==i){var s=this.mergeRight(t);this.repairAfterDelete(s.parent)}else s=this.mergeRight(e.children[i-1]),this.repairAfterDelete(s.parent)}},BTree.prototype.getLabelX=function(t,e){return t.x-BTree.WIDTH_PER_ELEM*t.numKeys/2+BTree.WIDTH_PER_ELEM/2+e*BTree.WIDTH_PER_ELEM},BTree.prototype.resizeTree=function(){this.resizeWidths(this.treeRoot),this.setNewPositions(this.treeRoot,this.starting_x,BTree.STARTING_Y),this.animateNewPositions(this.treeRoot)},BTree.prototype.setNewPositions=function(t,e,i){if(null!=t&&(t.y=i,t.x=e,!t.isLeaf))for(var s=e-t.width/2,h=0,r=0;r<t.numKeys+1;r++)this.setNewPositions(t.children[r],s+h+t.widths[r]/2,i+BTree.HEIGHT_DELTA),h+=t.widths[r]},BTree.prototype.animateNewPositions=function(t){if(null!=t){var e;for(e=0;e<t.numKeys+1;e++)this.animateNewPositions(t.children[e]);this.cmd("Move",t.graphicID,t.x,t.y)}},BTree.prototype.resizeWidths=function(t){if(null==t)return 0;if(t.isLeaf){for(var e=0;e<t.numKeys+1;e++)t.widths[e]=0;return t.width=t.numKeys*BTree.WIDTH_PER_ELEM+BTree.NODE_SPACING,t.width}var i=0;for(e=0;e<t.numKeys+1;e++)t.widths[e]=this.resizeWidths(t.children[e]),i+=t.widths[e];return i=Math.max(i,t.numKeys*BTree.WIDTH_PER_ELEM+BTree.NODE_SPACING),t.width=i,i},RadixTree.NODE_WIDTH=60,RadixTree.LINK_COLOR="#007700",RadixTree.HIGHLIGHT_CIRCLE_COLOR="#007700",RadixTree.FOREGROUND_COLOR="#007700",RadixTree.BACKGROUND_COLOR="#CCFFCC",RadixTree.PRINT_COLOR=RadixTree.FOREGROUND_COLOR,RadixTree.FALSE_COLOR="#FFFFFF",RadixTree.WIDTH_DELTA=50,RadixTree.HEIGHT_DELTA=80,RadixTree.STARTING_Y=80,RadixTree.LeftMargin=300,RadixTree.NEW_NODE_Y=100,RadixTree.NEW_NODE_X=50,RadixTree.FIRST_PRINT_POS_X=50,RadixTree.PRINT_VERTICAL_GAP=20,RadixTree.PRINT_HORIZONTAL_GAP=50,RadixTree.inheritFrom(Algorithm),RadixTree.prototype.init=function(t,e,i){var s=RadixTree.superclass;this.startingX=e/2,this.first_print_pos_y=i-2*RadixTree.PRINT_VERTICAL_GAP,this.print_max=e-10,s.init.call(this,t),this.addControls(),this.nextIndex=0,this.commands=[],this.cmd("CreateLabel",0,"",20,10,0),this.cmd("CreateLabel",1,"",20,10,0),this.cmd("CreateLabel",2,"",20,30,0),this.nextIndex=3,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},RadixTree.prototype.findIndexDifference=function(t,e,i,s){var h=0;for(this.cmd("SetText",2,"Comparing next letter in search term \n to next letter in prefix of current node");h<t.length&&h<e.length&&(this.cmd("SetHighlightIndex",1,h),this.cmd("SetHighlightIndex",i,h),this.cmd("Step"),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetHighlightIndex",i,-1),t.charAt(h)==e.charAt(h));)h++;return h},RadixTree.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeypress=this.returnSubmit(this.insertField,this.insertCallback.bind(this),12,!1),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),12),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),12),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},RadixTree.prototype.reset=function(){this.nextIndex=3,this.root=null},RadixTree.prototype.insertCallback=function(t){var e=this.insertField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.insertField.value="",this.implementAction(this.add.bind(this),e))},RadixTree.prototype.deleteCallback=function(t){var e=this.deleteField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},RadixTree.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},RadixTree.prototype.printTree=function(t){if(this.commands=[],null!=this.root){this.highlightID=this.nextIndex++,this.printLabel1=this.nextIndex++,this.printLabel2=this.nextIndex++;var e=this.nextIndex++;this.cmd("CreateLabel",e,"Output: ",RadixTree.FIRST_PRINT_POS_X,this.first_print_pos_y),this.cmd("CreateHighlightCircle",this.highlightID,RadixTree.HIGHLIGHT_CIRCLE_COLOR,this.root.x,this.root.y),this.cmd("SetWidth",this.highlightID,RadixTree.NODE_WIDTH),this.cmd("CreateLabel",this.printLabel1,"Current String: ",20,10,0),this.cmd("CreateLabel",this.printLabel2,"",20,10,0),this.cmd("AlignRight",this.printLabel2,this.printLabel1),this.xPosOfNextLabel=RadixTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.root,""),this.cmd("Delete",this.highlightID),this.cmd("Delete",this.printLabel1),this.cmd("Delete",this.printLabel2),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},RadixTree.prototype.printTreeRec=function(t,e){if(""!=t.wordRemainder){e+=t.wordRemainder;var i=this.nextIndex++;this.cmd("CreateLabel",i,t.wordRemainder,t.x,t.y,0),this.cmd("MoveToAlignRight",i,this.printLabel2),this.cmd("Step"),this.cmd("Delete",i),this.nextIndex--,this.cmd("SetText",this.printLabel2,e)}if(t.isword){i=this.nextIndex++;this.cmd("CreateLabel",i,e+"  ",20,10,0),this.cmd("SetForegroundColor",i,RadixTree.PRINT_COLOR),this.cmd("AlignRight",i,this.printLabel1,RadixTree.PRINT_COLOR),this.cmd("MoveToAlignRight",i,i-1),this.cmd("Step"),this.xPosOfNextLabel+=RadixTree.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=RadixTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=RadixTree.PRINT_VERTICAL_GAP)}for(var s=0;s<26;s++)null!=t.children[s]&&(this.cmd("Move",this.highlightID,t.children[s].x,t.children[s].y),this.cmd("Step"),this.printTreeRec(t.children[s],e),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("SetText",this.printLabel2,e),this.cmd("Step"))},RadixTree.prototype.findCallback=function(t){var e;e=(e=this.insertField.value.toUpperCase()).replace(/[^a-z]/gi,""),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},RadixTree.prototype.findElement=function(t){return this.commands=[],this.cmd("SetText",0,"Seaching for: "),this.cmd("SetText",1,t),this.cmd("AlignRight",1,0),this.cmd("Step"),this.highlightID=this.nextIndex++,this.doFind(this.root,t)?this.cmd("SetText",0,"String "+t+" found"):this.cmd("SetText",0,"String "+t+" not found"),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},RadixTree.prototype.doFind=function(t,e){if(null==t)return this.cmd("SetText",2,"Empty tree found.   String not in the tree"),this.cmd("step"),null;this.cmd("SetHighlight",t.graphicID,1);var i=t.wordRemainder,s=this.findIndexDifference(e,i,t.graphicID,0);if(s==i.length){if(this.cmd("SetText",2,"Reached the end of the prefix stored at this node"),this.cmd("Step"),e.length>s){this.cmd("SetText",2,"Recusively search remaining string  \nin the '"+e.charAt(s)+"' child"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",1,e.substring(s));var h=e.charCodeAt(s)-"A".charCodeAt(0);return null==t.children[h]?(this.cmd("SetText",2,"Child '"+e.charAt(s)+"' does not exit.  \nString is not in the tree."),this.cmd("Step"),null):(this.cmd("CreateHighlightCircle",this.highlightID,RadixTree.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("SetWidth",this.highlightID,RadixTree.NODE_WIDTH),this.cmd("Step"),this.cmd("Move",this.highlightID,t.children[h].x,t.children[h].y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.doFind(t.children[h],e.substring(s)))}return this.cmd("SetText",2,'Reached the end of the string.  Check if current node is "True"'),this.cmd("Step"),this.cmd("SetText",2,""),t.isword?(this.cmd("SetText",2,'Node is "True", string is in tree'),this.cmd("Step"),this.cmd("SetText",2,""),this.cmd("SetHighlight",t.graphicID,0),t):(this.cmd("SetText",2,'Node is "False", string is not in tree'),this.cmd("Step"),this.cmd("SetText",2,""),this.cmd("SetHighlight",t.graphicID,0),null)}return this.cmd("SetText",2,"Reached end of search string, \nStill characters remaining at node\nString not in tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetText",2,""),null},RadixTree.prototype.deleteElement=function(t){this.commands=[],this.cmd("SetText",0,"Deleting: "),this.cmd("SetText",1,t),this.cmd("AlignRight",1,0);var e=this.doFind(this.root,t);return null==e?(this.cmd("SetText",2,"String not in the tree, nothing to delete"),this.cmd("Step"),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,"")):(e.isword=!1,this.cmd("SetText",2,'Found string to delete, setting node to "False"'),this.cmd("Step"),this.cmd("SetBackgroundColor",e.graphicID,RadixTree.FALSE_COLOR),this.cmd("Step"),this.cleanupAfterDelete(e),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,"")),this.commands},RadixTree.prototype.numChildren=function(t){if(null==t)return 0;for(var e=0,i=0;i<26;i++)null!=t.children[i]&&e++;return e},RadixTree.prototype.isLeaf=function(t){if(null==t)return!1;for(var e=0;e<26;e++)if(null!=t.children[e])return!1;return!0},RadixTree.prototype.getParentIndex=function(t){if(null==t.parent)return-1;for(var e=t.parent,i=0;i<26;i++)if(e.children[i]==t)return i;return-1},RadixTree.prototype.cleanupAfterDelete=function(t){var e=this.numChildren(t);if(0!=e||t.isword){if(1==e&&!t.isword){for(var i=-1,s=0;s<26;s++)if(null!=t.children[s]){i=s;break}this.cmd("SetText",2,'Deletion left us with a "False" node\nContaining one child.  Combining ...'),this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);var h=t.children[i];if(h.wordRemainder=t.wordRemainder+h.wordRemainder,this.cmd("SetText",h.graphicID,h.wordRemainder),this.cmd("Disconnect",t.graphicID,h.graphicID),null==t.parent)h.parent=null,this.root=h,this.cmd("Delete",t.graphicID);else{var r=this.getParentIndex(t);this.cmd("Disconnect",t.parent.graphicID,t.graphicID),t.parent.children[r]=h,h.parent=t.parent,this.cmd("Connect",t.parent.graphicID,h.graphicID,RadixTree.FOREGROUND_COLOR,0,!1,h.wordRemainder.charAt(0)),this.cmd("Delete",t.graphicID)}this.resizeTree()}}else if(this.cmd("SetText",2,'Deletion left us with a "False" leaf\nRemoving false leaf'),this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.parent){for(var n=0;t.parent.children[n]!=t;)n++;this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Delete",t.graphicID,0),t.parent.children[n]=null,this.cleanupAfterDelete(t.parent)}else this.cmd("Delete",t.graphicID,0),this.root=null},RadixTree.prototype.treeDelete=function(t,e){},RadixTree.prototype.resizeTree=function(){if(this.resizeWidths(this.root),null!=this.root){var t=this.root.width/2+1+RadixTree.LeftMargin;this.setNewPositions(this.root,t,RadixTree.STARTING_Y),this.animateNewPositions(this.root),this.cmd("Step")}},RadixTree.prototype.add=function(t){return this.commands=new Array,this.cmd("SetText",0,"Inserting; "),this.cmd("SetText",1,t),this.cmd("AlignRight",1,0),this.cmd("Step"),this.highlightID=this.nextIndex++,this.root=this.addR(t.toUpperCase(),this.root,RadixTree.LEFT_MARGIN+RadixTree.NODE_WIDTH/2+1,RadixTree.STARTING_Y,0),this.resizeTree(),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.commands},RadixTree.prototype.addR=function(t,e,i,s,h){if(null==e)return this.cmd("CreateCircle",this.nextIndex,t,RadixTree.NEW_NODE_X,RadixTree.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,RadixTree.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,RadixTree.BACKGROUND_COLOR),this.cmd("SetWidth",this.nextIndex,RadixTree.NODE_WIDTH),this.cmd("SetText",2,"Reached an empty tree.  Creating a node containing "+t),this.cmd("Step"),this.cmd("SetText",2,""),e=new RadixNode(t,this.nextIndex,i,s),this.nextIndex+=1,e.isword=!0,e;this.cmd("SetHighlight",e.graphicID,1);var r=this.findIndexDifference(t,e.wordRemainder,e.graphicID,h);if(r==e.wordRemainder.length){if(this.cmd("SetText",2,"Reached the end of the prefix stored at this node"),this.cmd("Step"),t.length>r){this.cmd("SetText",2,"Recusively insert remaining string  \ninto the '"+t.charAt(r)+"' child"),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetText",1,t.substring(r));var n=t.charCodeAt(r)-"A".charCodeAt(0);null==e.children[n]?(this.cmd("SetText",2,"Child '"+t.charAt(r)+"' does not exit.  Creating ..."),this.cmd("Step")):(this.cmd("CreateHighlightCircle",this.highlightID,RadixTree.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("SetWidth",this.highlightID,RadixTree.NODE_WIDTH),this.cmd("Step"),this.cmd("Move",this.highlightID,e.children[n].x,e.children[n].y),this.cmd("Step"),this.cmd("Delete",this.highlightID));var a=null==e.children[n];return e.children[n]=this.addR(t.substring(r),e.children[n],e.x,e.y,h+r),e.children[n].parent=e,a&&this.cmd("Connect",e.graphicID,e.children[n].graphicID,RadixTree.FOREGROUND_COLOR,0,!1,t.charAt(r)),e}return this.cmd("SetText",2,'Reached the end of the string.  Set Current node to "True"'),this.cmd("Step"),this.cmd("SetText",2,""),this.cmd("SetBackgroundColor",e.graphicID,RadixTree.BACKGROUND_COLOR),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),e.isword=!0,e}var o=e.wordRemainder.substring(0,r),l=e.wordRemainder.substring(r);this.cmd("SetText",2,"Reached a mismatch in prefix. \nCreate a new node with common prefix"),this.cmd("CreateCircle",this.nextIndex,o,RadixTree.NEW_NODE_X,RadixTree.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,RadixTree.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,RadixTree.FALSE_COLOR),this.cmd("SetWidth",this.nextIndex,RadixTree.NODE_WIDTH),this.cmd("Step");var d=new RadixNode(o,this.nextIndex,0,0);this.nextIndex+=1,d.wordRemainder=o;n=e.wordRemainder.charCodeAt(r)-"A".charCodeAt(0);if(d.parent=e.parent,d.children[n]=e,null!=e.parent){this.cmd("Disconnect",e.parent.graphicID,e.graphicID),this.cmd("Connect",e.parent.graphicID,d.graphicID,RadixTree.FOREGROUND_COLOR,0,!1,d.wordRemainder.charAt(0));var c=d.wordRemainder.charCodeAt(0)-"A".charCodeAt(0);e.parent.children[c]=d,e.parent=d}else this.root=d;return this.cmd("SetHighlight",e.graphicID,0),e.parent=d,this.cmd("SetText",2,"Connect new node to the old, and reset prefix stored at previous node"),this.cmd("Connect",d.graphicID,d.children[n].graphicID,RadixTree.FOREGROUND_COLOR,0,!1,e.wordRemainder.charAt(r)),e.wordRemainder=l,this.cmd("SetText",e.graphicID,e.wordRemainder),this.cmd("Step"),this.resizeTree(),r==t.length?(d.isword=!0,this.cmd("SetBackgroundColor",d.graphicID,RadixTree.BACKGROUND_COLOR)):(this.cmd("SetBackgroundColor",d.graphicID,RadixTree.FALSE_COLOR),n=t.charCodeAt(r)-"A".charCodeAt(0),this.cmd("SetText",1,t.substring(r)),d.children[n]=this.addR(t.substring(r),null,e.x,e.y,r+h),d.children[n].parent=d,this.cmd("Connect",d.graphicID,d.children[n].graphicID,RadixTree.FOREGROUND_COLOR,0,!1,t.charAt(r))),d},RadixTree.prototype.setNewPositions=function(t,e,i){if(null!=t){t.x=e,t.y=i;for(var s=e-t.width/2,h=i+RadixTree.HEIGHT_DELTA,r=0;r<26;r++)null!=t.children[r]&&(this.setNewPositions(t.children[r],s+t.children[r].width/2,h),s+=t.children[r].width)}},RadixTree.prototype.animateNewPositions=function(t){if(null!=t){this.cmd("Move",t.graphicID,t.x,t.y);for(var e=0;e<26;e++)this.animateNewPositions(t.children[e])}},RadixTree.prototype.resizeWidths=function(t){if(null==t)return 0;for(var e=0,i=0;i<26;i++)t.childWidths[i]=this.resizeWidths(t.children[i]),e+=t.childWidths[i];return t.width=Math.max(e,RadixTree.NODE_WIDTH+4),t.width},RadixTree.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},RadixTree.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},RedBlack.inheritFrom(Algorithm),RedBlack.prototype.init=function(t,e,i){RedBlack.superclass.init.call(this,t),this.addControls(),this.nextIndex=1,this.commands=[],this.startingX=e/2,this.print_max=e-RedBlack.PRINT_HORIZONTAL_GAP,this.first_print_pos_y=i-2*RedBlack.PRINT_VERTICAL_GAP,this.cmd("CreateLabel",0,"",RedBlack.EXPLANITORY_TEXT_X,RedBlack.EXPLANITORY_TEXT_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},RedBlack.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this),this.showNullLeaves=this.addCheckboxToAlgorithmBar("Show Null Leaves"),this.showNullLeaves.onclick=this.showNullLeavesCallback.bind(this),this.showNullLeaves.checked=!1},RedBlack.prototype.reset=function(){this.nextIndex=1,this.treeRoot=null},RedBlack.FIRST_PRINT_POS_X=50,RedBlack.PRINT_VERTICAL_GAP=20,RedBlack.PRINT_HORIZONTAL_GAP=50,RedBlack.FOREGROUND_RED="#AA0000",RedBlack.BACKGROUND_RED="#FFAAAA",RedBlack.FOREGROUND_BLACK="#000000",RedBlack.BACKGROUND_BLACK="#AAAAAA",RedBlack.BACKGROUND_DOUBLE_BLACK="#777777",RedBlack.HIGHLIGHT_LABEL_COLOR="#FF0000",RedBlack.HIGHLIGHT_LINK_COLOR="#FF0000";var BLUE="#0000FF";RedBlack.LINK_COLOR="#000000",RedBlack.BACKGROUND_COLOR=RedBlack.BACKGROUND_BLACK,RedBlack.HIGHLIGHT_COLOR="#007700",RedBlack.FOREGROUND_COLOR=RedBlack.FOREGROUND_BLACK,RedBlack.PRINT_COLOR=RedBlack.FOREGROUND_COLOR;var widthDelta=50,heightDelta=50,startingY=50,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg,currentAlg;function RedBlackNode(t,e,i,s){this.data=t,this.x=i,this.y=s,this.blackLevel=0,this.phantomLeaf=!1,this.graphicID=e,this.left=null,this.right=null,this.parent=null,this.height=0,this.leftWidth=0,this.rightWidth=0}function init(){var t=initCanvas();currentAlg=new RedBlack(t,canvas.width,canvas.height)}function SplayTree(t,e,i){this.init(t,e,i)}function BSTNode(t,e,i,s){this.data=t,this.x=i,this.y=s,this.graphicID=e,this.left=null,this.right=null,this.parent=null}function init(){var t=initCanvas();currentAlg=new SplayTree(t,canvas.width,canvas.height)}function Trie(t,e,i){this.init(t,e,i)}function TrieNode(t,e,i,s){this.wordRemainder=t,this.x=i,this.y=s,this.graphicID=e,this.children=new Array(26),this.childWidths=new Array(26);for(var h=0;h<26;h++)this.children[h]=null,this.childWidths[h]=0;this.width=0,this.parent=null}function init(){var t=initCanvas();currentAlg=new Trie(t,canvas.width,canvas.height)}function Ternary(t,e,i){this.init(t,e,i)}function TernaryNode(t,e,i,s){this.nextChar=t,this.x=i,this.y=s,this.graphicID=e,this.left=null,this.center=null,this.right=null,this.leftWidth=0,this.centerWidth=0,this.rightWwidth=0,this.parent=null}function init(){var t=initCanvas();currentAlg=new Ternary(t,canvas.width,canvas.height)}function Heap(t,e,i,s){this.compare=s?window[s]:function(t,e){return t<e?-1:t>e?1:0},this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new Heap(t,canvas.width,canvas.height)}function BinomialQueue(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new BinomialQueue(t,canvas.width,canvas.height)}function BinomialNode(t,e,i,s){this.data=t,this.x=i,this.y=s,this.graphicID=e,this.degree=0,this.leftChild=null,this.rightSib=null,this.parent=null,this.internalGraphicID=-1,this.degreeID=-1}function FibonacciHeap(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new FibonacciHeap(t,canvas.width,canvas.height)}function BinomialNode(t,e,i,s){this.data=t,this.x=i,this.y=s,this.graphicID=e,this.degree=0,this.leftChild=null,this.rightSib=null,this.parent=null,this.internalGraphicID=-1,this.degreeID=-1}function LeftistHeap(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new LeftistHeap(t,canvas.width,canvas.height)}function LeftistHeapNode(t,e,i,s,h){this.data=t,this.x=void 0==s?0:s,this.y=void 0==h?0:h,this.npX=s-LeftistHeap.NPL_OFFSET_X,this.npY=h-LeftistHeap.NPL_OFFSET_Y,this.graphicID=e,this.nplID=i,this.npl=0,this.left=null,this.right=null,this.leftWidth=0,this.rightWidth=0,this.parent=null}function SkewHeap(t,e,i){this.init(t,e,i)}function init(){var t=initCanvas();currentAlg=new SkewHeap(t,canvas.width,canvas.height)}function SkewHeapNode(t,e,i,s){this.data=t,this.x=void 0==i?0:i,this.y=void 0==s?0:s,this.graphicID=e,this.left=null,this.right=null,this.leftWidth=0,this.rightWidth=0,this.parent=null}function Recursive(t,e,i){if(!t)throw"this shouldn't happen";this.init(t,e,i)}function ActivationRecord(t){var e;for(this.fields=t,this.values=new Array(this.fields.length),e=0;e<this.fields.length;e++)this.values[e]="";this.fieldIDs=new Array(this.fields.length),this.labelIDs=new Array(this.fields.length)}function RecFact(t,e,i){RecFact.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new RecFact(t,canvas.width,canvas.height)}function Queens(t,e,i){Queens.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new Queens(t,canvas.width,canvas.height)}function Reverse(t,e,i){Reverse.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new Reverse(t,canvas.width,canvas.height)}function Hash(t,e,i){if(!t)throw"this shouldn't happen";this.init(t,e,i)}function ClosedHashBucket(t,e,i){ClosedHashBucket.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new ClosedHashBucket(t,canvas.width,canvas.height)}function ClosedHash(t,e,i){ClosedHash.superclass.constructor.call(this,t,e,i)}function resetCallback(t){}function init(){var t=initCanvas();currentAlg=new ClosedHash(t,canvas.width,canvas.height)}function OpenHash(t,e,i){OpenHash.superclass.constructor.call(this,t,e,i)}function LinkedListNode(t,e,i,s){this.data=t,this.graphicID=e,this.x=i,this.y=s,this.next=null}function init(){var t=initCanvas();currentAlg=new OpenHash(t,canvas.width,canvas.height)}function Graph(t,e,i,s,h){if(!t)throw"this shouldn't happen";this.init(t,e,i,s,h)}function init(){var t=initCanvas();currentAlg=new Graph(t,canvas.width,canvas.height)}function BFS(t,e,i,s){BFS.superclass.constructor.call(this,t,e,i,s)}function init(){var t=initCanvas();currentAlg=new BFS(t,canvas.width,canvas.height)}function ConnectedComponent(t,e,i){ConnectedComponent.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new ConnectedComponent(t,canvas.width,canvas.height)}function DFS(t,e,i,s){DFS.superclass.constructor.call(this,t,e,i,s)}function init(){var t=initCanvas();currentAlg=new DFS(t,canvas.width,canvas.height)}function DijkstraPrim(t,e,i,s,h){this.runningDijkstra=s,DijkstraPrim.superclass.constructor.call(this,t,e,i,h,!1)}function init(t){var e=initCanvas();currentAlg=new DijkstraPrim(e,canvas.width,canvas.height,t)}function Floyd(t,e,i,s){Floyd.superclass.constructor.call(this,t,e,i,s)}function init(){var t=initCanvas();currentAlg=new Floyd(t,canvas.width,canvas.height)}function Kruskal(t,e,i){Kruskal.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new Kruskal(t,canvas.width,canvas.height)}function TopoSortDFS(t,e,i){TopoSortDFS.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new TopoSortDFS(t,canvas.width,canvas.height)}function TopoSortIndegree(t,e,i){TopoSortIndegree.superclass.constructor.call(this,t,e,i)}function init(){var t=initCanvas();currentAlg=new TopoSortIndegree(t,canvas.width,canvas.height)}RedBlack.FIRST_PRINT_POS_X=40,RedBlack.PRINT_VERTICAL_GAP=20,RedBlack.PRINT_HORIZONTAL_GAP=50,RedBlack.EXPLANITORY_TEXT_X=10,RedBlack.EXPLANITORY_TEXT_Y=10,RedBlack.prototype.insertCallback=function(t){var e=this.insertField.value;""!=(e=this.normalizeNumber(e,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},RedBlack.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(e,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},RedBlack.prototype.findCallback=function(t){var e=this.findField.value;""!=e&&(e=this.normalizeNumber(e,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e))},RedBlack.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},RedBlack.prototype.showNullLeavesCallback=function(t){this.showNullLeaves.checked?this.animationManager.setAllLayers([0,1]):this.animationManager.setAllLayers([0])},RedBlack.prototype.printTree=function(t){if(this.commands=[],null!=this.treeRoot){this.highlightID=this.nextIndex++;var e=this.nextIndex;this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,this.treeRoot.x,this.treeRoot.y),this.xPosOfNextLabel=RedBlack.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.treeRoot),this.cmd("Delete",this.highlightID),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},RedBlack.prototype.printTreeRec=function(t){this.cmd("Step"),null==t.left||t.left.phantomLeaf||(this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.printTreeRec(t.left),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"));var e=this.nextIndex++;this.cmd("CreateLabel",e,t.data,t.x,t.y),this.cmd("SetForegroundColor",e,RedBlack.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=RedBlack.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=RedBlack.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=RedBlack.PRINT_VERTICAL_GAP),null==t.right||t.right.phantomLeaf||(this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.printTreeRec(t.right),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"))},RedBlack.prototype.findElement=function(t){return this.commands=[],this.highlightID=this.nextIndex++,this.doFind(this.treeRoot,t),this.commands},RedBlack.prototype.doFind=function(t,e){this.cmd("SetText",0,"Searchiing for "+e),null==t||t.phantomLeaf?(this.cmd("SetText",0," Searching for "+e+" : < Empty Tree > (Element not found)"),this.cmd("Step"),this.cmd("SetText",0," Searching for "+e+" :  (Element not found)")):(this.cmd("SetHighlight",t.graphicID,1),t.data==e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" = "+e+" (Element found!)"),this.cmd("Step"),this.cmd("SetText",0,"Found:"+e),this.cmd("SetHighlight",t.graphicID,0)):t.data>e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" < "+t.data+" (look to left subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.left,e)):(this.cmd("SetText",0," Searching for "+e+" : "+e+" > "+t.data+" (look to right subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.doFind(t.right,e)))},RedBlack.prototype.findUncle=function(t){if(null==t.parent)return null;var e=t.parent;if(null==e.parent)return null;var i=e.parent;return i.left==e?i.right:i.left},RedBlack.prototype.blackLevel=function(t){return null==t?1:t.blackLevel},RedBlack.prototype.attachLeftNullLeaf=function(t){var e=this.nextIndex++;this.cmd("CreateCircle",e,"NULL\nLEAF",t.x,t.y),this.cmd("SetForegroundColor",e,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",e,RedBlack.BACKGROUND_BLACK),t.left=new RedBlackNode("",e,this.startingX,startingY),t.left.phantomLeaf=!0,this.cmd("SetLayer",e,1),t.left.blackLevel=1,this.cmd("Connect",t.graphicID,e,RedBlack.LINK_COLOR)},RedBlack.prototype.attachRightNullLeaf=function(t){treeNodeID=this.nextIndex++,this.cmd("CreateCircle",treeNodeID,"NULL\nLEAF",t.x,t.y),this.cmd("SetForegroundColor",treeNodeID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",treeNodeID,RedBlack.BACKGROUND_BLACK),t.right=new RedBlackNode("",treeNodeID,this.startingX,startingY),this.cmd("SetLayer",treeNodeID,1),t.right.phantomLeaf=!0,t.right.blackLevel=1,this.cmd("Connect",t.graphicID,treeNodeID,RedBlack.LINK_COLOR)},RedBlack.prototype.attachNullLeaves=function(t){this.attachLeftNullLeaf(t),this.attachRightNullLeaf(t)},RedBlack.prototype.insertElement=function(t){var e;if(this.commands=new Array,this.cmd("SetText",0," Inserting "+t),this.highlightID=this.nextIndex++,null==this.treeRoot)e=this.nextIndex++,this.cmd("CreateCircle",e,t,this.startingX,startingY),this.cmd("SetForegroundColor",e,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",e,RedBlack.BACKGROUND_BLACK),this.treeRoot=new RedBlackNode(t,e,this.startingX,startingY),this.treeRoot.blackLevel=1,this.attachNullLeaves(this.treeRoot),this.resizeTree();else{e=this.nextIndex++,this.cmd("CreateCircle",e,t,30,startingY),this.cmd("SetForegroundColor",e,RedBlack.FOREGROUND_RED),this.cmd("SetBackgroundColor",e,RedBlack.BACKGROUND_RED),this.cmd("Step");var i=new RedBlackNode(t,e,100,100);this.cmd("SetHighlight",i.graphicID,1),i.height=1,this.insert(i,this.treeRoot)}return this.cmd("SetText",0," "),this.commands},RedBlack.prototype.singleRotateRight=function(t){var e=t,i=(e.right,t.left),s=(i.left,i.right);return this.cmd("SetText",0,"Single Rotate Right"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,RedBlack.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,RedBlack.LINK_COLOR),i.parent=e.parent,this.treeRoot==e?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,RedBlack.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,RedBlack.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.right=e,e.parent=i,e.left=s,this.resetHeight(e),this.resetHeight(i),this.resizeTree(),i},RedBlack.prototype.singleRotateLeft=function(t){var e=t,i=t.right,s=(e.left,i.left);i.right;return this.cmd("SetText",0,"Single Rotate Left"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,RedBlack.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,RedBlack.LINK_COLOR),i.parent=e.parent,this.treeRoot==e?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,RedBlack.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,RedBlack.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.left=e,e.parent=i,e.right=s,this.resetHeight(e),this.resetHeight(i),this.resizeTree(),i},RedBlack.prototype.getHeight=function(t){return null==t?0:t.height},RedBlack.prototype.resetHeight=function(t){if(null!=t){var e=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1;t.height!=e&&(t.height=Math.max(this.getHeight(t.left),this.getHeight(t.right))+1)}},RedBlack.prototype.insert=function(t,e){this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",t.graphicID,1),t.data<e.data?this.cmd("SetText",0,t.data+" < "+e.data+".  Looking at left subtree"):this.cmd("SetText",0,t.data+" >= "+e.data+".  Looking at right subtree"),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),t.data<e.data?null==e.left||e.left.phantomLeaf?(this.cmd("SetText",0,"Found null tree (or phantom leaf), inserting element"),null!=e.left&&this.cmd("Delete",e.left.graphicID),this.cmd("SetHighlight",t.graphicID,0),e.left=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,RedBlack.LINK_COLOR),this.attachNullLeaves(t),this.resizeTree(),this.resizeTree(),this.fixDoubleRed(t)):(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.left.x,e.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.left)):null==e.right||e.right.phantomLeaf?(this.cmd("SetText",0,"Found null tree (or phantom leaf), inserting element"),null!=e.right&&this.cmd("Delete",e.right.graphicID),this.cmd("SetHighlight",t.graphicID,0),e.right=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,RedBlack.LINK_COLOR),t.x=e.x+widthDelta/2,t.y=e.y+heightDelta,this.cmd("Move",t.graphicID,t.x,t.y),this.attachNullLeaves(t),this.resizeTree(),this.resizeTree(),this.fixDoubleRed(t)):(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.right.x,e.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.right))},RedBlack.prototype.fixDoubleRed=function(t){if(null!=t.parent){if(t.parent.blackLevel>0)return;if(null==t.parent.parent)return this.cmd("SetText",0,"Tree root is red, color it black."),this.cmd("Step"),t.parent.blackLevel=1,this.cmd("SetForegroundColor",t.parent.graphicID,RedBlack.FOREGROUND_BLACK),void this.cmd("SetBackgroundColor",t.parent.graphicID,RedBlack.BACKGROUND_BLACK);var e=this.findUncle(t);0==this.blackLevel(e)?(this.cmd("SetText",0,"Node and parent are both red.  Uncle of node is red -- push blackness down from grandparent"),this.cmd("Step"),this.cmd("SetForegroundColor",e.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",e.graphicID,RedBlack.BACKGROUND_BLACK),e.blackLevel=1,t.parent.blackLevel=1,this.cmd("SetForegroundColor",t.parent.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",t.parent.graphicID,RedBlack.BACKGROUND_BLACK),t.parent.parent.blackLevel=0,this.cmd("SetForegroundColor",t.parent.parent.graphicID,RedBlack.FOREGROUND_RED),this.cmd("SetBackgroundColor",t.parent.parent.graphicID,RedBlack.BACKGROUND_RED),this.cmd("Step"),this.fixDoubleRed(t.parent.parent)):(t.isLeftChild()&&!t.parent.isLeftChild()?(this.cmd("SetText",0,"Node and parent are both red.  Node is left child, parent is right child -- rotate"),this.cmd("Step"),this.singleRotateRight(t.parent),t=t.right):!t.isLeftChild()&&t.parent.isLeftChild()&&(this.cmd("SetText",0,"Node and parent are both red.  Node is right child, parent is left child -- rotate"),this.cmd("Step"),this.singleRotateLeft(t.parent),t=t.left),t.isLeftChild()?(this.cmd("SetText",0,"Node and parent are both red.  Node is left child, parent is left child\nCan fix extra redness with a single rotation"),this.cmd("Step"),this.singleRotateRight(t.parent.parent),t.parent.blackLevel=1,this.cmd("SetForegroundColor",t.parent.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",t.parent.graphicID,RedBlack.BACKGROUND_BLACK),t.parent.right.blackLevel=0,this.cmd("SetForegroundColor",t.parent.right.graphicID,RedBlack.FOREGROUND_RED),this.cmd("SetBackgroundColor",t.parent.right.graphicID,RedBlack.BACKGROUND_RED)):(this.cmd("SetText",0,"Node and parent are both red.  Node is right child, parent is right child\nCan fix extra redness with a single rotation"),this.cmd("Step"),this.singleRotateLeft(t.parent.parent),t.parent.blackLevel=1,this.cmd("SetForegroundColor",t.parent.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",t.parent.graphicID,RedBlack.BACKGROUND_BLACK),t.parent.left.blackLevel=0,this.cmd("SetForegroundColor",t.parent.left.graphicID,RedBlack.FOREGROUND_RED),this.cmd("SetBackgroundColor",t.parent.left.graphicID,RedBlack.BACKGROUND_RED)))}else 0==t.blackLevel&&(this.cmd("SetText",0,"Root of the tree is red.  Color it black"),this.cmd("Step"),t.blackLevel=1,this.cmd("SetForegroundColor",t.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",t.graphicID,RedBlack.BACKGROUND_BLACK))},RedBlack.prototype.deleteElement=function(t){return this.commands=new Array,this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0," "),this.highlightID=this.nextIndex++,this.treeDelete(this.treeRoot,t),this.cmd("SetText",0," "),this.commands},RedBlack.prototype.fixLeftNull=function(t){var e,i=this.nextIndex++;this.cmd("SetText",0,"Coloring 'Null Leaf' double black"),this.cmd("CreateCircle",i,"NULL\nLEAF",t.x,t.y),this.cmd("SetForegroundColor",i,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",i,RedBlack.BACKGROUND_DOUBLE_BLACK),(e=new RedBlackNode("NULL\nLEAF",i,t.x,t.x)).blackLevel=2,e.parent=t,e.phantomLeaf=!0,t.left=e,this.cmd("Connect",t.graphicID,e.graphicID,RedBlack.LINK_COLOR),this.resizeTree(),this.fixExtraBlackChild(t,!0),this.cmd("SetLayer",e.graphicID,1),e.blackLevel=1,this.fixNodeColor(e)},RedBlack.prototype.fixRightNull=function(t){var e,i=this.nextIndex++;this.cmd("SetText",0,"Coloring 'Null Leaf' double black"),this.cmd("CreateCircle",i,"NULL\nLEAF",t.x,t.y),this.cmd("SetForegroundColor",i,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",i,RedBlack.BACKGROUND_DOUBLE_BLACK),(e=new RedBlackNode("NULL\nLEAF",i,t.x,t.x)).parent=t,e.phantomLeaf=!0,e.blackLevel=2,t.right=e,this.cmd("Connect",t.graphicID,e.graphicID,RedBlack.LINK_COLOR),this.resizeTree(),this.fixExtraBlackChild(t,!1),this.cmd("SetLayer",e.graphicID,1),e.blackLevel=1,this.fixNodeColor(e)},RedBlack.prototype.fixExtraBlackChild=function(t,e){var i,s;if(e?(i=t.right,s=t.left):(i=t.left,s=t.right),this.blackLevel(i)>0&&this.blackLevel(i.left)>0&&this.blackLevel(i.right)>0)this.cmd("SetText",0,"Double black node has black sibling and 2 black nephews.  Push up black level"),this.cmd("Step"),i.blackLevel=0,this.fixNodeColor(i),null!=s&&(s.blackLevel=1,this.fixNodeColor(s)),0==t.blackLevel?(t.blackLevel=1,this.fixNodeColor(t)):(t.blackLevel=2,this.fixNodeColor(t),this.cmd("SetText",0,"Pushing up black level created another double black node.  Repeating ..."),this.cmd("Step"),this.fixExtraBlack(t));else if(0==this.blackLevel(i))if(this.cmd("SetText",0,"Double black node has red sibling.  Rotate tree to make sibling black ..."),this.cmd("Step"),e){var h=this.singleRotateLeft(t);h.blackLevel=1,this.fixNodeColor(h),h.left.blackLevel=0,this.fixNodeColor(h.left),this.cmd("Step"),this.fixExtraBlack(h.left.left)}else(h=this.singleRotateRight(t)).blackLevel=1,this.fixNodeColor(h),h.right.blackLevel=0,this.fixNodeColor(h.right),this.cmd("Step"),this.fixExtraBlack(h.right.right);else if(e&&this.blackLevel(i.right)>0){this.cmd("SetText",0,"Double black node has black sibling, but double black node is a left child, \nand the right nephew is black.  Rotate tree to make opposite nephew red ..."),this.cmd("Step");var r=this.singleRotateRight(i);r.blackLevel=1,this.fixNodeColor(r),r.right.blackLevel=0,this.fixNodeColor(r.right),this.cmd("Step"),this.fixExtraBlackChild(t,e)}else if(!e&&this.blackLevel(i.left)>0)this.cmd("SetText",0,"Double black node has black sibling, but double black node is a right child, \nand the left nephew is black.  Rotate tree to make opposite nephew red ..."),this.cmd("Step"),(r=this.singleRotateLeft(i)).blackLevel=1,this.fixNodeColor(r),r.left.blackLevel=0,this.fixNodeColor(r.left),this.cmd("Step"),this.fixExtraBlackChild(t,e);else if(e){this.cmd("SetText",0,"Double black node has black sibling, is a left child, and its right nephew is red.\nOne rotation can fix double-blackness."),this.cmd("Step");var n=t.blackLevel;h=this.singleRotateLeft(t),0==n&&(h.blackLevel=0,this.fixNodeColor(h),h.left.blackLevel=1,this.fixNodeColor(h.left)),h.right.blackLevel=1,this.fixNodeColor(h.right),null!=h.left.left&&(h.left.left.blackLevel=1,this.fixNodeColor(h.left.left))}else this.cmd("SetText",0,"Double black node has black sibling, is a right child, and its left nephew is red.\nOne rotation can fix double-blackness."),this.cmd("Step"),n=t.blackLevel,h=this.singleRotateRight(t),0==n&&(h.blackLevel=0,this.fixNodeColor(h),h.right.blackLevel=1,this.fixNodeColor(h.right)),h.left.blackLevel=1,this.fixNodeColor(h.left),null!=h.right.right&&(h.right.right.blackLevel=1,this.fixNodeColor(h.right.right))},RedBlack.prototype.fixExtraBlack=function(t){t.blackLevel>1&&(null==t.parent?(this.cmd("SetText",0,"Double black node is root.  Make it single black."),this.cmd("Step"),t.blackLevel=1,this.cmd("SetBackgroundColor",t.graphicID,RedBlack.BACKGROUND_BLACK)):t.parent.left==t?this.fixExtraBlackChild(t.parent,!0):this.fixExtraBlackChild(t.parent,!1))},RedBlack.prototype.treeDelete=function(t,e){var i=!1;if(null==t||t.phantomLeaf)this.cmd("SetText",0,"Elemet "+e+" not found, could not delete");else if(null!=t.parent&&(i=t.parent.left==t),this.cmd("SetHighlight",t.graphicID,1),e<t.data?this.cmd("SetText",0,e+" < "+t.data+".  Looking at left subtree"):e>t.data?this.cmd("SetText",0,e+" > "+t.data+".  Looking at right subtree"):this.cmd("SetText",0,e+" == "+t.data+".  Found node to delete"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),e==t.data){var s=t.blackLevel>0;if(null!=t.left&&!t.left.phantomLeaf||null!=t.right&&!t.right.phantomLeaf)if(null==t.left||t.left.phantomLeaf)this.cmd("SetText",0,"Node to delete has no left child.  \nSet parent of deleted node to right child of deleted node."),null!=t.left&&(this.cmd("Delete",t.left.graphicID),t.left=null),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.right.graphicID,RedBlack.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),i?(t.parent.left=t.right,s&&(this.cmd("SetText",0,"Back node removed.  Increasing child's blackness level"),t.parent.left.blackLevel++,this.fixNodeColor(t.parent.left),this.fixExtraBlack(t.parent.left))):(t.parent.right=t.right,s&&(t.parent.right.blackLevel++,this.cmd("SetText",0,"Back node removed.  Increasing child's blackness level"),this.fixNodeColor(t.parent.right),this.fixExtraBlack(t.parent.right))),t.right.parent=t.parent):(this.cmd("Delete",t.graphicID),this.treeRoot=t.right,this.treeRoot.parent=null,0==this.treeRoot.blackLevel&&(this.treeRoot.blackLevel=1,this.cmd("SetForegroundColor",this.treeRoot.graphicID,RedBlack.FOREGROUND_BLACK),this.cmd("SetBackgroundColor",this.treeRoot.graphicID,RedBlack.BACKGROUND_BLACK))),this.resizeTree();else if(null==t.right||t.right.phantomLeaf)this.cmd("SetText",0,"Node to delete has no right child.  \nSet parent of deleted node to left child of deleted node."),null!=t.right&&(this.cmd("Delete",t.right.graphicID),t.right=null),null!=t.parent?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,t.left.graphicID,RedBlack.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",t.graphicID),i?(t.parent.left=t.left,s?(t.parent.left.blackLevel++,this.fixNodeColor(t.parent.left),this.fixExtraBlack(t.parent.left),this.resizeTree()):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.resizeTree())):(t.parent.right=t.left,s?(t.parent.right.blackLevel++,this.fixNodeColor(t.parent.right),this.fixExtraBlack(t.parent.left),this.resizeTree()):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.resizeTree())),t.left.parent=t.parent):(this.cmd("Delete",t.graphicID),this.treeRoot=t.left,this.treeRoot.parent=null,0==this.treeRoot.blackLevel&&(this.treeRoot.blackLevel=1,this.fixNodeColor(this.treeRoot)));else{this.cmd("SetText",0,"Node to delete has two childern.  \nFind largest node in left subtree."),this.highlightID=this.nextIndex,this.nextIndex+=1,this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,t.x,t.y);var h=t;for(h=t.left,this.cmd("Move",this.highlightID,h.x,h.y),this.cmd("Step");null!=h.right&&!h.right.phantomLeaf;)h=h.right,this.cmd("Move",this.highlightID,h.x,h.y),this.cmd("Step");null!=h.right&&(this.cmd("Delete",h.right.graphicID),h.right=null),this.cmd("SetText",t.graphicID," ");var r=this.nextIndex;this.nextIndex+=1,this.cmd("CreateLabel",r,h.data,h.x,h.y),this.cmd("SetForegroundColor",r,BLUE),t.data=h.data,this.cmd("Move",r,t.x,t.y),this.cmd("SetText",0,"Copy largest value of left subtree into node to delete."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Delete",r),this.cmd("SetText",t.graphicID,t.data),this.cmd("Delete",this.highlightID),this.cmd("SetText",0,"Remove node whose value we copied."),s=h.blackLevel>0,null==h.left?(this.cmd("Delete",h.graphicID),h.parent!=t?(h.parent.right=null,this.resizeTree(),s?this.fixRightNull(h.parent):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.cmd("Step"))):(t.left=null,this.resizeTree(),s?this.fixLeftNull(h.parent):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.cmd("Step")))):(this.cmd("Disconnect",h.parent.graphicID,h.graphicID),this.cmd("Connect",h.parent.graphicID,h.left.graphicID,RedBlack.LINK_COLOR),this.cmd("Step"),this.cmd("Delete",h.graphicID),h.parent!=t?(h.parent.right=h.left,h.left.parent=h.parent,this.resizeTree(),s?(this.cmd("SetText",0,"Coloring child of deleted node black"),this.cmd("Step"),h.left.blackLevel++,h.left.phantomLeaf&&this.cmd("SetLayer",h.left.graphicID,0),this.fixNodeColor(h.left),this.fixExtraBlack(h.left),h.left.phantomLeaf&&this.cmd("SetLayer",h.left.graphicID,1)):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.cmd("Step"))):(t.left=h.left,h.left.parent=t,this.resizeTree(),s?(this.cmd("SetText",0,"Coloring child of deleted node black"),this.cmd("Step"),h.left.blackLevel++,h.left.phantomLeaf&&this.cmd("SetLayer",h.left.graphicID,0),this.fixNodeColor(h.left),this.fixExtraBlack(h.left),h.left.phantomLeaf&&this.cmd("SetLayer",h.left.graphicID,1)):(this.cmd("SetText",0,"Deleted node was red.  No tree rotations required."),this.cmd("Step")))),h=h.parent}else this.cmd("SetText",0,"Node to delete is a leaf.  Delete it."),this.cmd("Delete",t.graphicID),null!=t.left&&this.cmd("Delete",t.left.graphicID),null!=t.right&&this.cmd("Delete",t.right.graphicID),i&&null!=t.parent?(t.parent.left=null,this.resizeTree(),s?this.fixLeftNull(t.parent):(this.attachLeftNullLeaf(t.parent),this.resizeTree())):null!=t.parent?(t.parent.right=null,this.resizeTree(),s?this.fixRightNull(t.parent):(this.attachRightNullLeaf(t.parent),this.resizeTree())):this.treeRoot=null}else e<t.data?(null!=t.left&&(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.left,e)):(null!=t.right&&(this.cmd("CreateHighlightCircle",this.highlightID,RedBlack.HIGHLIGHT_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)),this.treeDelete(t.right,e))},RedBlack.prototype.fixNodeColor=function(t){0==t.blackLevel?(this.cmd("SetForegroundColor",t.graphicID,RedBlack.FOREGROUND_RED),this.cmd("SetBackgroundColor",t.graphicID,RedBlack.BACKGROUND_RED)):(this.cmd("SetForegroundColor",t.graphicID,RedBlack.FOREGROUND_BLACK),t.blackLevel>1?this.cmd("SetBackgroundColor",t.graphicID,RedBlack.BACKGROUND_DOUBLE_BLACK):this.cmd("SetBackgroundColor",t.graphicID,RedBlack.BACKGROUND_BLACK))},RedBlack.prototype.resizeTree=function(){var t=this.startingX;this.resizeWidths(this.treeRoot),null!=this.treeRoot&&(this.treeRoot.leftWidth>t?t=this.treeRoot.leftWidth:this.treeRoot.rightWidth>t&&(t=Math.max(this.treeRoot.leftWidth,2*t-this.treeRoot.rightWidth)),this.setNewPositions(this.treeRoot,t,startingY,0),this.animateNewPositions(this.treeRoot),this.cmd("Step"))},RedBlack.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?(e-=t.rightWidth,t.heightLabelX=e-20):1==s?(e+=t.leftWidth,t.heightLabelX=e+20):t.heightLabelX=e-20,t.x=e,t.heightLabelY=t.y-20,this.setNewPositions(t.left,e,i+heightDelta,-1),this.setNewPositions(t.right,e,i+heightDelta,1))},RedBlack.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},RedBlack.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),widthDelta/2),t.rightWidth=Math.max(this.resizeWidths(t.right),widthDelta/2),t.leftWidth+t.rightWidth)},RedBlack.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},RedBlack.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},RedBlackNode.prototype.isLeftChild=function(){return null==this.parent||this.parent.left==this},SplayTree.LINK_COLOR="#007700",SplayTree.HIGHLIGHT_CIRCLE_COLOR="#007700",SplayTree.FOREGROUND_COLOR="#007700",SplayTree.BACKGROUND_COLOR="#EEFFEE",SplayTree.PRINT_COLOR=SplayTree.FOREGROUND_COLOR,SplayTree.WIDTH_DELTA=50,SplayTree.HEIGHT_DELTA=50,SplayTree.STARTING_Y=50,SplayTree.FIRST_PRINT_POS_X=50,SplayTree.PRINT_VERTICAL_GAP=20,SplayTree.PRINT_HORIZONTAL_GAP=50,SplayTree.inheritFrom(Algorithm),SplayTree.prototype.init=function(t,e,i){var s=SplayTree.superclass;this.startingX=e/2,this.first_print_pos_y=i-2*SplayTree.PRINT_VERTICAL_GAP,this.print_max=e-10,s.init.call(this,t),this.addControls(),this.nextIndex=0,this.commands=[],this.cmd("CreateLabel",0,"",20,10,0),this.nextIndex=1,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},SplayTree.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),4),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),4),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},SplayTree.prototype.reset=function(){this.nextIndex=1,this.treeRoot=null},SplayTree.prototype.insertCallback=function(t){var e=this.insertField.value;""!=(e=this.normalizeNumber(e,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},SplayTree.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(e=this.normalizeNumber(e,4),this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},SplayTree.prototype.splay=function(t){return null!=this.treeRoot&&(this.treeRoot.data==t||(t<this.treeRoot.data?null!=this.treeRoot.left&&(this.treeRoot.left.data==t?(this.singleRotateRight(this.treeRoot),!0):t<this.treeRoot.left.data?null==this.treeRoot.left.left?(this.singleRotateRight(this.treeRoot),this.splay(t)):(this.zigZigRight(this.treeRoot),this.splay(t)):null==this.treeRoot.left.right?(this.singleRotateRight(this.treeRoot),this.splay(t)):(this.doubleRotateRight(this.treeRoot),this.splay(t))):null!=this.treeRoot.right&&(this.treeRoot.right.data==t?(this.singleRotateLeft(this.treeRoot),!0):t>this.treeRoot.right.data?null==this.treeRoot.right.right?(this.singleRotateLeft(this.treeRoot),this.splay(t)):(this.zigZigLeft(this.treeRoot),this.splay(t)):null==this.treeRoot.right.left?(this.singleRotateLeft(this.treeRoot),this.splay(t)):(this.doubleRotateLeft(this.treeRot),this.splay(t)))))},SplayTree.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},SplayTree.prototype.printTree=function(t){if(this.commands=[],null!=this.treeRoot){this.highlightID=this.nextIndex++;var e=this.nextIndex;this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.xPosOfNextLabel=SplayTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.treeRoot),this.cmd("Delete",this.highlightID),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},SplayTree.prototype.printTreeRec=function(t){this.cmd("Step"),null!=t.left&&(this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.printTreeRec(t.left),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"));var e=this.nextIndex++;this.cmd("CreateLabel",e,t.data,t.x,t.y),this.cmd("SetForegroundColor",e,SplayTree.PRINT_COLOR),this.cmd("Move",e,this.xPosOfNextLabel,this.yPosOfNextLabel),this.cmd("Step"),this.xPosOfNextLabel+=SplayTree.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=SplayTree.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=SplayTree.PRINT_VERTICAL_GAP),null!=t.right&&(this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.printTreeRec(t.right),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"))},SplayTree.prototype.findCallback=function(t){var e;e=this.normalizeNumber(this.findField.value,4),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},SplayTree.prototype.findElement=function(t){return this.commands=[],this.highlightID=this.nextIndex++,this.doFind(this.treeRoot,t)?this.cmd("SetText",0,"Element "+t+" found."):this.cmd("SetText",0,"Element "+t+" not found."),this.commands},SplayTree.prototype.doFind=function(t,e){return this.cmd("SetText",0,"Searching for "+e),null!=t?(this.cmd("SetHighlight",t.graphicID,1),t.data==e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" = "+e+" (Element found!)"),this.cmd("Step"),this.cmd("SetText",0,"Splaying found node to root of tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.splayUp(t),!0):t.data>e?(this.cmd("SetText",0,"Searching for "+e+" : "+e+" < "+t.data+" (look to left subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.left?(this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.doFind(t.left,e)):(this.splayUp(t),!1)):(this.cmd("SetText",0,"Searching for "+e+" : "+e+" > "+t.data+" (look to right subtree)"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.right?(this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.doFind(t.right,e)):(this.splayUp(t),!1))):(this.cmd("SetText",0,"Searching for "+e+" : < Empty Tree > (Element not found)"),this.cmd("Step"),this.cmd("SetText",0,"Searching for "+e+" :  (Element not found)"),!1)},SplayTree.prototype.insertElement=function(t){if(this.commands=new Array,this.cmd("SetText",0,"Inserting "+t),this.highlightID=this.nextIndex++,null==this.treeRoot)this.cmd("CreateCircle",this.nextIndex,t,this.startingX,SplayTree.STARTING_Y),this.cmd("SetForegroundColor",this.nextIndex,SplayTree.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,SplayTree.BACKGROUND_COLOR),this.cmd("Step"),this.treeRoot=new BSTNode(t,this.nextIndex,this.startingX,SplayTree.STARTING_Y),this.nextIndex+=1;else{this.cmd("CreateCircle",this.nextIndex,t,100,100),this.cmd("SetForegroundColor",this.nextIndex,SplayTree.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,SplayTree.BACKGROUND_COLOR),this.cmd("Step");var e=new BSTNode(t,this.nextIndex,100,100);this.nextIndex+=1,this.cmd("SetHighlight",e.graphicID,1),this.insert(e,this.treeRoot),this.resizeTree(),this.cmd("SetText",0,"Splay inserted element to root of tree"),this.cmd("Step"),this.splayUp(e)}return this.cmd("SetText",0,""),this.commands},SplayTree.prototype.insert=function(t,e){this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",t.graphicID,1),t.data<e.data?this.cmd("SetText",0,t.data+" < "+e.data+".  Looking at left subtree"):this.cmd("SetText",0,t.data+" >= "+e.data+".  Looking at right subtree"),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",t.graphicID,0),t.data<e.data?null==e.left?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetHighlight",t.graphicID,0),e.left=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,SplayTree.LINK_COLOR)):(this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.left.x,e.left.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.left)):null==e.right?(this.cmd("SetText",0,"Found null tree, inserting element"),this.cmd("SetHighlight",t.graphicID,0),e.right=t,t.parent=e,this.cmd("Connect",e.graphicID,t.graphicID,SplayTree.LINK_COLOR),t.x=e.x+SplayTree.WIDTH_DELTA/2,t.y=e.y+SplayTree.HEIGHT_DELTA,this.cmd("Move",t.graphicID,t.x,t.y)):(this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("Move",this.highlightID,e.right.x,e.right.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.insert(t,e.right))},SplayTree.prototype.deleteElement=function(t){return this.commands=[],this.cmd("SetText",0,"Deleting "+t),this.cmd("Step"),this.cmd("SetText",0,""),this.highlightID=this.nextIndex++,this.treeDelete(this.treeRoot,t),this.cmd("SetText",0,""),this.commands},SplayTree.prototype.treeDelete=function(t,e){this.cmd("SetText",0,"Finding "+e+" and splaying to rooot"),this.cmd("Step");var i=this.doFind(this.treeRoot,e);if(this.cmd("SetText",0,"Removing root, leaving left and right trees"),this.cmd("Step"),i)if(null==this.treeRoot.right)this.cmd("Delete",this.treeRoot.graphicID),this.cmd("SetText",0,"No right tree, make left tree the root."),this.cmd("Step"),this.treeRoot=this.treeRoot.left,this.treeRoot.parent=null,this.resizeTree();else if(null==this.treeRoot.left)this.cmd("Delete",this.treeRoot.graphicID),this.cmd("SetText",0,"No left tree, make right tree the root."),this.cmd("Step"),this.treeRoot=this.treeRoot.right,this.treeRoot.parent=null,this.resizeTree();else{var s=this.treeRoot.right,h=this.treeRoot.left,r=this.treeRoot.graphicID;this.cmd("Disconnect",this.treeRoot.graphicID,h.graphicID),this.cmd("Disconnect",this.treeRoot.graphicID,s.graphicID),this.cmd("SetAlpha",this.treeRoot.graphicID,0),this.cmd("SetText",0,"Splay largest element in left tree to root"),this.cmd("Step"),h.parent=null;var n=this.findMax(h);this.splayUp(n),this.cmd("SetText",0,"Left tree now has no right subtree, connect left and right trees"),this.cmd("Step"),this.cmd("Connect",n.graphicID,s.graphicID,SplayTree.LINK_COLOR),n.parent=null,n.right=s,s.parent=n,this.treeRoot=n,this.cmd("Delete",r),this.resizeTree()}},SplayTree.prototype.singleRotateRight=function(t){var e=t,i=(e.right,t.left),s=(i.left,i.right);this.cmd("SetText",0,"Zig Right"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,SplayTree.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),i.parent=e.parent,null==e.parent?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,SplayTree.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,SplayTree.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.right=e,e.parent=i,e.left=s,this.resizeTree()},SplayTree.prototype.zigZigRight=function(t){var e=t,i=t.left,s=t.left.left,h=(s.left,s.right),r=i.right;e.right;this.cmd("SetText",0,"Zig-Zig Right"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("SetEdgeHighlight",i.graphicID,s.graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,0),this.cmd("SetEdgeHighlight",i.graphicID,s.graphicID,0),null!=e.parent?(this.cmd("Disconnect",e.parent.graphicID,e.graphicID),this.cmd("Connect",e.parent.graphicID,s.graphicID,SplayTree.LINK_COLOR),e.isLeftChild()?e.parent.left=s:e.parent.right=s):this.treeRoot=s,null!=h&&(this.cmd("Disconnect",s.graphicID,h.graphicID),this.cmd("Connect",i.graphicID,h.graphicID,SplayTree.LINK_COLOR),h.parent=i),null!=r&&(this.cmd("Disconnect",i.graphicID,r.graphicID),this.cmd("Connect",e.graphicID,r.graphicID,SplayTree.LINK_COLOR),r.parent=e),this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",s.graphicID,i.graphicID,SplayTree.LINK_COLOR),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),s.right=i,s.parent=e.parent,i.parent=s,i.left=h,i.right=e,e.parent=i,e.left=r,this.resizeTree()},SplayTree.prototype.zigZigLeft=function(t){var e=t,i=t.right,s=t.right.right,h=(e.left,i.left),r=s.left;s.right;this.cmd("SetText",0,"Zig-Zig Left"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("SetEdgeHighlight",i.graphicID,s.graphicID,1),this.cmd("Step"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,0),this.cmd("SetEdgeHighlight",i.graphicID,s.graphicID,0),null!=e.parent?(this.cmd("Disconnect",e.parent.graphicID,e.graphicID),this.cmd("Connect",e.parent.graphicID,s.graphicID,SplayTree.LINK_COLOR),e.isLeftChild()?e.parent.left=s:e.parent.right=s):this.treeRoot=s,null!=h&&(this.cmd("Disconnect",i.graphicID,h.graphicID),this.cmd("Connect",e.graphicID,h.graphicID,SplayTree.LINK_COLOR),h.parent=e),null!=r&&(this.cmd("Disconnect",s.graphicID,r.graphicID),this.cmd("Connect",i.graphicID,r.graphicID,SplayTree.LINK_COLOR),r.parent=i),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",s.graphicID,i.graphicID,SplayTree.LINK_COLOR),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),s.parent=e.parent,e.right=h,i.left=e,e.parent=i,i.right=r,s.left=i,i.parent=s,this.resizeTree()},SplayTree.prototype.singleRotateLeft=function(t){var e=t,i=t.right,s=(e.left,i.left);i.right;this.cmd("SetText",0,"Zig Left"),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=s&&(this.cmd("Disconnect",i.graphicID,s.graphicID),this.cmd("Connect",e.graphicID,s.graphicID,SplayTree.LINK_COLOR),s.parent=e),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),i.parent=e.parent,null==e.parent?this.treeRoot=i:(this.cmd("Disconnect",e.parent.graphicID,e.graphicID,SplayTree.LINK_COLOR),this.cmd("Connect",e.parent.graphicID,i.graphicID,SplayTree.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i),i.left=e,e.parent=i,e.right=s,this.resizeTree()},SplayTree.prototype.splayUp=function(t){null!=t.parent&&(null==t.parent.parent?t.isLeftChild()?this.singleRotateRight(t.parent):this.singleRotateLeft(t.parent):t.isLeftChild()&&!t.parent.isLeftChild()?(this.doubleRotateLeft(t.parent.parent),this.splayUp(t)):!t.isLeftChild()&&t.parent.isLeftChild()?(this.doubleRotateRight(t.parent.parent),this.splayUp(t)):t.isLeftChild()?(this.zigZigRight(t.parent.parent),this.splayUp(t)):(this.zigZigLeft(t.parent.parent),this.splayUp(t)))},SplayTree.prototype.findMax=function(t){if(null!=t.right){for(this.highlightID=this.nextIndex++,this.cmd("CreateHighlightCircle",this.highlightID,SplayTree.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("Step");null!=t.right;)this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),t=t.right;return this.cmd("Delete",this.highlightID),t}return t},SplayTree.prototype.doubleRotateRight=function(t){this.cmd("SetText",0,"Zig-Zag Right");var e=t.left,i=t.left.right,s=t,h=(e.left,i.left),r=i.right;s.right;this.cmd("SetEdgeHighlight",s.graphicID,e.graphicID,1),this.cmd("SetEdgeHighlight",e.graphicID,i.graphicID,1),this.cmd("Step"),null!=h&&(this.cmd("Disconnect",i.graphicID,h.graphicID),h.parent=e,e.right=h,this.cmd("Connect",e.graphicID,h.graphicID,SplayTree.LINK_COLOR)),null!=r&&(this.cmd("Disconnect",i.graphicID,r.graphicID),r.parent=s,s.left=h,this.cmd("Connect",s.graphicID,r.graphicID,SplayTree.LINK_COLOR)),null==s.parent?(i.parent=null,this.treeRoot=i):(this.cmd("Disconnect",s.parent.graphicID,s.graphicID),this.cmd("Connect",s.parent.graphicID,i.graphicID,SplayTree.LINK_COLOR),s.isLeftChild()?s.parent.left=i:s.parent.right=i,i.parent=s.parent,s.parent=i),this.cmd("Disconnect",s.graphicID,e.graphicID),this.cmd("Disconnect",e.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),this.cmd("Connect",i.graphicID,s.graphicID,SplayTree.LINK_COLOR),i.left=e,e.parent=i,i.right=s,s.parent=i,e.right=h,s.left=r,this.resizeTree()},SplayTree.prototype.doubleRotateLeft=function(t){this.cmd("SetText",0,"Zig-Zag Left");var e=t,i=t.right.left,s=t.right,h=(e.left,i.left),r=i.right;s.right;this.cmd("SetEdgeHighlight",e.graphicID,s.graphicID,1),this.cmd("SetEdgeHighlight",s.graphicID,i.graphicID,1),this.cmd("Step"),null!=h&&(this.cmd("Disconnect",i.graphicID,h.graphicID),h.parent=e,e.right=h,this.cmd("Connect",e.graphicID,h.graphicID,SplayTree.LINK_COLOR)),null!=r&&(this.cmd("Disconnect",i.graphicID,r.graphicID),r.parent=s,s.left=h,this.cmd("Connect",s.graphicID,r.graphicID,SplayTree.LINK_COLOR)),null==e.parent?(i.parent=null,this.treeRoot=i):(this.cmd("Disconnect",e.parent.graphicID,e.graphicID),this.cmd("Connect",e.parent.graphicID,i.graphicID,SplayTree.LINK_COLOR),e.isLeftChild()?e.parent.left=i:e.parent.right=i,i.parent=e.parent,e.parent=i),this.cmd("Disconnect",e.graphicID,s.graphicID),this.cmd("Disconnect",s.graphicID,i.graphicID),this.cmd("Connect",i.graphicID,e.graphicID,SplayTree.LINK_COLOR),this.cmd("Connect",i.graphicID,s.graphicID,SplayTree.LINK_COLOR),i.left=e,e.parent=i,i.right=s,s.parent=i,e.right=h,s.left=r,this.resizeTree()},SplayTree.prototype.resizeTree=function(){var t=this.startingX;this.resizeWidths(this.treeRoot),null!=this.treeRoot&&(this.treeRoot.leftWidth>t?t=this.treeRoot.leftWidth:this.treeRoot.rightWidth>t&&(t=Math.max(this.treeRoot.leftWidth,2*t-this.treeRoot.rightWidth)),this.setNewPositions(this.treeRoot,t,SplayTree.STARTING_Y,0),this.animateNewPositions(this.treeRoot),this.cmd("Step"))},SplayTree.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?e-=t.rightWidth:1==s&&(e+=t.leftWidth),t.x=e,this.setNewPositions(t.left,e,i+SplayTree.HEIGHT_DELTA,-1),this.setNewPositions(t.right,e,i+SplayTree.HEIGHT_DELTA,1))},SplayTree.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},SplayTree.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),SplayTree.WIDTH_DELTA/2),t.rightWidth=Math.max(this.resizeWidths(t.right),SplayTree.WIDTH_DELTA/2),t.leftWidth+t.rightWidth)},BSTNode.prototype.isLeftChild=function(){return null==this.parent||this.parent.left==this},SplayTree.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},SplayTree.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},Trie.NODE_WIDTH=30,Trie.LINK_COLOR="#007700",Trie.HIGHLIGHT_CIRCLE_COLOR="#007700",Trie.FOREGROUND_COLOR="#007700",Trie.BACKGROUND_COLOR="#CCFFCC",Trie.TRUE_COLOR="#CCFFCC",Trie.PRINT_COLOR=Trie.FOREGROUND_COLOR,Trie.FALSE_COLOR="#FFFFFF",Trie.WIDTH_DELTA=50,Trie.HEIGHT_DELTA=50,Trie.STARTING_Y=80,Trie.LeftMargin=300,Trie.NEW_NODE_Y=100,Trie.NEW_NODE_X=50,Trie.FIRST_PRINT_POS_X=50,Trie.PRINT_VERTICAL_GAP=20,Trie.PRINT_HORIZONTAL_GAP=50,Trie.inheritFrom(Algorithm),Trie.prototype.init=function(t,e,i){var s=Trie.superclass;this.startingX=e/2,this.first_print_pos_y=i-2*Trie.PRINT_VERTICAL_GAP,this.print_max=e-10,s.init.call(this,t),this.addControls(),this.nextIndex=0,this.commands=[],this.cmd("CreateLabel",0,"",20,10,0),this.cmd("CreateLabel",1,"",20,10,0),this.cmd("CreateLabel",2,"",20,30,0),this.nextIndex=3,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},Trie.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeypress=this.returnSubmit(this.insertField,this.insertCallback.bind(this),12,!1),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),12),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),12),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},Trie.prototype.reset=function(){this.nextIndex=3,this.root=null},Trie.prototype.insertCallback=function(t){var e=this.insertField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.insertField.value="",this.implementAction(this.add.bind(this),e))},Trie.prototype.deleteCallback=function(t){var e=this.deleteField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},Trie.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},Trie.prototype.findCallback=function(t){var e=this.findField.value.toUpperCase();finndValue=e.replace(/[^a-z]/gi,""),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},Trie.prototype.printTree=function(t){if(this.commands=[],null!=this.root){this.highlightID=this.nextIndex++,this.printLabel1=this.nextIndex++,this.printLabel2=this.nextIndex++;var e=this.nextIndex++;this.cmd("CreateLabel",e,"Output: ",Trie.FIRST_PRINT_POS_X,this.first_print_pos_y),this.cmd("CreateHighlightCircle",this.highlightID,Trie.HIGHLIGHT_CIRCLE_COLOR,this.root.x,this.root.y),this.cmd("SetWidth",this.highlightID,Trie.NODE_WIDTH),this.cmd("CreateLabel",this.printLabel1,"Current String: ",20,10,0),this.cmd("CreateLabel",this.printLabel2,"",20,10,0),this.cmd("AlignRight",this.printLabel2,this.printLabel1),this.xPosOfNextLabel=Trie.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.root,""),this.cmd("Delete",this.highlightID),this.cmd("Delete",this.printLabel1),this.cmd("Delete",this.printLabel2),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},Trie.prototype.printTreeRec=function(t,e){if(t.wordRemainder,t.isword){var i=this.nextIndex++;this.cmd("CreateLabel",i,e+"  ",20,10,0),this.cmd("SetForegroundColor",i,Trie.PRINT_COLOR),this.cmd("AlignRight",i,this.printLabel1,Trie.PRINT_COLOR),this.cmd("MoveToAlignRight",i,i-1),this.cmd("Step"),this.xPosOfNextLabel+=Trie.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=Trie.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=Trie.PRINT_VERTICAL_GAP)}for(var s=0;s<26;s++)if(null!=t.children[s]){var h=e+t.children[s].wordRemainder,r=(i=this.nextIndex++,(t.children[s].x+t.x)/2+Trie.NODE_WIDTH/2),n=(t.children[s].y+t.y)/2;this.cmd("CreateLabel",i,t.children[s].wordRemainder,r,n,0),this.cmd("MoveToAlignRight",i,this.printLabel2),this.cmd("Move",this.highlightID,t.children[s].x,t.children[s].y),this.cmd("Step"),this.cmd("Delete",i),this.nextIndex--,this.cmd("SetText",this.printLabel2,h),this.printTreeRec(t.children[s],h),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("SetText",this.printLabel2,e),this.cmd("Step")}},Trie.prototype.findElement=function(t){return this.commands=[],this.commands=new Array,this.cmd("SetText",0,"Finding: "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step"),null!=this.doFind(this.root,t)?this.cmd("SetText",0,'Found "'+t+'"'):this.cmd("SetText",0,'"'+t+'" not Found'),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Trie.prototype.doFind=function(t,e){if(null==t)return null;if(this.cmd("SetHighlight",t.graphicID,1),0==e.length)return 1==t.isword?(this.cmd("SetText",2,"Reached the end of the string \nCurrent node is True\nWord is in the tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),t):(this.cmd("SetText",2,"Reached the end of the string \nCurrent node is False\nWord is Not the tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null);this.cmd("SetHighlightIndex",1,1);var i=e.charCodeAt(0)-"A".charCodeAt(0);return null==t.children[i]?(this.cmd("SetText",2,"Child "+e.charAt(0)+" does not exist\nWord is Not the tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null):(this.cmd("CreateHighlightCircle",this.highlightID,Trie.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("SetWidth",this.highlightID,Trie.NODE_WIDTH),this.cmd("SetText",2,"Making recursive call to "+e.charAt(0)+" child, passing in "+e.substring(1)),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetText",1,'"'+e.substring(1)+'"'),this.cmd("Move",this.highlightID,t.children[i].x,t.children[i].y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.doFind(t.children[i],e.substring(1)))},Trie.prototype.insertElement=function(t){return this.cmd("SetText",0,""),this.commands},Trie.prototype.insert=function(t,e){},Trie.prototype.deleteElement=function(t){this.commands=[],this.cmd("SetText",0,"Deleting: "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step");var e=this.doFind(this.root,t);return null!=e?(this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetText",2,'Found "'+t+'", setting value in tree to False'),this.cmd("step"),this.cmd("SetBackgroundColor",e.graphicID,Trie.FALSE_COLOR),e.isword=!1,this.cmd("SetHighlight",e.graphicID,0),this.cleanupAfterDelete(e),this.resizeTree()):(this.cmd("SetText",2,'"'+t+'" not in tree, nothing to delete'),this.cmd("step"),this.cmd("SetHighlightIndex",1,-1)),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Trie.prototype.numChildren=function(t){if(null==t)return 0;for(var e=0,i=0;i<26;i++)null!=t.children[i]&&e++;return e},Trie.prototype.cleanupAfterDelete=function(t){if(0==this.numChildren(t)&&!t.isword)if(this.cmd("SetText",2,'Deletion left us with a "False" leaf\nRemoving false leaf'),this.cmd("SetHighlight",t.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null!=t.parent){for(var e=0;t.parent.children[e]!=t;)e++;this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Delete",t.graphicID,0),t.parent.children[e]=null,this.cleanupAfterDelete(t.parent)}else this.cmd("Delete",t.graphicID,0),this.root=null},Trie.prototype.resizeTree=function(){if(this.resizeWidths(this.root),null!=this.root){var t=this.root.width/2+1+Trie.LeftMargin;this.setNewPositions(this.root,t,Trie.STARTING_Y),this.animateNewPositions(this.root),this.cmd("Step")}},Trie.prototype.add=function(t){return this.commands=new Array,this.cmd("SetText",0,"Inserting; "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step"),null==this.root&&(this.cmd("CreateCircle",this.nextIndex,"",Trie.NEW_NODE_X,Trie.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,Trie.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,Trie.FALSE_COLOR),this.cmd("SetWidth",this.nextIndex,Trie.NODE_WIDTH),this.cmd("SetText",2,"Creating a new root"),this.root=new TrieNode("",this.nextIndex,Trie.NEW_NODE_X,Trie.NEW_NODE_Y),this.cmd("Step"),this.resizeTree(),this.cmd("SetText",2,""),this.highlightID=this.nextIndex++,this.nextIndex+=1),this.addR(t.toUpperCase(),this.root),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Trie.prototype.addR=function(t,e){if(this.cmd("SetHighlight",e.graphicID,1),0==t.length)return this.cmd("SetText",2,"Reached the end of the string \nSet current node to true"),this.cmd("Step"),this.cmd("SetBackgroundColor",e.graphicID,Trie.TRUE_COLOR),this.cmd("SetHighlight",e.graphicID,0),void(e.isword=!0);this.cmd("SetHighlightIndex",1,1);var i=t.charCodeAt(0)-"A".charCodeAt(0);null==e.children[i]&&(this.cmd("CreateCircle",this.nextIndex,t.charAt(0),Trie.NEW_NODE_X,Trie.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,Trie.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,Trie.FALSE_COLOR),this.cmd("SetWidth",this.nextIndex,Trie.NODE_WIDTH),this.cmd("SetText",2,"Child "+t.charAt(0)+" does not exist.  Creating ... "),e.children[i]=new TrieNode(t.charAt(0),this.nextIndex,Trie.NEW_NODE_X,Trie.NEW_NODE_Y),e.children[i].parent=e,this.cmd("Connect",e.graphicID,e.children[i].graphicID,Trie.FOREGROUND_COLOR,0,!1,t.charAt(0)),this.cmd("Step"),this.resizeTree(),this.cmd("SetText",2,""),this.nextIndex+=1,this.highlightID=this.nextIndex++),this.cmd("CreateHighlightCircle",this.highlightID,Trie.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("SetWidth",this.highlightID,Trie.NODE_WIDTH),this.cmd("SetText",2,"Making recursive call to "+t.charAt(0)+' child, passing in "'+t.substring(1)+'"'),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetText",1,'"'+t.substring(1)+'"'),this.cmd("Move",this.highlightID,e.children[i].x,e.children[i].y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.addR(t.substring(1),e.children[i])},Trie.prototype.setNewPositions=function(t,e,i){if(null!=t){t.x=e,t.y=i;for(var s=e-t.width/2,h=i+Trie.HEIGHT_DELTA,r=0;r<26;r++)null!=t.children[r]&&(this.setNewPositions(t.children[r],s+t.children[r].width/2,h),s+=t.children[r].width)}},Trie.prototype.animateNewPositions=function(t){if(null!=t){this.cmd("Move",t.graphicID,t.x,t.y);for(var e=0;e<26;e++)this.animateNewPositions(t.children[e])}},Trie.prototype.resizeWidths=function(t){if(null==t)return 0;for(var e=0,i=0;i<26;i++)t.childWidths[i]=this.resizeWidths(t.children[i]),e+=t.childWidths[i];return t.width=Math.max(e,Trie.NODE_WIDTH+4),t.width},Trie.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},Trie.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},Ternary.NODE_WIDTH=30,Ternary.CENTER_LINK_COLOR="#007700",Ternary.SIDE_LINK_COLOR="#8888AA",Ternary.HIGHLIGHT_CIRCLE_COLOR="#007700",Ternary.FOREGROUND_COLOR="#007700",Ternary.BACKGROUND_COLOR="#CCFFCC",Ternary.TRUE_COLOR="#CCFFCC",Ternary.PRINT_COLOR=Ternary.FOREGROUND_COLOR,Ternary.FALSE_COLOR="#FFFFFF",Ternary.WIDTH_DELTA=50,Ternary.HEIGHT_DELTA=50,Ternary.STARTING_Y=20,Ternary.LeftMargin=300,Ternary.NEW_NODE_Y=100,Ternary.NEW_NODE_X=50,Ternary.FIRST_PRINT_POS_X=50,Ternary.PRINT_VERTICAL_GAP=20,Ternary.PRINT_HORIZONTAL_GAP=50,Ternary.inheritFrom(Algorithm),Ternary.prototype.init=function(t,e,i){var s=Ternary.superclass;this.startingX=e/2,this.first_print_pos_y=i-2*Ternary.PRINT_VERTICAL_GAP,this.print_max=e-10,s.init.call(this,t),this.addControls(),this.nextIndex=0,this.commands=[],this.cmd("CreateLabel",0,"",20,10,0),this.cmd("CreateLabel",1,"",20,10,0),this.cmd("CreateLabel",2,"",20,30,0),this.nextIndex=3,this.root=null,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},Ternary.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeypress=this.returnSubmit(this.insertField,this.insertCallback.bind(this),12,!1),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.onkeydown=this.returnSubmit(this.deleteField,this.deleteCallback.bind(this),12),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.onkeydown=this.returnSubmit(this.findField,this.findCallback.bind(this),12),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this),this.printButton=this.addControlToAlgorithmBar("Button","Print"),this.printButton.onclick=this.printCallback.bind(this)},Ternary.prototype.reset=function(){this.nextIndex=3,this.root=null},Ternary.prototype.insertCallback=function(t){var e=this.insertField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.insertField.value="",this.implementAction(this.add.bind(this),e))},Ternary.prototype.deleteCallback=function(t){var e=this.deleteField.value.toUpperCase();""!=(e=e.replace(/[^a-z]/gi,""))&&(this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},Ternary.prototype.cleanupAfterDelete=function(t){if(null!=t){if(null!=t.center)return this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetText",2,"Clerning up after delete ...\nTree has center child, no more cleanup required"),this.cmd("step"),this.cmd("SetText",2,""),void this.cmd("SetHighlight",t.graphicID,0);if(null==t.center&&null==t.right&&null==t.left&&1==t.isword)return this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetText",2,"Clerning up after delete ...\nLeaf at end of word, no more cleanup required"),this.cmd("step"),this.cmd("SetText",2,""),void this.cmd("SetHighlight",t.graphicID,0);if(null==t.center&&null==t.left&&null==t.right)this.cmd("SetText",2,"Clearning up after delete ..."),this.cmd("SetHighlight",t.graphicID,1),this.cmd("step"),this.cmd("Delete",t.graphicID),null==t.parent?this.root=null:t.parent.left==t?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),t.parent.left=null):t.parent.right==t?(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),t.parent.right=null):t.parent.center==t&&(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),t.parent.center=null,t.parent.charAt=" ",this.cmd("SetText",t.parent.graphicID," ")),this.cleanupAfterDelete(t.parent);else if(null==t.left&&null==t.center||null==t.right&&null==t.center){var e=null;if(e=null!=t.left?t.left:t.right,this.cmd("Disconnect",t.graphicID,e.graphicID),null==t.parent)this.cmd("Delete",t.graphicID),this.root=e;else if(t.parent.left==t)this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,e.graphicID,Ternary.SIDE_LINK_COLOR,1e-4,!1,"<"+t.parent.nextChar),t.parent.left=e,e.parent=t.parent,this.cmd("Step"),this.cmd("Delete",t.graphicID);else if(t.parent.right==t)this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,e.graphicID,Ternary.SIDE_LINK_COLOR,-1e-4,!1,">"+t.parent.nextChar),t.parent.right=e,e.parent=t.parent,this.cmd("Step"),this.cmd("Delete",t.graphicID);else{if(t.parent.center!=t)throw"What??";this.cmd("Disconnect",t.parent.graphicID,t.graphicID),this.cmd("Connect",t.parent.graphicID,e.graphicID,Ternary.CENTER_LINK_COLOR,1e-4,!1,"="+t.parent.nextChar),e.parent=t.parent,t.parent.center=e,this.cmd("Step"),this.cmd("Delete",t.graphicID)}}else if(null!=t.right&&null==t.center&&null!=t.right){var i=t.left;t.parent;for(this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("Move",this.highlightID,i.x,i.y),this.cmd("Step");null!=i.right;)i=i.right,this.cmd("Move",this.highlightID,i.x,i.y),this.cmd("Step");t.left!=i?(this.cmd("Disconnect",i.parent.graphicID,i.graphicID),i.parent.right=i.left,null!=i.left&&(i.left.parent=i.parent,this.cmd("Disconnect",i.graphicID,i.left.graphicID),this.cmd("Connect",i.parent.graphicID,i.left.graphicID,Ternary.CENTER_LINK_COLOR,-1e-4,!1,">"+i.parent.nextChar)),this.cmd("Disconnect",t.graphicID,t.right.graphicID),this.cmd("Disconnect",t.graphicID,t.left.graphicID),i.right=t.right,i.left=t.left,t.right.parent=i,t.left.parent=i,this.cmd("Connect",i.graphicID,i.left.graphicID,Ternary.SIDE_LINK_COLOR,1e-4,!1,"<"+i.nextChar),this.cmd("Connect",i.graphicID,i.right.graphicID,Ternary.SIDE_LINK_COLOR,-1e-4,!1,">"+i.nextChar)):(this.cmd("Disconnect",t.graphicID,t.left.graphicID),this.cmd("Disconnect",t.graphicID,t.right.graphicID),i.right=t.right,i.right.parent=i,this.cmd("Connect",i.graphicID,i.right.graphicID,Ternary.SIDE_LINK_COLOR,-1e-4,!1,">"+i.nextChar)),this.cmd("Delete",this.highlightID),this.cmd("Delete",t.graphicID),this.cmd("Step"),i.parent=t.parent,null==i.parent?this.root=i:(this.cmd("Disconnect",t.parent.graphicID,t.graphicID),t.parent.left==t?(t.parent.left=i,i.parent=t.parent,this.cmd("Connect",i.parent.graphicID,i.graphicID,Ternary.SIDE_LINK_COLOR,1e-4,!1,"<"+i.parent.nextChar)):t.parent.right==t?(t.parent.right=i,i.parent=t.parent,this.cmd("Connect",i.parent.graphicID,i.graphicID,Ternary.SIDE_LINK_COLOR,-1e-4,!1,">"+i.parent.nextChar)):t.parent.center==t&&(t.parent.center=i,i.parent=t.parent,this.cmd("Connect",i.parent.graphicID,i.graphicID,Ternary.CENTER_LINK_COLOR,1e-4,!1,"="+i.parent.nextChar)))}}},Ternary.prototype.deleteElement=function(t){this.commands=[],this.cmd("SetText",0,"Deleting: "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step");var e=this.doFind(this.root,t);return null!=e?(this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetText",2,'Found "'+t+'", setting value in tree to False'),this.cmd("step"),this.cmd("SetBackgroundColor",e.graphicID,Ternary.FALSE_COLOR),e.isword=!1,this.cmd("SetHighlight",e.graphicID,0),this.cleanupAfterDelete(e),this.resizeTree()):(this.cmd("SetText",2,'"'+t+'" not in tree, nothing to delete'),this.cmd("step"),this.cmd("SetHighlightIndex",1,-1)),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Ternary.prototype.printCallback=function(t){this.implementAction(this.printTree.bind(this),"")},Ternary.prototype.printTree=function(t){if(this.commands=[],null!=this.root){this.highlightID=this.nextIndex++,this.printLabel1=this.nextIndex++,this.printLabel2=this.nextIndex++;var e=this.nextIndex++;this.cmd("CreateLabel",e,"Output: ",Ternary.FIRST_PRINT_POS_X,this.first_print_pos_y),this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,this.root.x,this.root.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("CreateLabel",this.printLabel1,"Current String: ",20,10,0),this.cmd("CreateLabel",this.printLabel2,"",20,10,0),this.cmd("AlignRight",this.printLabel2,this.printLabel1),this.xPosOfNextLabel=Ternary.FIRST_PRINT_POS_X,this.yPosOfNextLabel=this.first_print_pos_y,this.printTreeRec(this.root,""),this.cmd("Delete",this.highlightID),this.cmd("Delete",this.printLabel1),this.cmd("Delete",this.printLabel2),this.cmd("Step");for(var i=e;i<this.nextIndex;i++)this.cmd("Delete",i);this.nextIndex=this.highlightID}return this.commands},Ternary.prototype.printTreeRec=function(t,e){if(t.isword){var i=this.nextIndex++;this.cmd("CreateLabel",i,e+"  ",20,10,0),this.cmd("SetForegroundColor",i,Ternary.PRINT_COLOR),this.cmd("AlignRight",i,this.printLabel1,Ternary.PRINT_COLOR),this.cmd("MoveToAlignRight",i,i-1),this.cmd("Step"),this.xPosOfNextLabel+=Ternary.PRINT_HORIZONTAL_GAP,this.xPosOfNextLabel>this.print_max&&(this.xPosOfNextLabel=Ternary.FIRST_PRINT_POS_X,this.yPosOfNextLabel+=Ternrary.PRINT_VERTICAL_GAP)}if(null!=t.left&&(this.cmd("Move",this.highlightID,t.left.x,t.left.y),this.cmd("Step"),this.printTreeRec(t.left,e),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step")),null!=t.center){i=this.nextIndex;this.cmd("CreateLabel",i,t.nextChar,t.x,t.y,0),this.cmd("MoveToAlignRight",i,this.printLabel2),this.cmd("Move",this.highlightID,t.center.x,t.center.y),this.cmd("Step"),this.cmd("Delete",i),this.cmd("SetText",this.printLabel2,e+t.nextChar),this.printTreeRec(t.center,e+t.nextChar),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("SetText",this.printLabel2,e),this.cmd("Step")}null!=t.right&&(this.cmd("Move",this.highlightID,t.right.x,t.right.y),this.cmd("Step"),this.printTreeRec(t.right,e),this.cmd("Move",this.highlightID,t.x,t.y),this.cmd("Step"))},Ternary.prototype.findCallback=function(t){var e=this.findField.value.toUpperCase();finndValue=e.replace(/[^a-z]/gi,""),this.findField.value="",this.implementAction(this.findElement.bind(this),e)},Ternary.prototype.findElement=function(t){return this.commands=[],this.commands=new Array,this.cmd("SetText",0,"Finding: "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step"),null!=this.doFind(this.root,t)?this.cmd("SetText",0,'Found "'+t+'"'):this.cmd("SetText",0,'"'+t+'" not Found'),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Ternary.prototype.doFind=function(t,e){if(null==t)return this.cmd("SetText",2,"Reached null tree\nWord is not in the tree"),this.cmd("Step"),null;if(this.cmd("SetHighlight",t.graphicID,1),0==e.length)return 1==t.isword?(this.cmd("SetText",2,"Reached the end of the string \nCurrent node is True\nWord is in the tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),t):(this.cmd("SetText",2,"Reached the end of the string \nCurrent node is False\nWord is Not the tree"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),null);this.cmd("SetHighlightIndex",1,1);var i=null;return" "==t.nextChar?(this.cmd("SetText",2,"Reached a leaf without a character, still have characeters left in search string \nString is not in the tree"),this.cmd("Step"),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetHighlight",t.graphicID,0),null):(t.nextChar==e.charAt(0)?(this.cmd("SetText",2,"Next character in string  matches character at current node\nRecursively look at center child, \nremoving first letter from search string"),this.cmd("Step"),e=e.substring(1),i=t.center):t.nextChar>e.charAt(0)?(this.cmd("SetText",2,"Next character in string < Character at current node\nRecursively look at left node, \nleaving search string as it is"),this.cmd("Step"),i=t.left):(this.cmd("SetText",2,"Next character in string > Character at current node\nRecursively look at left right, \nleaving search string as it is"),this.cmd("Step"),i=t.right),null!=i?(this.cmd("SetText",1,'"'+e+'"'),this.cmd("SetHighlightIndex",1,-1),this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,t.x,t.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("SetHighlight",t.graphicID,0),this.cmd("Move",this.highlightID,i.x,i.y),this.cmd("Step"),this.cmd("Delete",this.highlightID)):this.cmd("SetHighlight",t.graphicID,0),this.doFind(i,e))},Ternary.prototype.insertElement=function(t){return this.cmd("SetText",0,""),this.commands},Ternary.prototype.insert=function(t,e){},Ternary.prototype.resizeTree=function(){if(this.resizeWidths(this.root),null!=this.root){var t=Ternary.LeftMargin;null==this.root.left?t+=Ternary.NODE_WIDTH/2:t+=this.root.left.width,this.setNewPositions(this.root,t,Ternary.STARTING_Y),this.animateNewPositions(this.root),this.cmd("Step")}},Ternary.prototype.add=function(t){return this.commands=new Array,this.cmd("SetText",0,"Inserting; "),this.cmd("SetText",1,'"'+t+'"'),this.cmd("AlignRight",1,0),this.cmd("Step"),null==this.root&&(this.cmd("CreateCircle",this.nextIndex," ",Ternary.NEW_NODE_X,Ternary.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,Ternary.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,Ternary.FALSE_COLOR),this.cmd("SetWidth",this.nextIndex,Ternary.NODE_WIDTH),this.cmd("SetText",2,"Creating a new root"),this.root=new TernaryNode(" ",this.nextIndex,Ternary.NEW_NODE_X,Ternary.NEW_NODE_Y),this.cmd("Step"),this.resizeTree(),this.cmd("SetText",2,""),this.nextIndex+=1,this.highlightID=this.nextIndex++),this.addR(t.toUpperCase(),this.root),this.cmd("SetText",0,""),this.cmd("SetText",1,""),this.cmd("SetText",2,""),this.commands},Ternary.prototype.createIfNotExtant=function(t,e,i){if(null==e){this.cmd("CreateCircle",this.nextIndex," ",Ternary.NEW_NODE_X,Ternary.NEW_NODE_Y),this.cmd("SetForegroundColor",this.nextIndex,Ternary.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.nextIndex,Ternary.FALSE_COLOR),this.cmd("SetWidth",this.nextIndex,Ternary.NODE_WIDTH),this.cmd("SetText",2,"Creating a new node"),e=new TernaryNode(" ",this.nextIndex,Ternary.NEW_NODE_X,Ternary.NEW_NODE_Y),this.cmd("Step");var s=1e-4;">"==i.charAt(0)&&(s=-1e-4);var h=Ternary.FOREGROUND_COLOR;h="="==i.charAt(0)?Ternary.CENTER_LINK_COLOR:Ternary.SIDE_LINK_COLOR,this.cmd("Connect",t.graphicID,this.nextIndex,h,s,!1,i),this.cmd("SetText",2,""),this.nextIndex++,this.highlightID=this.nextIndex++}return e},Ternary.prototype.addR=function(t,e){if(this.cmd("SetHighlight",e.graphicID,1),0==t.length)return this.cmd("SetText",2,"Reached the end of the string \nSet current node to true"),this.cmd("Step"),this.cmd("SetBackgroundColor",e.graphicID,Ternary.TRUE_COLOR),this.cmd("SetHighlight",e.graphicID,0),void(e.isword=!0);if(this.cmd("SetHighlightIndex",1,1)," "==e.nextChar)e.nextChar=t.charAt(0),this.cmd("SetText",2,"No character for this node, setting to "+t.charAt(0)),this.cmd("SetText",e.graphicID,t.charAt(0)),this.cmd("Step"),null==e.center&&(e.center=this.createIfNotExtant(e,e.center,"="+t.charAt(0)),e.center.parent=e,this.resizeTree()),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetText",1,'"'+t.substring(1)+'"'),this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("Move",this.highlightID,e.center.x,e.center.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.addR(t.substring(1),e.center);else if(e.nextChar==t.charAt(0))this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("SetText",2,'Making recursive call to center child, passing in "'+t.substring(1)+'"'),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlightIndex",1,-1),this.cmd("SetText",1,'"'+t.substring(1)+'"'),this.cmd("Move",this.highlightID,e.center.x,e.center.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.addR(t.substring(1),e.center);else{var i=null,s="";e.nextChar>t.charAt(0)?(s="<"+e.nextChar,this.cmd("SetText",2,'Next character in stirng is < value stored at current node \n Making recursive call to left child passing in "'+t+'"'),e.left=this.createIfNotExtant(e,e.left,s),e.left.parent=e,this.resizeTree(),i=e.left):(s=">"+e.nextChar,this.cmd("SetText",2,'Next character in stirng is > value stored at current node \n Making recursive call to right child passing in "'+t+'"'),e.right=this.createIfNotExtant(e,e.right,s),e.right.parent=e,i=e.right,this.resizeTree()),this.cmd("CreateHighlightCircle",this.highlightID,Ternary.HIGHLIGHT_CIRCLE_COLOR,e.x,e.y),this.cmd("SetWidth",this.highlightID,Ternary.NODE_WIDTH),this.cmd("Step"),this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlightIndex",1,-1),this.cmd("Move",this.highlightID,i.x,i.y),this.cmd("Step"),this.cmd("Delete",this.highlightID),this.addR(t,i)}},Ternary.prototype.setNewPositions=function(t,e,i){if(null!=t){t.x=e+Ternary.NODE_WIDTH/2,t.y=i;var s=i+Ternary.HEIGHT_DELTA;null!=t.left&&this.setNewPositions(t.left,e,s),null!=t.center&&(this.setNewPositions(t.center,e+t.leftWidth,s),t.x=t.center.x),null!=t.right&&this.setNewPositions(t.right,e+t.leftWidth+t.centerWidth,s)}},Ternary.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.animateNewPositions(t.left),this.animateNewPositions(t.center),this.animateNewPositions(t.right))},Ternary.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=this.resizeWidths(t.left),t.centerWidth=this.resizeWidths(t.center),t.rightWidth=this.resizeWidths(t.right),t.width=Math.max(t.leftWidth+t.centerWidth+t.rightWidth,Ternary.NODE_WIDTH+4),t.width)},Ternary.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0,this.printButton.disabled=!0},Ternary.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1,this.printButton.disabled=!1},Heap.inheritFrom(Algorithm),Heap.ARRAY_SIZE=32,Heap.ARRAY_ELEM_WIDTH=30,Heap.ARRAY_ELEM_HEIGHT=25,Heap.ARRAY_INITIAL_X=30,Heap.ARRAY_Y_POS=50,Heap.ARRAY_LABEL_Y_POS=70,Heap.prototype.init=function(t){Heap.superclass.init.call(this,t),this.addControls(),this.nextIndex=0,this.HeapXPositions=[0,450,250,650,150,350,550,750,100,200,300,400,500,600,700,800,61,125,175,225,275,325,375,425,475,525,575,625,675,725,775,825],this.HeapYPositions=[0,100,170,170,240,240,240,240,310,310,310,310,310,310,310,310,380,380,380,380,380,380,380,380,380,380,380,380,380,380,380,380],this.commands=[],this.createArray()},Heap.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4,!0),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.removeSmallestButton=this.addControlToAlgorithmBar("Button","Remove Smallest"),this.removeSmallestButton.onclick=this.removeSmallestCallback.bind(this),this.clearHeapButton=this.addControlToAlgorithmBar("Button","Clear Heap"),this.clearHeapButton.onclick=this.clearCallback.bind(this),this.buildHeapButton=this.addControlToAlgorithmBar("Button","BuildHeap"),this.buildHeapButton.onclick=this.buildHeapCallback.bind(this)},Heap.prototype.createArray=function(){this.arrayData=new Array(Heap.ARRAY_SIZE),this.arrayLabels=new Array(Heap.ARRAY_SIZE),this.arrayRects=new Array(Heap.ARRAY_SIZE),this.circleObjs=new Array(Heap.ARRAY_SIZE),this.ArrayXPositions=new Array(Heap.ARRAY_SIZE),this.currentHeapSize=0;for(var t=0;t<Heap.ARRAY_SIZE;t++)this.ArrayXPositions[t]=Heap.ARRAY_INITIAL_X+t*Heap.ARRAY_ELEM_WIDTH,this.arrayLabels[t]=this.nextIndex++,this.arrayRects[t]=this.nextIndex++,this.circleObjs[t]=this.nextIndex++,this.cmd("CreateRectangle",this.arrayRects[t],"",Heap.ARRAY_ELEM_WIDTH,Heap.ARRAY_ELEM_HEIGHT,this.ArrayXPositions[t],Heap.ARRAY_Y_POS),this.cmd("CreateLabel",this.arrayLabels[t],t,this.ArrayXPositions[t],Heap.ARRAY_LABEL_Y_POS),this.cmd("SetForegroundColor",this.arrayLabels[t],"#0000FF");this.cmd("SetText",this.arrayRects[0],"-INF"),this.swapLabel1=this.nextIndex++,this.swapLabel2=this.nextIndex++,this.swapLabel3=this.nextIndex++,this.swapLabel4=this.nextIndex++,this.descriptLabel1=this.nextIndex++,this.descriptLabel2=this.nextIndex++,this.cmd("CreateLabel",this.descriptLabel1,"",20,10,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},Heap.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},Heap.prototype.clearCallback=function(t){this.commands=new Array,this.implementAction(this.clear.bind(this),"")},Heap.prototype.clear=function(){for(;this.currentHeapSize>0;)this.cmd("Delete",this.circleObjs[this.currentHeapSize]),this.cmd("SetText",this.arrayRects[this.currentHeapSize],""),this.currentHeapSize--;return this.commands},Heap.prototype.reset=function(){this.currentHeapSize=0},Heap.prototype.removeSmallestCallback=function(t){this.implementAction(this.removeSmallest.bind(this),"")},Heap.prototype.swap=function(t,e){this.cmd("SetText",this.arrayRects[t],""),this.cmd("SetText",this.arrayRects[e],""),this.cmd("SetText",this.circleObjs[t],""),this.cmd("SetText",this.circleObjs[e],""),this.cmd("CreateLabel",this.swapLabel1,this.arrayData[t],this.ArrayXPositions[t],Heap.ARRAY_Y_POS),this.cmd("CreateLabel",this.swapLabel2,this.arrayData[e],this.ArrayXPositions[e],Heap.ARRAY_Y_POS),this.cmd("CreateLabel",this.swapLabel3,this.arrayData[t],this.HeapXPositions[t],this.HeapYPositions[t]),this.cmd("CreateLabel",this.swapLabel4,this.arrayData[e],this.HeapXPositions[e],this.HeapYPositions[e]),this.cmd("Move",this.swapLabel1,this.ArrayXPositions[e],Heap.ARRAY_Y_POS),this.cmd("Move",this.swapLabel2,this.ArrayXPositions[t],Heap.ARRAY_Y_POS),this.cmd("Move",this.swapLabel3,this.HeapXPositions[e],this.HeapYPositions[e]),this.cmd("Move",this.swapLabel4,this.HeapXPositions[t],this.HeapYPositions[t]);var i=this.arrayData[t];this.arrayData[t]=this.arrayData[e],this.arrayData[e]=i,this.cmd("Step"),this.cmd("SetText",this.arrayRects[t],this.arrayData[t]),this.cmd("SetText",this.arrayRects[e],this.arrayData[e]),this.cmd("SetText",this.circleObjs[t],this.arrayData[t]),this.cmd("SetText",this.circleObjs[e],this.arrayData[e]),this.cmd("Delete",this.swapLabel1),this.cmd("Delete",this.swapLabel2),this.cmd("Delete",this.swapLabel3),this.cmd("Delete",this.swapLabel4)},Heap.prototype.setIndexHighlight=function(t,e){this.cmd("SetHighlight",this.circleObjs[t],e),this.cmd("SetHighlight",this.arrayRects[t],e)},Heap.prototype.pushDown=function(t){for(var e;;){if(2*t>this.currentHeapSize)return;if(e=2*t,2*t+1<=this.currentHeapSize&&(this.setIndexHighlight(2*t,1),this.setIndexHighlight(2*t+1,1),this.cmd("Step"),this.setIndexHighlight(2*t,0),this.setIndexHighlight(2*t+1,0),this.compare(this.arrayData[2*t+1],this.arrayData[2*t])<0&&(e=2*t+1)),this.setIndexHighlight(t,1),this.setIndexHighlight(e,1),this.cmd("Step"),this.setIndexHighlight(t,0),this.setIndexHighlight(e,0),!(this.compare(this.arrayData[e],this.arrayData[t])<0))return;this.swap(e,t),t=e}},Heap.prototype.removeSmallest=function(t){return this.commands=new Array,this.cmd("SetText",this.descriptLabel1,""),0==this.currentHeapSize?(this.cmd("SetText",this.descriptLabel1,"Heap is empty, cannot remove smallest element"),this.commands):(this.cmd("SetText",this.descriptLabel1,"Removing element:"),this.cmd("CreateLabel",this.descriptLabel2,this.arrayData[1],this.HeapXPositions[1],this.HeapYPositions[1],0),this.cmd("SetText",this.circleObjs[1],""),this.cmd("Move",this.descriptLabel2,120,40),this.cmd("Step"),this.cmd("Delete",this.descriptLabel2),this.cmd("SetText",this.descriptLabel1,"Removing element: "+this.arrayData[1]),this.arrayData[1]="",this.currentHeapSize>1?(this.cmd("SetText",this.arrayRects[1],""),this.cmd("SetText",this.arrayRects[this.currentHeapSize],""),this.swap(1,this.currentHeapSize),this.cmd("Delete",this.circleObjs[this.currentHeapSize]),this.currentHeapSize--,this.pushDown(1)):(this.cmd("SetText",this.arrayRects[1],""),this.cmd("Delete",this.circleObjs[this.currentHeapSize]),this.currentHeapSize--),this.commands)},Heap.prototype.buildHeapCallback=function(t){this.implementAction(this.buildHeap.bind(this),"")},Heap.prototype.buildHeap=function(t){if(this.commands=[],this.clear(),t){for(var e=0;e<t.length;e++)this.arrayData[e+1]=t[e];this.currentHeapSize=t.length}else{for(e=1;e<Heap.ARRAY_SIZE;e++)this.arrayData[e]=this.normalizeNumber(String(Heap.ARRAY_SIZE-e),4);this.currentHeapSize=Heap.ARRAY_SIZE-1}for(e=1;e<=this.currentHeapSize;e++)this.cmd("CreateCircle",this.circleObjs[e],this.arrayData[e],this.HeapXPositions[e],this.HeapYPositions[e]),this.cmd("SetText",this.arrayRects[e],this.arrayData[e]),e>1&&this.cmd("Connect",this.circleObjs[Math.floor(e/2)],this.circleObjs[e]);this.cmd("Step");for(var i=this.currentHeapSize;i>0;)this.pushDown(i),i-=1;return this.commands},Heap.prototype.insertElement=function(t){if(this.commands=new Array,this.currentHeapSize>=Heap.ARRAY_SIZE-1)return this.cmd("SetText",this.descriptLabel1,"Heap Full!"),this.commands;this.cmd("SetText",this.descriptLabel1,"Inserting Element: "+t),this.cmd("Step"),this.cmd("SetText",this.descriptLabel1,"Inserting Element: "),this.currentHeapSize++,this.arrayData[this.currentHeapSize]=t,this.cmd("CreateCircle",this.circleObjs[this.currentHeapSize],"",this.HeapXPositions[this.currentHeapSize],this.HeapYPositions[this.currentHeapSize]),this.cmd("CreateLabel",this.descriptLabel2,t,120,45,1),this.currentHeapSize>1&&this.cmd("Connect",this.circleObjs[Math.floor(this.currentHeapSize/2)],this.circleObjs[this.currentHeapSize]),this.cmd("Move",this.descriptLabel2,this.HeapXPositions[this.currentHeapSize],this.HeapYPositions[this.currentHeapSize]),this.cmd("Step"),this.cmd("SetText",this.circleObjs[this.currentHeapSize],t),this.cmd("delete",this.descriptLabel2),this.cmd("SetText",this.arrayRects[this.currentHeapSize],t);var e=this.currentHeapSize,i=Math.floor(e/2);for(e>1&&(this.setIndexHighlight(e,1),this.setIndexHighlight(i,1),this.cmd("Step"),this.setIndexHighlight(e,0),this.setIndexHighlight(i,0));e>1&&this.compare(this.arrayData[e],this.arrayData[i])<0;)this.swap(e,i),e=i,i=Math.floor(i/2),e>1&&(this.setIndexHighlight(e,1),this.setIndexHighlight(i,1),this.cmd("Step"),this.setIndexHighlight(e,0),this.setIndexHighlight(i,0));return this.cmd("SetText",this.descriptLabel1,""),this.commands},Heap.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.removeSmallestButton.disabled=!0,this.clearHeapButton.disabled=!0,this.buildHeapButton.disabled=!0},Heap.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.removeSmallestButton.disabled=!1,this.clearHeapButton.disabled=!1,this.buildHeapButton.disabled=!1},BinomialQueue.LINK_COLOR="#007700",BinomialQueue.HIGHLIGHT_CIRCLE_COLOR="#007700",BinomialQueue.MERGE_SEPARATING_LINE_COLOR="#0000FF",BinomialQueue.FOREGROUND_COLOR="#007700",BinomialQueue.BACKGROUND_COLOR="#EEFFEE",BinomialQueue.DEGREE_OFFSET_X=-20,BinomialQueue.DEGREE_OFFSET_Y=-20,BinomialQueue.DELETE_LAB_X=30,BinomialQueue.DELETE_LAB_Y=50,BinomialQueue.NODE_WIDTH=60,BinomialQueue.NODE_HEIGHT=70,BinomialQueue.STARTING_X=70,BinomialQueue.STARTING_Y=80,BinomialQueue.INSERT_X=30,BinomialQueue.INSERT_Y=25,BinomialQueue.inheritFrom(Algorithm),BinomialQueue.prototype.init=function(t,e,i){BinomialQueue.superclass.init.call(this,t,e,i),this.addControls(),this.treeRoot=null,this.currentLayer=1,this.animationManager.setAllLayers([0,this.currentLayer]),this.nextIndex=0},BinomialQueue.prototype.addControls=function(){this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.removeSmallestButton=this.addControlToAlgorithmBar("Button","Remove Smallest"),this.removeSmallestButton.onclick=this.removeSmallestCallback.bind(this),this.controls.push(this.removeSmallestButton),this.clearHeapButton=this.addControlToAlgorithmBar("Button","Clear Heap"),this.clearHeapButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearHeapButton);var t=this.addRadioButtonGroupToAlgorithmBar(["Logical Representation","Internal Representation"],"BQueueRep");t[0].onclick=this.representationChangedHandler.bind(this,!0),t[1].onclick=this.representationChangedHandler.bind(this,!1),t[0].checked=!0},BinomialQueue.prototype.representationChangedHandler=function(t,e){t?(this.animationManager.setAllLayers([0,1]),this.currentLayer=1):(this.animationManager.setAllLayers([0,2]),this.currentLayer=2)},BinomialQueue.prototype.setPositions=function(t,e,i){if(null!=t){if(0==t.degree)return t.x=e,t.y=i,this.setPositions(t.rightSib,e+BinomialQueue.NODE_WIDTH,i);if(1==t.degree)return t.x=e,t.y=i,this.setPositions(t.leftChild,e,i+BinomialQueue.NODE_HEIGHT),this.setPositions(t.rightSib,e+BinomialQueue.NODE_WIDTH,i);var s=Math.pow(2,t.degree-1);return t.x=e+(s-1)*BinomialQueue.NODE_WIDTH,t.y=i,this.setPositions(t.leftChild,e,i+BinomialQueue.NODE_HEIGHT),this.setPositions(t.rightSib,e+s*BinomialQueue.NODE_WIDTH,i)}return e},BinomialQueue.prototype.moveTree=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.cmd("Move",t.internalGraphicID,t.x,t.y),this.cmd("Move",t.degreeID,t.x+BinomialQueue.DEGREE_OFFSET_X,t.y+BinomialQueue.DEGREE_OFFSET_Y),this.moveTree(t.leftChild),this.moveTree(t.rightSib))},BinomialQueue.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},BinomialQueue.prototype.clearCallback=function(t){this.clear()},BinomialQueue.prototype.clear=function(){this.commands=new Array,this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.actionHistory=new Array},BinomialQueue.prototype.reset=function(){this.treeRoot=null,this.nextIndex=0},BinomialQueue.prototype.removeSmallestCallback=function(t){this.implementAction(this.removeSmallest.bind(this),"")},BinomialQueue.prototype.removeSmallest=function(t){if(this.commands=new Array,null!=this.treeRoot){var e,i,s=this.treeRoot;for(this.cmd("SetHighlight",s.graphicID,1),this.cmd("SetHighlight",s.internalGraphicID,1),e=this.treeRoot.rightSib;null!=e;e=e.rightSib)this.cmd("SetHighlight",e.graphicID,1),this.cmd("SetHighlight",e.internalGraphicID,1),this.cmd("Step"),e.data<s.data?(this.cmd("SetHighlight",s.graphicID,0),this.cmd("SetHighlight",s.internalGraphicID,0),s=e):(this.cmd("SetHighlight",e.graphicID,0),this.cmd("SetHighlight",e.internalGraphicID,0));if(s==this.treeRoot)this.treeRoot=this.treeRoot.rightSib,i=null;else{for(i=this.treeRoot;i.rightSib!=s;i=i.rightSib);i.rightSib=i.rightSib.rightSib}var h=this.nextIndex++;for(this.cmd("SetText",s.graphicID,""),this.cmd("SetText",s.internalGraphicID,""),this.cmd("CreateLabel",h,s.data,s.x,s.y),this.cmd("Move",h,BinomialQueue.DELETE_LAB_X,BinomialQueue.DELETE_LAB_Y),this.cmd("Step"),null!=i&&null!=i.rightSib&&this.cmd("Connect",i.internalGraphicID,i.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),this.cmd("Delete",s.graphicID),this.cmd("Delete",s.internalGraphicID),this.cmd("Delete",s.degreeID),this.secondaryTreeRoot=this.reverse(s.leftChild),e=this.secondaryTreeRoot;null!=e;e=e.rightSib)e.parent=null;this.merge(),this.cmd("Delete",h)}return this.commands},BinomialQueue.prototype.reverse=function(t){for(var e,i=null;null!=t;)null!=t.rightSib&&(this.cmd("Disconnect",t.internalGraphicID,t.rightSib.internalGraphicID),this.cmd("Connect",t.rightSib.internalGraphicID,t.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"")),e=t,t=t.rightSib,e.rightSib=i,e.parent=null,i=e;return i},BinomialQueue.prototype.insertElement=function(t){this.commands=new Array;var e=new BinomialNode(t,this.nextIndex++,BinomialQueue.INSERT_X,BinomialQueue.INSERT_Y);return e.internalGraphicID=this.nextIndex++,e.degreeID=this.nextIndex++,this.cmd("CreateCircle",e.graphicID,t,BinomialQueue.INSERT_X,BinomialQueue.INSERT_Y),this.cmd("SetForegroundColor",e.graphicID,BinomialQueue.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",e.graphicID,BinomialQueue.BACKGROUND_COLOR),this.cmd("SetLayer",e.graphicID,1),this.cmd("CreateCircle",e.internalGraphicID,t,BinomialQueue.INSERT_X,BinomialQueue.INSERT_Y),this.cmd("SetForegroundColor",e.internalGraphicID,BinomialQueue.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",e.internalGraphicID,BinomialQueue.BACKGROUND_COLOR),this.cmd("SetLayer",e.internalGraphicID,2),this.cmd("CreateLabel",e.degreeID,e.degree,e.x+BinomialQueue.DEGREE_OFFSET_X,e.y+BinomialQueue.DEGREE_OFFSET_Y),this.cmd("SetTextColor",e.degreeID,"#0000FF"),this.cmd("SetLayer",e.degreeID,2),this.cmd("Step"),null==this.treeRoot?(this.treeRoot=e,this.setPositions(this.treeRoot,BinomialQueue.STARTING_X,BinomialQueue.STARTING_Y),this.moveTree(this.treeRoot)):(this.secondaryTreeRoot=e,this.merge()),this.commands},BinomialQueue.prototype.merge=function(){if(null==this.treeRoot)return this.treeRoot=this.secondaryTreeRoot,this.secondaryTreeRoot=null,this.setPositions(this.treeRoot,BinomialQueue.NODE_WIDTH,BinomialQueue.STARTING_Y),void this.moveTree(this.treeRoot);var t=this.setPositions(this.treeRoot,BinomialQueue.STARTING_X,BinomialQueue.STARTING_Y);this.setPositions(this.secondaryTreeRoot,t+BinomialQueue.NODE_WIDTH,BinomialQueue.STARTING_Y),this.moveTree(this.secondaryTreeRoot),this.moveTree(this.treeRoot);var e=this.nextIndex++;for(this.cmd("CreateRectangle",e,"",0,200,t,50,"left","top"),this.cmd("SetForegroundColor",e,BinomialQueue.MERGE_SEPARATING_LINE_COLOR),this.cmd("SetLayer",e,0),this.cmd("Step");null!=this.secondaryTreeRoot;){var i=this.secondaryTreeRoot;if(this.secondaryTreeRoot=this.secondaryTreeRoot.rightSib,null!=this.secondaryTreeRoot&&this.cmd("Disconnect",i.internalGraphicID,this.secondaryTreeRoot.internalGraphicID),i.degree<=this.treeRoot.degree)i.rightSib=this.treeRoot,this.treeRoot=i,this.cmd("Connect",this.treeRoot.internalGraphicID,this.treeRoot.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"");else{for(var s=this.treeRoot;null!=s.rightSib&&s.rightSib.degree<i.degree;)s=s.rightSib;null!=s.rightSib&&(this.cmd("Disconnect",s.internalGraphicID,s.rightSib.internalGraphicID),this.cmd("Connect",i.internalGraphicID,s.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"")),i.rightSib=s.rightSib,s.rightSib=i,this.cmd("Connect",s.internalGraphicID,i.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"")}t=this.setPositions(this.treeRoot,BinomialQueue.STARTING_X,BinomialQueue.STARTING_Y),this.setPositions(this.secondaryTreeRoot,t+BinomialQueue.NODE_WIDTH,BinomialQueue.STARTING_Y),this.moveTree(this.secondaryTreeRoot),this.moveTree(this.treeRoot),this.cmd("Move",e,t,50),this.cmd("Step")}this.cmd("Delete",e),this.combineNodes()},BinomialQueue.prototype.combineNodes=function(){for(var t,e;null!=this.treeRoot&&null!=this.treeRoot.rightSib&&this.treeRoot.degree==this.treeRoot.rightSib.degree&&(null==this.treeRoot.rightSib.rightSib||this.treeRoot.rightSib.degree!=this.treeRoot.rightSib.rightSib.degree);)this.cmd("Disconnect",this.treeRoot.internalGraphicID,this.treeRoot.rightSib.internalGraphicID),null!=this.treeRoot.rightSib.rightSib&&this.cmd("Disconnect",this.treeRoot.rightSib.internalGraphicID,this.treeRoot.rightSib.rightSib.internalGraphicID),this.treeRoot.data<this.treeRoot.rightSib.data?(t=this.treeRoot.rightSib,this.treeRoot.rightSib=t.rightSib,t.rightSib=this.treeRoot.leftChild,this.treeRoot.leftChild=t,t.parent=this.treeRoot):(t=this.treeRoot,this.treeRoot=this.treeRoot.rightSib,t.rightSib=this.treeRoot.leftChild,this.treeRoot.leftChild=t,t.parent=this.treeRoot),this.cmd("Connect",this.treeRoot.graphicID,this.treeRoot.leftChild.graphicID,BinomialQueue.FOREGROUND_COLOR,0,0,""),this.cmd("Connect",this.treeRoot.internalGraphicID,this.treeRoot.leftChild.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",this.treeRoot.leftChild.internalGraphicID,this.treeRoot.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),null!=this.treeRoot.leftChild.rightSib&&(this.cmd("Disconnect",this.treeRoot.internalGraphicID,this.treeRoot.leftChild.rightSib.internalGraphicID),this.cmd("Connect",this.treeRoot.leftChild.internalGraphicID,this.treeRoot.leftChild.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"")),null!=this.treeRoot.rightSib&&this.cmd("Connect",this.treeRoot.internalGraphicID,this.treeRoot.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),this.treeRoot.degree++,this.cmd("SetText",this.treeRoot.degreeID,this.treeRoot.degree),this.setPositions(this.treeRoot,BinomialQueue.STARTING_X,BinomialQueue.STARTING_Y),this.moveTree(this.treeRoot),this.cmd("Step");for(e=this.treeRoot;null!=e&&null!=e.rightSib&&null!=e.rightSib.rightSib;)if(e.rightSib.degree!=e.rightSib.rightSib.degree)e=e.rightSib;else if(null!=e.rightSib.rightSib.rightSib&&e.rightSib.rightSib.degree==e.rightSib.rightSib.rightSib.degree)e=e.rightSib;else{var i;this.cmd("Disconnect",e.rightSib.internalGraphicID,e.rightSib.rightSib.internalGraphicID),this.cmd("Disconnect",e.internalGraphicID,e.rightSib.internalGraphicID),null!=e.rightSib.rightSib.rightSib&&this.cmd("Disconnect",e.rightSib.rightSib.internalGraphicID,e.rightSib.rightSib.rightSib.internalGraphicID),e.rightSib.data<e.rightSib.rightSib.data?(t=e.rightSib.rightSib,e.rightSib.rightSib=t.rightSib,t.rightSib=e.rightSib.leftChild,e.rightSib.leftChild=t,t.parent=e.rightSib,e.rightSib.degree++,this.cmd("SetText",e.rightSib.degreeID,e.rightSib.degree),i=e.rightSib):(t=e.rightSib,e.rightSib=e.rightSib.rightSib,t.rightSib=e.rightSib.leftChild,e.rightSib.leftChild=t,t.parent=e.rightSib,e.rightSib.degree++,this.cmd("SetText",e.rightSib.degreeID,e.rightSib.degree),i=e.rightSib),this.cmd("Connect",i.graphicID,i.leftChild.graphicID,BinomialQueue.FOREGROUND_COLOR,0,0,""),this.cmd("Connect",i.internalGraphicID,i.leftChild.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",i.leftChild.internalGraphicID,i.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",e.internalGraphicID,i.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),null!=i.leftChild.rightSib&&(this.cmd("Disconnect",i.internalGraphicID,i.leftChild.rightSib.internalGraphicID),this.cmd("Connect",i.leftChild.internalGraphicID,i.leftChild.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,"")),null!=i.rightSib&&this.cmd("Connect",i.internalGraphicID,i.rightSib.internalGraphicID,BinomialQueue.FOREGROUND_COLOR,0,1,""),this.setPositions(this.treeRoot,BinomialQueue.STARTING_X,BinomialQueue.STARTING_Y),this.moveTree(this.treeRoot),this.cmd("Step")}},BinomialQueue.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},BinomialQueue.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},FibonacciHeap.LINK_COLOR="#007700",FibonacciHeap.FOREGROUND_COLOR="#007700",FibonacciHeap.BACKGROUND_COLOR="#EEFFEE",FibonacciHeap.INDEX_COLOR="#0000FF",FibonacciHeap.DEGREE_OFFSET_X=-20,FibonacciHeap.DEGREE_OFFSET_Y=-20,FibonacciHeap.DELETE_LAB_X=30,FibonacciHeap.DELETE_LAB_Y=50,FibonacciHeap.NODE_WIDTH=60,FibonacciHeap.NODE_HEIGHT=70,FibonacciHeap.STARTING_X=70,FibonacciHeap.INSERT_X=30,FibonacciHeap.INSERT_Y=25,FibonacciHeap.STARTING_Y=100,FibonacciHeap.MAX_DEGREE=7,FibonacciHeap.DEGREE_ARRAY_ELEM_WIDTH=30,FibonacciHeap.DEGREE_ARRAY_ELEM_HEIGHT=30,FibonacciHeap.DEGREE_ARRAY_START_X=500,FibonacciHeap.INDEGREE_ARRAY_START_Y=50,FibonacciHeap.TMP_PTR_Y=60,FibonacciHeap.inheritFrom(Algorithm),FibonacciHeap.prototype.init=function(t,e,i){FibonacciHeap.superclass.init.call(this,t,e,i),this.addControls(),this.treeRoot=null,this.currentLayer=1,this.animationManager.setAllLayers([0,this.currentLayer]),this.minID=0,this.nextIndex=1},FibonacciHeap.prototype.addControls=function(){this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.removeSmallestButton=this.addControlToAlgorithmBar("Button","Remove Smallest"),this.removeSmallestButton.onclick=this.removeSmallestCallback.bind(this),this.controls.push(this.removeSmallestButton),this.clearHeapButton=this.addControlToAlgorithmBar("Button","Clear Heap"),this.clearHeapButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearHeapButton);var t=this.addRadioButtonGroupToAlgorithmBar(["Logical Representation","Internal Representation"],"BQueueRep");t[0].onclick=this.representationChangedHandler.bind(this,!0),t[1].onclick=this.representationChangedHandler.bind(this,!1),t[0].checked=!0},FibonacciHeap.prototype.representationChangedHandler=function(t,e){t?(this.animationManager.setAllLayers([0,1]),this.currentLayer=1):(this.animationManager.setAllLayers([0,2]),this.currentLayer=2)},FibonacciHeap.prototype.setPositions=function(t,e,i){if(null!=t){if(0==t.degree)return t.x=e,t.y=i,this.setPositions(t.rightSib,e+FibonacciHeap.NODE_WIDTH,i);if(1==t.degree)return t.x=e,t.y=i,this.setPositions(t.leftChild,e,i+FibonacciHeap.NODE_HEIGHT),this.setPositions(t.rightSib,e+FibonacciHeap.NODE_WIDTH,i);var s=Math.pow(2,t.degree-1);return t.x=e+(s-1)*FibonacciHeap.NODE_WIDTH,t.y=i,this.setPositions(t.leftChild,e,i+FibonacciHeap.NODE_HEIGHT),this.setPositions(t.rightSib,e+s*FibonacciHeap.NODE_WIDTH,i)}return e},FibonacciHeap.prototype.moveTree=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.cmd("Move",t.internalGraphicID,t.x,t.y),this.cmd("Move",t.degreeID,t.x+FibonacciHeap.DEGREE_OFFSET_X,t.y+FibonacciHeap.DEGREE_OFFSET_Y),this.moveTree(t.leftChild),this.moveTree(t.rightSib))},FibonacciHeap.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},FibonacciHeap.prototype.clearCallback=function(t){this.implementAction(this.clear.bind(this),"")},FibonacciHeap.prototype.clear=function(){return this.commands=new Array,this.deleteTree(this.treeRoot),this.cmd("Delete",this.minID),this.nextIndex=1,this.treeRoot=null,this.minElement=null,this.commands},FibonacciHeap.prototype.deleteTree=function(t){null!=t&&(this.cmd("Delete",t.graphicID),this.cmd("Delete",t.internalGraphicID),this.cmd("Delete",t.degreeID),this.deleteTree(t.leftChild),this.deleteTree(t.rightSib))},FibonacciHeap.prototype.reset=function(){this.treeRoot=null,this.nextIndex=1},FibonacciHeap.prototype.removeSmallestCallback=function(t){this.implementAction(this.removeSmallest.bind(this),"")},FibonacciHeap.prototype.removeSmallest=function(t){if(this.commands=new Array,null!=this.treeRoot){var e;if(this.minElement==this.treeRoot)this.treeRoot=this.treeRoot.rightSib,e=null;else{for(e=this.treeRoot;e.rightSib!=this.minElement;e=e.rightSib);e.rightSib=e.rightSib.rightSib}var i=this.nextIndex++;this.cmd("SetText",this.minElement.graphicID,""),this.cmd("SetText",this.minElement.internalGraphicID,""),this.cmd("CreateLabel",i,this.minElement.data,this.minElement.x,this.minElement.y),this.cmd("Move",i,FibonacciHeap.DELETE_LAB_X,FibonacciHeap.DELETE_LAB_Y),this.cmd("Step"),this.cmd("Delete",this.minID);var s=this.minElement.leftChild;if(null==this.treeRoot){if(this.cmd("Delete",this.minElement.graphicID),this.cmd("Delete",this.minElement.internalGraphicID),this.cmd("Delete",this.minElement.degreeID),this.treeRoot=s,this.minElement=null,null!=this.treeRoot){for(h=this.treeRoot;null!=h;h=h.rightSib)(null==this.minElement||this.minElement.data>h.data)&&(this.minElement=h);this.cmd("CreateLabel",this.minID,"Min element",this.minElement.x,FibonacciHeap.TMP_PTR_Y),this.cmd("Connect",this.minID,this.minElement.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",this.minID,this.minElement.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,"")}return this.SetAllTreePositions(this.treeRoot,[]),this.MoveAllTrees(this.treeRoot,[]),this.cmd("Delete",i),this.commands}if(null==s)null!=e&&null!=e.rightSib&&(this.cmd("Connect",e.internalGraphicID,e.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",e.rightSib.internalGraphicID,e.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""));else{var h;for(h=s;null!=h.rightSib;h=h.rightSib)h.parent=null;h.parent=null,null==e?(this.cmd("Connect",h.internalGraphicID,this.treeRoot.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",this.treeRoot.internalGraphicID,h.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),h.rightSib=this.treeRoot,this.treeRoot=s):(this.cmd("Connect",e.internalGraphicID,s.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",s.internalGraphicID,e.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),null!=e.rightSib&&(this.cmd("Connect",e.rightSib.internalGraphicID,h.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",h.internalGraphicID,e.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,"")),h.rightSib=e.rightSib,e.rightSib=s)}this.cmd("Delete",this.minElement.graphicID),this.cmd("Delete",this.minElement.internalGraphicID),this.cmd("Delete",this.minElement.degreeID),this.SetAllTreePositions(this.treeRoot,[]),this.MoveAllTrees(this.treeRoot,[]),this.fixAfterRemoveMin(),this.cmd("Delete",i)}return this.commands},FibonacciHeap.prototype.insertElement=function(t){this.commands=new Array;var e,i=new BinomialNode(t,this.nextIndex++,FibonacciHeap.INSERT_X,FibonacciHeap.INSERT_Y);if(i.internalGraphicID=this.nextIndex++,i.degreeID=this.nextIndex++,this.cmd("CreateCircle",i.graphicID,t,FibonacciHeap.INSERT_X,FibonacciHeap.INSERT_Y),this.cmd("SetForegroundColor",i.graphicID,FibonacciHeap.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",i.graphicID,FibonacciHeap.BACKGROUND_COLOR),this.cmd("SetLayer",i.graphicID,1),this.cmd("CreateCircle",i.internalGraphicID,t,FibonacciHeap.INSERT_X,FibonacciHeap.INSERT_Y),this.cmd("SetForegroundColor",i.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",i.internalGraphicID,FibonacciHeap.BACKGROUND_COLOR),this.cmd("SetLayer",i.internalGraphicID,2),this.cmd("CreateLabel",i.degreeID,i.degree,i.x+FibonacciHeap.DEGREE_OFFSET_X,i.y+FibonacciHeap.DEGREE_OFFSET_Y),this.cmd("SetTextColor",i.degreeID,"#0000FF"),this.cmd("SetLayer",i.degreeID,2),this.cmd("Step"),null==this.treeRoot)this.treeRoot=i,this.setPositions(this.treeRoot,FibonacciHeap.STARTING_X,FibonacciHeap.STARTING_Y),this.moveTree(this.treeRoot),this.cmd("CreateLabel",this.minID,"Min element",this.treeRoot.x,FibonacciHeap.TMP_PTR_Y),this.minElement=this.treeRoot,this.cmd("Connect",this.minID,this.minElement.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",this.minID,this.minElement.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,"");else if(this.minElement==this.treeRoot)i.rightSib=this.treeRoot,this.treeRoot=i,this.cmd("Connect",this.treeRoot.internalGraphicID,this.treeRoot.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",this.treeRoot.rightSib.internalGraphicID,this.treeRoot.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Step"),this.setPositions(this.treeRoot,FibonacciHeap.STARTING_X,FibonacciHeap.STARTING_Y),this.minElement.data>i.data&&(this.cmd("Disconnect",this.minID,this.minElement.graphicID),this.cmd("Disconnect",this.minID,this.minElement.internalGraphicID),this.minElement=i,this.cmd("Connect",this.minID,this.minElement.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",this.minID,this.minElement.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,"")),this.cmd("Move",this.minID,this.minElement.x,FibonacciHeap.TMP_PTR_Y),this.moveTree(this.treeRoot);else{for(e=this.treeRoot;e.rightSib!=this.minElement;e=e.rightSib);this.cmd("Disconnect",e.internalGraphicID,e.rightSib.internalGraphicID),this.cmd("Disconnect",e.rightSib.internalGraphicID,e.internalGraphicID),i.rightSib=e.rightSib,e.rightSib=i,this.cmd("Connect",e.internalGraphicID,e.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",e.rightSib.internalGraphicID,e.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),null!=e.rightSib.rightSib&&(this.cmd("Connect",e.rightSib.internalGraphicID,e.rightSib.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",e.rightSib.rightSib.internalGraphicID,e.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,"")),this.cmd("Step"),this.setPositions(this.treeRoot,FibonacciHeap.STARTING_X,FibonacciHeap.STARTING_Y),this.minElement.data>i.data&&(this.cmd("Disconnect",this.minID,this.minElement.graphicID),this.cmd("Disconnect",this.minID,this.minElement.internalGraphicID),this.minElement=i,this.cmd("Connect",this.minID,this.minElement.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",this.minID,this.minElement.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,"")),this.cmd("Move",this.minID,this.minElement.x,FibonacciHeap.TMP_PTR_Y),this.moveTree(this.treeRoot)}return this.commands},FibonacciHeap.prototype.fixAfterRemoveMin=function(){if(null!=this.treeRoot){var t,e=new Array(FibonacciHeap.MAX_DEGREE),i=new Array(FibonacciHeap.MAX_DEGREE),s=new Array(FibonacciHeap.MAX_DEGREE),h=this.nextIndex++;for(t=0;t<=FibonacciHeap.MAX_DEGREE;t++)e[t]=null,i[t]=this.nextIndex++,s[t]=this.nextIndex++,this.cmd("CreateRectangle",i[t]," ",FibonacciHeap.DEGREE_ARRAY_ELEM_WIDTH,FibonacciHeap.DEGREE_ARRAY_ELEM_HEIGHT,FibonacciHeap.DEGREE_ARRAY_START_X+t*FibonacciHeap.DEGREE_ARRAY_ELEM_WIDTH,FibonacciHeap.INDEGREE_ARRAY_START_Y),this.cmd("SetNull",i[t],1),this.cmd("CreateLabel",s[t],t,FibonacciHeap.DEGREE_ARRAY_START_X+t*FibonacciHeap.DEGREE_ARRAY_ELEM_WIDTH,FibonacciHeap.INDEGREE_ARRAY_START_Y-FibonacciHeap.DEGREE_ARRAY_ELEM_HEIGHT),this.cmd("SetTextColod",s[t],FibonacciHeap.INDEX_COLOR);var r=this.treeRoot;for(this.cmd("CreateLabel",h,"NextElem",this.treeRoot.x,FibonacciHeap.TMP_PTR_Y);null!=this.treeRoot;){for(r=this.treeRoot,this.cmd("Connect",h,r.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",h,r.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.treeRoot=this.treeRoot.rightSib,null!=r.rightSib&&(this.cmd("Disconnect",r.internalGraphicID,r.rightSib.internalGraphicID),this.cmd("Disconnect",r.rightSib.internalGraphicID,r.internalGraphicID)),this.cmd("Step"),r.rightSib=null;null!=e[r.degree];){this.cmd("SetEdgeHighlight",h,r.graphicID,1),this.cmd("SetEdgeHighlight",h,r.internalGraphicID,1),this.cmd("SetEdgeHighlight",i[r.degree],e[r.degree].graphicID,1),this.cmd("SetEdgeHighlight",i[r.degree],e[r.degree].internalGraphicID,1),this.cmd("Step"),this.cmd("Disconnect",h,r.graphicID),this.cmd("Disconnect",h,r.internalGraphicID),this.cmd("Disconnect",i[r.degree],e[r.degree].graphicID),this.cmd("Disconnect",i[r.degree],e[r.degree].internalGraphicID),this.cmd("SetNull",i[r.degree],1);var n=e[r.degree];e[r.degree]=null,r=this.combineTrees(r,n),this.cmd("Connect",h,r.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",h,r.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.SetAllTreePositions(this.treeRoot,e,r),this.cmd("Move",h,r.x,FibonacciHeap.TMP_PTR_Y),this.MoveAllTrees(this.treeRoot,e,r)}this.cmd("Disconnect",h,r.graphicID),this.cmd("Disconnect",h,r.internalGraphicID),e[r.degree]=r,this.cmd("SetNull",i[r.degree],0),this.cmd("Connect",i[r.degree],r.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",i[r.degree],r.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Step"),this.SetAllTreePositions(this.treeRoot,e),this.MoveAllTrees(this.treeRoot,e)}for(this.minElement=null,t=FibonacciHeap.MAX_DEGREE;t>=0;t--)null!=e[t]&&(e[t].rightSib=this.treeRoot,(null==this.minElement||this.minElement.data>e[t].data)&&(this.minElement=e[t]),this.treeRoot=e[t],null!=this.treeRoot.rightSib&&(this.cmd("Connect",this.treeRoot.internalGraphicID,this.treeRoot.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",this.treeRoot.rightSib.internalGraphicID,this.treeRoot.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""))),this.cmd("Delete",i[t]),this.cmd("Delete",s[t]);null!=this.minElement&&(this.cmd("CreateLabel",this.minID,"Min element",this.minElement.x,FibonacciHeap.TMP_PTR_Y),this.cmd("Connect",this.minID,this.minElement.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("Connect",this.minID,this.minElement.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,"")),this.cmd("Delete",h)}},FibonacciHeap.prototype.MoveAllTrees=function(t,e,i){null!=i&&void 0!=i&&this.moveTree(i),null!=t&&this.moveTree(t);for(var s=0;s<e.length;s++)null!=e[s]&&this.moveTree(e[s]);this.cmd("Step")},FibonacciHeap.prototype.SetAllTreePositions=function(t,e,i){var s=FibonacciHeap.STARTING_X;null!=i&&void 0!=i&&(s=this.setPositions(i,s,FibonacciHeap.STARTING_Y)),null!=t&&(s=this.setPositions(t,s,FibonacciHeap.STARTING_Y));for(var h=0;h<e.length;h++)null!=e[h]&&(s=this.setPositions(e[h],s,FibonacciHeap.STARTING_Y))},FibonacciHeap.prototype.combineTrees=function(t,e){if(e.data<t.data){var i=e;e=t,t=i}return t.degree!=e.degree?null:(e.rightSib=t.leftChild,e.parent=t,t.leftChild=e,t.degree++,null!=t.leftChild.rightSib&&(this.cmd("Disconnect",t.internalGraphicID,t.leftChild.rightSib.internalGraphicID),this.cmd("Connect",t.leftChild.internalGraphicID,t.leftChild.rightSib.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.3,1,""),this.cmd("Connect",t.leftChild.rightSib.internalGraphicID,t.leftChild.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.3,1,"")),this.cmd("Connect",t.internalGraphicID,t.leftChild.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,.15,1,""),this.cmd("Connect",t.leftChild.internalGraphicID,t.internalGraphicID,FibonacciHeap.FOREGROUND_COLOR,0,1,""),this.cmd("SetText",t.degreeID,t.degree),this.cmd("Connect",t.graphicID,e.graphicID,FibonacciHeap.FOREGROUND_COLOR,0,0,""),t)},FibonacciHeap.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},FibonacciHeap.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},LeftistHeap.inheritFrom(Algorithm),LeftistHeap.LINK_COLOR="#007700",LeftistHeap.HIGHLIGHT_CIRCLE_COLOR="#007700",LeftistHeap.FOREGROUND_COLOR="#007700",LeftistHeap.BACKGROUND_COLOR="#EEFFEE",LeftistHeap.WIDTH_DELTA=50,LeftistHeap.HEIGHT_DELTA=50,LeftistHeap.STARTING_Y=85,LeftistHeap.INSERT_X=50,LeftistHeap.INSERT_Y=45,LeftistHeap.BACKGROUND_ALPHA=.5,LeftistHeap.MESSAGE_X=20,LeftistHeap.MESSAGE_Y=10,LeftistHeap.NPL_OFFSET_X=20,LeftistHeap.NPL_OFFSET_Y=20,LeftistHeap.NPL_COLOR="#0000FF",LeftistHeap.MESSAGE_ID=0,LeftistHeap.prototype.init=function(t,e,i){LeftistHeap.superclass.init.call(this,t,e,i),this.addControls(),this.treeRoot=null,this.secondaryRoot=null,this.animationManager.setAllLayers([0,1]),this.nextIndex=1,this.commands=[],this.cmd("CreateLabel",0,"",LeftistHeap.MESSAGE_X,LeftistHeap.MESSAGE_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.commands=[]},LeftistHeap.prototype.addControls=function(){this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.removeSmallestButton=this.addControlToAlgorithmBar("Button","Remove Smallest"),this.removeSmallestButton.onclick=this.removeSmallestCallback.bind(this),this.controls.push(this.removeSmallestButton),this.clearHeapButton=this.addControlToAlgorithmBar("Button","Clear Heap"),this.clearHeapButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearHeapButton),this.showNPLBox=this.addCheckboxToAlgorithmBar("Show Null Path Lengths"),this.showNPLBox.checked=!0,this.showNPLBox.onclick=this.NPLChangedHandler.bind(this)},LeftistHeap.prototype.NPLChangedHandler=function(t,e){this.showNPLBox.checked?this.animationManager.setAllLayers([0,1]):this.animationManager.setAllLayers([0])},LeftistHeap.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},LeftistHeap.prototype.clearCallback=function(t){this.implementAction(this.clear.bind(this,""))},LeftistHeap.prototype.clear=function(t){return this.commands=new Array,this.clearTree(this.treeRoot),this.treeRoot=null,this.nexIndex=1,this.commands},LeftistHeap.prototype.clearTree=function(t){null!=t&&(this.cmd("Delete",t.graphicID),this.cmd("Delete",t.nplID),this.clearTree(t.left),this.clearTree(t.right))},LeftistHeap.prototype.reset=function(){this.treeRoot=null,this.secondaryRoot=null,this.nextIndex=1},LeftistHeap.prototype.removeSmallestCallback=function(t){this.implementAction(this.removeSmallest.bind(this),"")},LeftistHeap.prototype.removeSmallest=function(t){if(this.commands=new Array,null!=this.treeRoot){this.highlightLeft=this.nextIndex++,this.highlightRight=this.nextIndex++,this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Remove root element, leaving two subtrees"),null!=this.treeRoot.left&&this.cmd("Disconnect",this.treeRoot.graphicID,this.treeRoot.left.graphicID),null!=this.treeRoot.right&&this.cmd("Disconnect",this.treeRoot.graphicID,this.treeRoot.right.graphicID);var e=this.treeRoot.graphicID;if(this.cmd("Delete",this.treeRoot.nplID),this.cmd("Move",this.treeRoot.graphicID,LeftistHeap.INSERT_X,LeftistHeap.INSERT_Y),this.cmd("Step"),this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Merge the two subtrees"),null==this.treeRoot.left)this.treeRoot=null;else if(null==this.treeRoot.right)this.treeRoot=this.treeRoot.left,this.resizeTrees();else{var i=this.treeRoot.right;this.secondaryRoot=i,this.treeRoot=this.treeRoot.left,this.resizeTrees(),this.cmd("CreateHighlightCircle",this.highlightLeft,LeftistHeap.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.cmd("CreateHighlightCircle",this.highlightRight,LeftistHeap.HIGHLIGHT_CIRCLE_COLOR,i.x,i.y),this.treeRoot=this.merge(this.treeRoot,i),this.secondaryRoot=null}this.resizeTrees(),this.cmd("Delete",e),this.cmd("SetText",LeftistHeap.MESSAGE_ID,"")}return this.commands},LeftistHeap.prototype.insertElement=function(t){if(this.commands=new Array,this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Create a heap with one node, merge with existing heap."),this.secondaryRoot=new LeftistHeapNode(t,this.nextIndex++,this.nextIndex++,LeftistHeap.INSERT_X,LeftistHeap.INSERT_Y),this.cmd("CreateCircle",this.secondaryRoot.graphicID,t,this.secondaryRoot.x,this.secondaryRoot.y),this.cmd("CreateLabel",this.secondaryRoot.nplID,0,LeftistHeap.INSERT_X-LeftistHeap.NPL_OFFSET_X,LeftistHeap.INSERT_Y-LeftistHeap.NPL_OFFSET_Y),this.cmd("SetForegroundColor",this.secondaryRoot.nplID,LeftistHeap.NPL_COLOR),this.cmd("SetLayer",this.secondaryRoot.nplID,1),this.cmd("SetForegroundColor",this.secondaryRoot.graphicID,LeftistHeap.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.secondaryRoot.graphicID,LeftistHeap.BACKGROUND_COLOR),null!=this.treeRoot){this.resizeTrees(),this.highlightLeft=this.nextIndex++,this.highlightRight=this.nextIndex++,this.cmd("CreateHighlightCircle",this.highlightLeft,LeftistHeap.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.cmd("CreateHighlightCircle",this.highlightRight,LeftistHeap.HIGHLIGHT_CIRCLE_COLOR,this.secondaryRoot.x,this.secondaryRoot.y);var e=this.secondaryRoot;this.secondaryRoot=null,this.treeRoot=this.merge(this.treeRoot,e),this.resizeTrees()}else this.treeRoot=this.secondaryRoot,this.secondaryRoot=null,this.resizeTrees();return this.cmd("SetText",LeftistHeap.MESSAGE_ID,""),this.commands},LeftistHeap.prototype.merge=function(t,e){if(null==t)return this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Merging right heap with empty heap, return right heap"),this.cmd("Step"),this.cmd("Delete",this.highlightRight),this.cmd("Delete",this.highlightLeft),e;if(null==e)return this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Merging left heap with empty heap, return left heap"),this.cmd("Step"),this.cmd("Delete",this.highlightRight),this.cmd("Delete",this.highlightLeft),t;this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetHighlight",e.graphicID,1),e.data<t.data?(this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Min element is in right heap.  Recursively merge right subtree of right heap with left heap"),s=t,t=e,e=s,s=this.highlightRight,this.highlightRight=this.highlightLeft,this.highlightLeft=s):this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Min element is in left heap.  Recursively merge right subtree of left heap with right heap"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetHighlight",e.graphicID,0),null==t.right?this.cmd("Move",this.highlightLeft,t.x+LeftistHeap.WIDTH_DELTA/2,t.y+LeftistHeap.HEIGHT_DELTA):this.cmd("Move",this.highlightLeft,t.right.x,t.right.y),this.cmd("Step"),null!=t.right&&this.cmd("Disconnect",t.graphicID,t.right.graphicID,LeftistHeap.LINK_COLOR);var i=t.right;if(this.cmd("SetAlpha",t.graphicID,LeftistHeap.BACKGROUND_ALPHA),this.cmd("SetAlpha",t.nplID,LeftistHeap.BACKGROUND_ALPHA),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,LeftistHeap.BACKGROUND_ALPHA),this.setTreeAlpha(t.left,LeftistHeap.BACKGROUND_ALPHA)),this.cmd("Step"),t.right=this.merge(i,e),this.secondaryRoot==t.right&&(this.secondaryRoot=null),this.treeRoot==t.right&&(this.treeRoot=null),t.right.parent!=t&&t.right.disconnectFromParent(),t.right.parent=t,this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Reconnecting tree after merge"),this.cmd("Connect",t.graphicID,t.right.graphicID,LeftistHeap.LINK_COLOR),this.cmd("SetAlpha",t.graphicID,1),this.cmd("SetAlpha",t.nplID,1),this.resizeTrees(),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,1),this.setTreeAlpha(t.left,1),this.cmd("Step")),null==t.left||t.left.npl<t.right.npl){this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Right subtree has larger Null Path Length than left subtree.  Swapping ..."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);var s=t.left;t.left=t.right,t.right=s,this.resizeTrees()}else this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetText",LeftistHeap.MESSAGE_ID,"Left subtree has Null Path Length at least as large as right subtree.  No swap required ..."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);return null==t.right?t.npl=0:t.npl=Math.min(t.left.npl,t.right.npl)+1,this.cmd("SetText",t.nplID,t.npl),t},LeftistHeap.prototype.setTreeAlpha=function(t,e){null!=t&&(this.cmd("SetAlpha",t.graphicID,e),this.cmd("SetAlpha",t.nplID,e),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,e),this.setTreeAlpha(t.left,e)),null!=t.right&&(this.cmd("SetEdgeAlpha",t.graphicID,t.right.graphicID,e),this.setTreeAlpha(t.right,e)))},LeftistHeap.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),LeftistHeap.WIDTH_DELTA/2),t.rightWidth=Math.max(this.resizeWidths(t.right),LeftistHeap.WIDTH_DELTA/2),t.leftWidth+t.rightWidth)},LeftistHeap.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},LeftistHeap.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},LeftistHeap.prototype.resizeTrees=function(){var t;this.resizeWidths(this.treeRoot),this.resizeWidths(this.secondaryRoot),null!=this.treeRoot?(startingPoint=this.treeRoot.leftWidth,this.setNewPositions(this.treeRoot,startingPoint,LeftistHeap.STARTING_Y,0),this.animateNewPositions(this.treeRoot),null!=this.secondaryRoot&&(t=this.treeRoot.leftWidth+this.treeRoot.rightWidth+this.secondaryRoot.leftWidth+50,this.setNewPositions(this.secondaryRoot,t,LeftistHeap.STARTING_Y,0),this.animateNewPositions(this.secondaryRoot)),this.cmd("Step")):null!=this.secondaryRoot&&(startingPoint=this.secondaryRoot.leftWidth,this.setNewPositions(this.secondaryRoot,startingPoint,LeftistHeap.STARTING_Y,0),this.animateNewPositions(this.secondaryRoot))},LeftistHeap.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?(e-=t.rightWidth,t.npX=e-LeftistHeap.NPL_OFFSET_X):1==s?(e+=t.leftWidth,t.npX=e+LeftistHeap.NPL_OFFSET_X):(t.heightLabelX=e-LeftistHeap.NPL_OFFSET_Y,t.npX=e+LeftistHeap.NPL_OFFSET_X),t.x=e,t.npY=t.y-LeftistHeap.NPL_OFFSET_Y,this.setNewPositions(t.left,e,i+LeftistHeap.HEIGHT_DELTA,-1),this.setNewPositions(t.right,e,i+LeftistHeap.HEIGHT_DELTA,1))},LeftistHeap.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.cmd("Move",t.nplID,t.npX,t.npY),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},LeftistHeapNode.prototype.disconnectFromParent=function(){null!=this.parent&&(this.parent.right==this?this.parent.right=null:this.parent.left===this&&this.parent.left)},SkewHeap.inheritFrom(Algorithm),SkewHeap.LINK_COLOR="#007700",SkewHeap.HIGHLIGHT_CIRCLE_COLOR="#007700",SkewHeap.FOREGROUND_COLOR="#007700",SkewHeap.BACKGROUND_COLOR="#EEFFEE",SkewHeap.WIDTH_DELTA=50,SkewHeap.HEIGHT_DELTA=50,SkewHeap.STARTING_Y=90,SkewHeap.INSERT_X=50,SkewHeap.INSERT_Y=45,SkewHeap.BACKGROUND_ALPHA=.5,SkewHeap.MESSAGE_X=20,SkewHeap.MESSAGE_Y=10,SkewHeap.MESSAGE_ID=0,SkewHeap.prototype.init=function(t,e,i){SkewHeap.superclass.init.call(this,t,e,i),this.addControls(),this.treeRoot=null,this.secondaryRoot=null,this.animationManager.setAllLayers([0,1]),this.nextIndex=1,this.commands=[],this.cmd("CreateLabel",0,"",SkewHeap.MESSAGE_X,SkewHeap.MESSAGE_Y,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.commands=[]},SkewHeap.prototype.addControls=function(){this.controls=[],this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),4),this.controls.push(this.insertField),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.controls.push(this.insertButton),this.removeSmallestButton=this.addControlToAlgorithmBar("Button","Remove Smallest"),this.removeSmallestButton.onclick=this.removeSmallestCallback.bind(this),this.controls.push(this.removeSmallestButton),this.clearHeapButton=this.addControlToAlgorithmBar("Button","Clear Heap"),this.clearHeapButton.onclick=this.clearCallback.bind(this),this.controls.push(this.clearHeapButton)},SkewHeap.prototype.insertCallback=function(t){var e;""!=(e=this.normalizeNumber(this.insertField.value,4))&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},SkewHeap.prototype.clearCallback=function(t){this.implementAction(this.clear.bind(this,""))},SkewHeap.prototype.clear=function(t){return this.commands=new Array,this.clearTree(this.treeRoot),this.treeRoot=null,this.nexIndex=1,this.commands},SkewHeap.prototype.clearTree=function(t){null!=t&&(this.cmd("Delete",t.graphicID),this.clearTree(t.left),this.clearTree(t.right))},SkewHeap.prototype.reset=function(){this.treeRoot=null,this.secondaryRoot=null,this.nextIndex=1},SkewHeap.prototype.removeSmallestCallback=function(t){this.implementAction(this.removeSmallest.bind(this),"")},SkewHeap.prototype.removeSmallest=function(t){if(this.commands=new Array,null!=this.treeRoot){this.highlightLeft=this.nextIndex++,this.highlightRight=this.nextIndex++,this.cmd("SetText",SkewHeap.MESSAGE_ID,"Remove root element, leaving two subtrees"),null!=this.treeRoot.left&&this.cmd("Disconnect",this.treeRoot.graphicID,this.treeRoot.left.graphicID),null!=this.treeRoot.right&&this.cmd("Disconnect",this.treeRoot.graphicID,this.treeRoot.right.graphicID);var e=this.treeRoot.graphicID;if(this.cmd("Move",this.treeRoot.graphicID,SkewHeap.INSERT_X,SkewHeap.INSERT_Y),this.cmd("Step"),this.cmd("SetText",SkewHeap.MESSAGE_ID,"Merge the two subtrees"),null==this.treeRoot.left)this.treeRoot=null;else if(null==this.treeRoot.right)this.treeRoot=this.treeRoot.left,this.resizeTrees();else{var i=this.treeRoot.right;this.secondaryRoot=i,this.treeRoot=this.treeRoot.left,this.resizeTrees(),this.cmd("CreateHighlightCircle",this.highlightLeft,SkewHeap.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.cmd("CreateHighlightCircle",this.highlightRight,SkewHeap.HIGHLIGHT_CIRCLE_COLOR,i.x,i.y),this.treeRoot=this.merge(this.treeRoot,i),this.secondaryRoot=null}this.resizeTrees(),this.cmd("Delete",e),this.cmd("SetText",SkewHeap.MESSAGE_ID,"")}return this.commands},SkewHeap.prototype.insertElement=function(t){if(this.commands=new Array,this.cmd("SetText",SkewHeap.MESSAGE_ID,"Create a heap with one node, merge with existing heap."),this.secondaryRoot=new SkewHeapNode(t,this.nextIndex++,SkewHeap.INSERT_X,SkewHeap.INSERT_Y),this.cmd("CreateCircle",this.secondaryRoot.graphicID,t,this.secondaryRoot.x,this.secondaryRoot.y),this.cmd("SetForegroundColor",this.secondaryRoot.graphicID,SkewHeap.FOREGROUND_COLOR),this.cmd("SetBackgroundColor",this.secondaryRoot.graphicID,SkewHeap.BACKGROUND_COLOR),null!=this.treeRoot){this.resizeTrees(),this.highlightLeft=this.nextIndex++,this.highlightRight=this.nextIndex++,this.cmd("CreateHighlightCircle",this.highlightLeft,SkewHeap.HIGHLIGHT_CIRCLE_COLOR,this.treeRoot.x,this.treeRoot.y),this.cmd("CreateHighlightCircle",this.highlightRight,SkewHeap.HIGHLIGHT_CIRCLE_COLOR,this.secondaryRoot.x,this.secondaryRoot.y);var e=this.secondaryRoot;this.secondaryRoot=null,this.treeRoot=this.merge(this.treeRoot,e),this.resizeTrees()}else this.treeRoot=this.secondaryRoot,this.secondaryRoot=null,this.resizeTrees();return this.cmd("SetText",SkewHeap.MESSAGE_ID,""),this.commands},SkewHeap.prototype.merge=function(t,e){if(null==t)return this.cmd("SetText",SkewHeap.MESSAGE_ID,"Merging right heap with empty heap, return right heap"),this.cmd("Step"),this.cmd("Delete",this.highlightRight),this.cmd("Delete",this.highlightLeft),e;if(null==e)return this.cmd("SetText",SkewHeap.MESSAGE_ID,"Merging left heap with empty heap, return left heap"),this.cmd("Step"),this.cmd("Delete",this.highlightRight),this.cmd("Delete",this.highlightLeft),t;this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetHighlight",e.graphicID,1),e.data<t.data?(this.cmd("SetText",SkewHeap.MESSAGE_ID,"Min element is in right heap.  Recursively merge right subtree of right heap with left heap"),s=t,t=e,e=s,s=this.highlightRight,this.highlightRight=this.highlightLeft,this.highlightLeft=s):this.cmd("SetText",SkewHeap.MESSAGE_ID,"Min element is in left heap.  Recursively merge right subtree of left heap with right heap"),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0),this.cmd("SetHighlight",e.graphicID,0),null==t.right?this.cmd("Move",this.highlightLeft,t.x+SkewHeap.WIDTH_DELTA/2,t.y+SkewHeap.HEIGHT_DELTA):this.cmd("Move",this.highlightLeft,t.right.x,t.right.y),this.cmd("Step"),null!=t.right&&this.cmd("Disconnect",t.graphicID,t.right.graphicID,SkewHeap.LINK_COLOR);var i=t.right;this.cmd("SetAlpha",t.graphicID,SkewHeap.BACKGROUND_ALPHA),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,SkewHeap.BACKGROUND_ALPHA),this.setTreeAlpha(t.left,SkewHeap.BACKGROUND_ALPHA)),this.cmd("Step"),t.right=this.merge(i,e),this.secondaryRoot==t.right&&(this.secondaryRoot=null),this.treeRoot==t.right&&(this.treeRoot=null),t.right.parent!=t&&t.right.disconnectFromParent(),t.right.parent=t,this.cmd("SetText",SkewHeap.MESSAGE_ID,"Reconnecting tree after merge"),this.cmd("Connect",t.graphicID,t.right.graphicID,SkewHeap.LINK_COLOR),this.cmd("SetAlpha",t.graphicID,1),this.resizeTrees(),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,1),this.setTreeAlpha(t.left,1),this.cmd("Step")),this.cmd("SetHighlight",t.graphicID,1),this.cmd("SetText",SkewHeap.MESSAGE_ID,"Swapping subtrees after merge ..."),this.cmd("Step"),this.cmd("SetHighlight",t.graphicID,0);var s=t.left;return t.left=t.right,t.right=s,this.resizeTrees(),t},SkewHeap.prototype.setTreeAlpha=function(t,e){null!=t&&(this.cmd("SetAlpha",t.graphicID,e),null!=t.left&&(this.cmd("SetEdgeAlpha",t.graphicID,t.left.graphicID,e),this.setTreeAlpha(t.left,e)),null!=t.right&&(this.cmd("SetEdgeAlpha",t.graphicID,t.right.graphicID,e),this.setTreeAlpha(t.right,e)))},SkewHeap.prototype.resizeWidths=function(t){return null==t?0:(t.leftWidth=Math.max(this.resizeWidths(t.left),SkewHeap.WIDTH_DELTA/2),t.rightWidth=Math.max(this.resizeWidths(t.right),SkewHeap.WIDTH_DELTA/2),t.leftWidth+t.rightWidth)},SkewHeap.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},SkewHeap.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},SkewHeap.prototype.resizeTrees=function(){var t;this.resizeWidths(this.treeRoot),this.resizeWidths(this.secondaryRoot),null!=this.treeRoot?(startingPoint=this.treeRoot.leftWidth,this.setNewPositions(this.treeRoot,startingPoint,SkewHeap.STARTING_Y,0),this.animateNewPositions(this.treeRoot),null!=this.secondaryRoot&&(t=this.treeRoot.leftWidth+this.treeRoot.rightWidth+this.secondaryRoot.leftWidth+50,this.setNewPositions(this.secondaryRoot,t,SkewHeap.STARTING_Y,0),this.animateNewPositions(this.secondaryRoot)),this.cmd("Step")):null!=this.secondaryRoot&&(startingPoint=this.secondaryRoot.leftWidth,this.setNewPositions(this.secondaryRoot,startingPoint,SkewHeap.STARTING_Y,0),this.animateNewPositions(this.secondaryRoot))},SkewHeap.prototype.setNewPositions=function(t,e,i,s){null!=t&&(t.y=i,-1==s?e-=t.rightWidth:1==s&&(e+=t.leftWidth),t.x=e,this.setNewPositions(t.left,e,i+SkewHeap.HEIGHT_DELTA,-1),this.setNewPositions(t.right,e,i+SkewHeap.HEIGHT_DELTA,1))},SkewHeap.prototype.animateNewPositions=function(t){null!=t&&(this.cmd("Move",t.graphicID,t.x,t.y),this.animateNewPositions(t.left),this.animateNewPositions(t.right))},SkewHeapNode.prototype.disconnectFromParent=function(){null!=this.parent&&(this.parent.right==this?this.parent.right=null:this.parent.left===this&&this.parent.left)},Recursive.inheritFrom(Algorithm),Recursive.CODE_START_X=10,Recursive.CODE_START_Y=10,Recursive.CODE_LINE_HEIGHT=14,Recursive.RECURSIVE_START_X=20,Recursive.RECURSIVE_START_Y=120,Recursive.RECURSIVE_DELTA_Y=14,Recursive.RECURSIVE_DELTA_X=15,Recursive.CODE_HIGHLIGHT_COLOR="#FF0000",Recursive.CODE_STANDARD_COLOR="#000000",Recursive.TABLE_INDEX_COLOR="#0000FF",Recursive.CODE_RECURSIVE_1_COLOR="#339933",Recursive.CODE_RECURSIVE_2_COLOR="#0099FF",Recursive.ACTIVATION_RECORD_WIDTH=100,Recursive.ACTIVATION_RECORD_HEIGHT=20,Recursive.ACTIVATION_RECORD_SPACING=2*Recursive.ACTIVATION_RECORD_WIDTH+10,Recursive.SEPARATING_LINE_COLOR="#0000FF",Recursive.prototype.addCodeToCanvas=function(t){this.codeID=this.addCodeToCanvasBase(t,Recursive.CODE_START_X,Recursive.CODE_START_Y,Recursive.CODE_LINE_HEIGHT,Recursive.CODE_STANDARD_COLOR)},Recursive.prototype.init=function(t,e,i){Recursive.superclass.init.call(this,t,e,i)},Recursive.prototype.clearOldIDs=function(){for(var t=0;t<this.oldIDs.length;t++)this.cmd("Delete",this.oldIDs[t]);this.oldIDs=[],this.nextIndex=this.initialIndex},Recursive.prototype.reset=function(){this.oldIDs=[],this.nextIndex=this.initialIndex},Recursive.prototype.enableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!1},Recursive.prototype.disableUI=function(t){for(var e=0;e<this.controls.length;e++)this.controls[e].disabled=!0},Recursive.prototype.deleteActivation=function(t){var e;for(e=0;e<t.labelIDs.length;e++)this.cmd("Delete",t.labelIDs[e]),this.cmd("Delete",t.fieldIDs[e]);this.cmd("Delete",t.separatingLineID),this.cmd("Delete",t.nameID)},Recursive.prototype.createActivation=function(t,e,i,s,h){var r,n=new ActivationRecord(e);for(n.nameID=this.nextIndex++,h=void 0==h||h,r=0;r<e.length;r++){var a=this.nextIndex++;n.fieldIDs[r]=a,this.cmd("CreateRectangle",a,"",Recursive.ACTIVATION_RECORD_WIDTH,Recursive.ACTIVATION_RECORD_HEIGHT,i,s+r*Recursive.ACTIVATION_RECORD_HEIGHT);var o=this.nextIndex++;n.labelIDs[r]=o,this.cmd("CreateLabel",o,e[r]),h?this.cmd("AlignLeft",o,a):this.cmd("AlignRight",o,a)}return n.separatingLineID=this.nextIndex++,this.cmd("CreateLabel",n.nameID,"   "+t+"   "),this.cmd("SetForegroundColor",n.nameID,Recursive.SEPARATING_LINE_COLOR),h?(this.cmd("CreateRectangle",n.separatingLineID,"",2*Recursive.ACTIVATION_RECORD_WIDTH,1,i-Recursive.ACTIVATION_RECORD_WIDTH/2,s-Recursive.ACTIVATION_RECORD_HEIGHT/2),this.cmd("AlignLeft",n.nameID,n.labelIDs[0])):(this.cmd("CreateRectangle",n.separatingLineID,"",2*Recursive.ACTIVATION_RECORD_WIDTH,1,i+Recursive.ACTIVATION_RECORD_WIDTH/2,s-Recursive.ACTIVATION_RECORD_HEIGHT/2),this.cmd("AlignRight",n.nameID,n.labelIDs[0])),this.cmd("SetForegroundColor",n.separatingLineID,Recursive.SEPARATING_LINE_COLOR),n},RecFact.inheritFrom(Recursive),RecFact.MAX_VALUE=20,RecFact.ACTIVATION_FIELDS=["n ","subValue ","returnValue "],RecFact.CODE=[["def ","factorial(n)",":"],["     if ","(n <= 1): "],["          return 1"],["     else:"],["          subSolution = ","factorial(n - 1)"],["          solution = ","subSolution * n"],["          return ","solution"]],RecFact.RECURSIVE_DELTA_Y=RecFact.ACTIVATION_FIELDS.length*Recursive.ACTIVATION_RECORD_HEIGHT,RecFact.ACTIVATION_RECORT_START_X=330,RecFact.ACTIVATION_RECORT_START_Y=20,RecFact.prototype.init=function(t,e,i){RecFact.superclass.init.call(this,t,e,i),this.nextIndex=0,this.addControls(),this.code=RecFact.CODE,this.addCodeToCanvas(this.code),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.initialIndex=this.nextIndex,this.oldIDs=[],this.commands=[]},RecFact.prototype.addControls=function(){this.controls=[],this.factorialField=this.addControlToAlgorithmBar("Text",""),this.factorialField.onkeydown=this.returnSubmit(this.factorialField,this.factorialCallback.bind(this),2,!0),this.controls.push(this.factorialField),this.factorialButton=this.addControlToAlgorithmBar("Button","Factorial"),this.factorialButton.onclick=this.factorialCallback.bind(this),this.controls.push(this.factorialButton)},RecFact.prototype.factorialCallback=function(t){if(""!=this.factorialField.value){var e=Math.min(parseInt(this.factorialField.value),RecFact.MAX_VALUE);this.factorialField.value=String(e),this.implementAction(this.doFactorial.bind(this),e)}},RecFact.prototype.doFactorial=function(t){this.commands=[],this.clearOldIDs(),this.currentY=RecFact.ACTIVATION_RECORT_START_Y,this.currentX=RecFact.ACTIVATION_RECORT_START_X;var e=this.factorial(t),i=this.nextIndex++;return this.oldIDs.push(i),this.cmd("CreateLabel",i,"factorial("+String(t)+") = "+String(e),Recursive.CODE_START_X,Recursive.CODE_START_Y+(this.code.length+1)*Recursive.CODE_LINE_HEIGHT,0),this.commands},RecFact.prototype.factorial=function(t){var e=this.createActivation("factorial     ",RecFact.ACTIVATION_FIELDS,this.currentX,this.currentY);this.cmd("SetText",e.fieldIDs[0],t);var i=this.currentX,s=this.currentY;if(this.currentY+=RecFact.RECURSIVE_DELTA_Y,this.currentY+Recursive.RECURSIVE_DELTA_Y>this.canvasHeight&&(this.currentY=RecFact.ACTIVATION_RECORT_START_Y,this.currentX+=Recursive.ACTIVATION_RECORD_SPACING),this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_STANDARD_COLOR),t>1){this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_STANDARD_COLOR);var h=this.factorial(t-1);return this.cmd("SetForegroundColor",this.codeID[4][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",e.fieldIDs[1],h),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[4][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[5][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",e.fieldIDs[2],h*t),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[5][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[6][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.deleteActivation(e),this.currentY=s,this.currentX=i,this.cmd("CreateLabel",this.nextIndex,"Return Value = "+String(h*t),i,s),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[6][1],Recursive.CODE_STANDARD_COLOR),this.cmd("Delete",this.nextIndex),h*t}return this.cmd("SetForegroundColor",this.codeID[2][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[2][0],Recursive.CODE_STANDARD_COLOR),this.currentY=s,this.currentX=i,this.deleteActivation(e),this.cmd("CreateLabel",this.nextIndex,"Return Value = 1",i,s),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("Delete",this.nextIndex),1},Queens.inheritFrom(Recursive),Queens.CALC_QUEENS_ACTIVATION_FIELDS=["  size  ","  board  "],Queens.QUEENS_ACTIVATION_FIELDS=["  board  ","  current  ","  size  ","  i  ","  done  "],Queens.CHECK_ACTIVATION_FIELDS=["  board  ","  current  ","  i  "],Queens.CODE=[["def ","calcQueens(size)",":"],["     board = ","[-1] * size"],["    return  ","queens(board, 0, size)"],["  "],["def ","queens(board, current, size)",":"],["     if ","(current == size):"],["          return true"],["     else:"],["          for i in range(size):"],["               board[current] = i"],["               if (","noConflicts(board, current)",":"],["                    done"," = ","queens(board, current + 1, size)"],["                    if (done):"],["                         return true"],["          return false"],[" "],["def ","noConflicts(board, current)",":"],["      for i in range(current):"],["         if ","(board[i] == board[current])",":"],["             return false"],["         if ","(current - i == abs(board[current] = board[i]))",":"],["             return false"],["      return true"]],Queens.RECURSIVE_DELTA_Y_CALC_QUEEN=Queens.CALC_QUEENS_ACTIVATION_FIELDS.length*Recursive.ACTIVATION_RECORD_HEIGHT,Queens.RECURSIVE_DELTA_Y_QUEEN=Queens.QUEENS_ACTIVATION_FIELDS.length*Recursive.ACTIVATION_RECORD_HEIGHT,Queens.RECURSIVE_DELTA_Y_CHECK=Queens.CHECK_ACTIVATION_FIELDS.length*Recursive.ACTIVATION_RECORD_HEIGHT,Queens.ACTIVATION_RECORT_START_X=450,Queens.ACTIVATION_RECORT_START_Y=20,Queens.INTERNAL_BOARD_START_X=600,Queens.INTERNAL_BOARD_START_Y=100,Queens.INTERNAL_BOARD_WIDTH=20,Queens.INTERNAL_BOARD_HEIGHT=20,Queens.LOGICAL_BOARD_START_X=Queens.INTERNAL_BOARD_START_X,Queens.LOGICAL_BOARD_START_Y=Queens.INTERNAL_BOARD_START_Y+1.5*Queens.INTERNAL_BOARD_HEIGHT,Queens.LOGICAL_BOARD_WIDTH=Queens.INTERNAL_BOARD_WIDTH,Queens.LOGICAL_BOARD_HEIGHT=Queens.INTERNAL_BOARD_HEIGHT,Queens.ACTIVATION_RECORD_SPACING=400,Queens.INDEX_COLOR="#0000FF",Queens.prototype.init=function(t,e,i){Queens.superclass.init.call(this,t,e,i),this.nextIndex=0,this.addControls(),this.code=Queens.CODE,this.addCodeToCanvas(this.code),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.initialIndex=this.nextIndex,this.oldIDs=[],this.commands=[]},Queens.prototype.addControls=function(){this.controls=[],this.addLabelToAlgorithmBar("Board size:  (1-8)"),this.sizeField=this.addControlToAlgorithmBar("Text",""),this.sizeField.onkeydown=this.returnSubmit(this.sizeField,this.queensCallback.bind(this),2,!0),this.controls.push(this.sizeField),this.queensButton=this.addControlToAlgorithmBar("Button","Queens"),this.queensButton.onclick=this.queensCallback.bind(this),this.controls.push(this.queensButton)},Queens.prototype.queensCallback=function(t){if(""!=this.sizeField.value){var e=parseInt(this.sizeField.value);e=Math.min(e,8),this.sizeField.value=String(e),this.implementAction(this.doQueens.bind(this),e)}},Queens.prototype.doQueens=function(t){this.commands=[],this.clearOldIDs(),this.boardData=new Array(t),this.boardInternalID=new Array(t),this.boardLogicalID=new Array(t),this.boardInternalIndexID=new Array(t),this.currentY=Queens.ACTIVATION_RECORT_START_Y,this.currentX=Queens.ACTIVATION_RECORT_START_X,this.activationLeft=!0,this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_HIGHLIGHT_COLOR);var e=this.createActivation("calcQueens",Queens.CALC_QUEENS_ACTIVATION_FIELDS,this.currentX,this.currentY,this.activationLeft);this.currentY+=Queens.RECURSIVE_DELTA_Y_CALC_QUEEN,this.cmd("SetText",e.fieldIDs[0],t),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[1][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_HIGHLIGHT_COLOR);for(var i=0;i<t;i++){this.boardInternalID[i]=this.nextIndex++,this.oldIDs.push(this.boardInternalID[i]),this.cmd("CreateRectangle",this.boardInternalID[i],"-1",Queens.INTERNAL_BOARD_WIDTH,Queens.INTERNAL_BOARD_HEIGHT,Queens.INTERNAL_BOARD_START_X+i*Queens.INTERNAL_BOARD_WIDTH,Queens.INTERNAL_BOARD_START_Y),this.boardInternalIndexID[i]=this.nextIndex++,this.oldIDs.push(this.boardInternalIndexID[i]),this.cmd("CreateLabel",this.boardInternalIndexID[i],i,Queens.INTERNAL_BOARD_START_X+i*Queens.INTERNAL_BOARD_WIDTH,Queens.INTERNAL_BOARD_START_Y-Queens.INTERNAL_BOARD_HEIGHT),this.cmd("SetForegroundColor",this.boardInternalIndexID[i],Queens.INDEX_COLOR),this.boardLogicalID[i]=new Array(t);for(var s=0;s<t;s++)this.boardLogicalID[i][s]=this.nextIndex++,this.oldIDs.push(this.boardLogicalID[i][s]),this.cmd("CreateRectangle",this.boardLogicalID[i][s],"",Queens.LOGICAL_BOARD_WIDTH,Queens.LOGICAL_BOARD_HEIGHT,Queens.LOGICAL_BOARD_START_X+s*Queens.LOGICAL_BOARD_WIDTH,Queens.LOGICAL_BOARD_START_Y+i*Queens.LOGICAL_BOARD_HEIGHT)}return this.cmd("Connect",e.fieldIDs[1],this.boardInternalID[0]),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[1][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[2][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[2][1],Recursive.CODE_STANDARD_COLOR),board=new Array(t),this.queens(board,0,t),this.cmd("Step"),this.cmd("Delete",this.nextIndex),this.deleteActivation(e),this.commands},Queens.prototype.queens=function(t,e,i){var s,h=this.currentX,r=this.currentY,n=this.activationLeft,a=this.createActivation("queens",Queens.QUEENS_ACTIVATION_FIELDS,this.currentX,this.currentY,this.activationLeft);if(this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",a.fieldIDs[1],e),this.cmd("SetText",a.fieldIDs[2],i),this.activationLeft?this.cmd("Connect",a.fieldIDs[0],this.boardInternalID[0]):this.cmd("Connect",a.fieldIDs[0],this.boardInternalID[i-1]),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_STANDARD_COLOR),this.currentY+=Queens.RECURSIVE_DELTA_Y_QUEEN,this.currentY+Queens.RECURSIVE_DELTA_Y_QUEEN>this.canvasHeight&&(this.currentY=Queens.ACTIVATION_RECORT_START_Y,this.currentX+=Queens.ACTIVATION_RECORD_SPACING,this.activationLeft=!1),e==i)return this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_STANDARD_COLOR),this.deleteActivation(a),this.currentX=h,this.currentY=r,this.activationLeft=n,this.cmd("CreateLabel",this.nextIndex,"Return Value = true",this.currentX,this.currentY),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),!0;for(s=0;s<i;s++){this.cmd("SetTextColor",this.codeID[8][0],Recursive.CODE_HIGHLIGHT_COLOR),t[e]=s,this.cmd("SetText",a.fieldIDs[3],s),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[8][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[9][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",this.boardLogicalID[s][e],"Q"),this.cmd("SetText",this.boardInternalID[e],s),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[9][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[10][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[10][1],Recursive.CODE_STANDARD_COLOR);var o=this.legal(t,e);if(this.cmd("SetTextColor",this.codeID[10][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.codeID[10][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("Delete",this.nextIndex),this.cmd("SetTextColor",this.codeID[10][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[10][1],Recursive.CODE_STANDARD_COLOR),o){this.cmd("SetTextColor",this.codeID[11][2],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[11][2],Recursive.CODE_STANDARD_COLOR);var l=this.queens(t,e+1,i);if(this.cmd("SetTextColor",this.codeID[11][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.codeID[11][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.codeID[11][2],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",a.fieldIDs[4],l),this.cmd("Step"),this.cmd("Delete",this.nextIndex),this.cmd("SetTextColor",this.codeID[11][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[11][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[11][2],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.codeID[12][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[12][0],Recursive.CODE_STANDARD_COLOR),l)return this.cmd("SetTextColor",this.codeID[13][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[13][0],Recursive.CODE_STANDARD_COLOR),this.deleteActivation(a),this.currentX=h,this.currentY=r,this.activationLeft=n,this.cmd("CreateLabel",this.nextIndex,"Return Value = true",this.currentX,this.currentY),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),!0}this.cmd("SetText",this.boardLogicalID[s][e],"")}return this.cmd("SetTextColor",this.codeID[14][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.codeID[14][0],Recursive.CODE_STANDARD_COLOR),this.deleteActivation(a),this.currentX=h,this.currentY=r,this.activationLeft=n,this.cmd("CreateLabel",this.nextIndex,"Return Value = false",this.currentX,this.currentY),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),!1},Queens.prototype.legal=function(t,e){var i,s=this.createActivation("noConflicts",Queens.CHECK_ACTIVATION_FIELDS,this.currentX,this.currentY,this.activationLeft);this.cmd("SetText",s.fieldIDs[1],e),this.activationLeft?this.cmd("Connect",s.fieldIDs[0],this.boardInternalID[0]):this.cmd("Connect",s.fieldIDs[0],this.boardInternalID[this.boardInternalID.length-1]),this.cmd("SetForegroundColor",this.codeID[16][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[16][1],Recursive.CODE_STANDARD_COLOR);var h=!0;for(0==e&&(this.cmd("SetForegroundColor",this.codeID[17][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[17][0],Recursive.CODE_STANDARD_COLOR)),i=0;i<e;i++){if(this.cmd("SetText",s.fieldIDs[2],i),this.cmd("SetTextColor",s.fieldIDs[2],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[17][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[17][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",s.fieldIDs[2],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[18][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.boardLogicalID[t[e]][e],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.boardLogicalID[t[i]][i],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.boardLogicalID[t[e]][e],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.boardLogicalID[t[i]][i],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[18][1],Recursive.CODE_STANDARD_COLOR),t[i]==t[e]){this.cmd("SetForegroundColor",this.codeID[19][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[19][0],Recursive.CODE_STANDARD_COLOR),h=!1;break}if(this.cmd("SetTextColor",this.boardLogicalID[t[e]][e],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetTextColor",this.boardLogicalID[t[i]][i],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[20][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetTextColor",this.boardLogicalID[t[e]][e],Recursive.CODE_STANDARD_COLOR),this.cmd("SetTextColor",this.boardLogicalID[t[i]][i],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[20][1],Recursive.CODE_STANDARD_COLOR),e-i==Math.abs(t[e]-t[i])){this.cmd("SetForegroundColor",this.codeID[21][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[21][0],Recursive.CODE_STANDARD_COLOR),h=!1;break}}return h&&(this.cmd("SetForegroundColor",this.codeID[22][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[22][0],Recursive.CODE_STANDARD_COLOR)),this.cmd("CreateLabel",this.nextIndex,"Return Value = "+String(h),this.currentX,this.currentY),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),this.deleteActivation(s),h},Reverse.inheritFrom(Recursive),Reverse.ACTIVATION_FIELDS=["word ","subProblem ","subSolution ","solution "],Reverse.CODE=[["def ","reverse(word)",":"],["     if ",'(word == ""): '],["          return word"],["     else:"],["          subProblem = ","word[1:]"],["          subSolution = ","reverse(subProblem)"],["          solution = ","subSolution + word[0]"],["          return = ","solution"]],Reverse.RECURSIVE_DELTA_Y=Reverse.ACTIVATION_FIELDS.length*Recursive.ACTIVATION_RECORD_HEIGHT,Reverse.ACTIVATION_RECORT_START_X=375,Reverse.ACTIVATION_RECORT_START_Y=20,Reverse.prototype.init=function(t,e,i){Reverse.superclass.init.call(this,t,e,i),this.nextIndex=0,this.addControls(),this.code=Reverse.CODE,this.addCodeToCanvas(this.code),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.initialIndex=this.nextIndex,this.oldIDs=[],this.commands=[]},Reverse.prototype.addControls=function(){this.controls=[],this.reverseField=this.addControlToAlgorithmBar("Text",""),this.reverseField.onkeydown=this.returnSubmit(this.reverseField,this.reverseCallback.bind(this),10,!1),this.controls.push(this.reverseField),this.reverseButton=this.addControlToAlgorithmBar("Button","Reverse"),this.reverseButton.onclick=this.reverseCallback.bind(this),this.controls.push(this.reverseButton)},Reverse.prototype.reverseCallback=function(t){if(""!=this.reverseField.value){var e=this.reverseField.value;this.implementAction(this.doReverse.bind(this),e)}},Reverse.prototype.doReverse=function(t){this.commands=[],this.clearOldIDs(),this.currentY=Reverse.ACTIVATION_RECORT_START_Y,this.currentX=Reverse.ACTIVATION_RECORT_START_X;var e=this.reverse(t),i=this.nextIndex++;return this.oldIDs.push(i),this.cmd("CreateLabel",i,"reverse("+String(t)+") = "+String(e),Recursive.CODE_START_X,Recursive.CODE_START_Y+(this.code.length+1)*Recursive.CODE_LINE_HEIGHT,0),this.commands},Reverse.prototype.reverse=function(t){var e=this.createActivation("reverse     ",Reverse.ACTIVATION_FIELDS,this.currentX,this.currentY);this.cmd("SetText",e.fieldIDs[0],t);var i=this.currentX,s=this.currentY;if(this.currentY+=Reverse.RECURSIVE_DELTA_Y,this.currentY+Recursive.RECURSIVE_DELTA_Y>this.canvasHeight&&(this.currentY=Reverse.ACTIVATION_RECORT_START_Y,this.currentX+=Recursive.ACTIVATION_RECORD_SPACING),this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[0][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[1][1],Recursive.CODE_STANDARD_COLOR),""!=t){this.cmd("SetForegroundColor",this.codeID[4][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_HIGHLIGHT_COLOR);var h=t.substr(1);this.cmd("SetText",e.fieldIDs[1],h),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[4][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[4][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_STANDARD_COLOR);var r=this.reverse(h);this.cmd("SetForegroundColor",this.codeID[5][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetText",e.fieldIDs[2],r),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[5][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[5][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[6][1],Recursive.CODE_HIGHLIGHT_COLOR);var n=r+t[0];return this.cmd("SetText",e.fieldIDs[3],n),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[6][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[6][1],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[7][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("SetForegroundColor",this.codeID[7][1],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.deleteActivation(e),this.currentY=s,this.currentX=i,this.cmd("CreateLabel",this.nextIndex,'Return Value = "'+n+'"',i,s),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[7][0],Recursive.CODE_STANDARD_COLOR),this.cmd("SetForegroundColor",this.codeID[7][1],Recursive.CODE_STANDARD_COLOR),this.cmd("Delete",this.nextIndex),n}return this.cmd("SetForegroundColor",this.codeID[2][0],Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("SetForegroundColor",this.codeID[2][0],Recursive.CODE_STANDARD_COLOR),this.currentY=s,this.currentX=i,this.deleteActivation(e),this.cmd("CreateLabel",this.nextIndex,'Return Value = ""',i,s),this.cmd("SetForegroundColor",this.nextIndex,Recursive.CODE_HIGHLIGHT_COLOR),this.cmd("Step"),this.cmd("Delete",this.nextIndex),""},Hash.inheritFrom(Algorithm),Hash.MAX_HASH_LENGTH=10,Hash.HASH_NUMBER_START_X=200,Hash.HASH_X_DIFF=7,Hash.HASH_NUMBER_START_Y=10,Hash.HASH_ADD_START_Y=30,Hash.HASH_INPUT_START_X=60,Hash.HASH_INPUT_X_DIFF=7,Hash.HASH_INPUT_START_Y=45,Hash.HASH_ADD_LINE_Y=42,Hash.HASH_RESULT_Y=50,Hash.ELF_HASH_SHIFT=10,Hash.HASH_LABEL_X=300,Hash.HASH_LABEL_Y=30,Hash.HASH_LABEL_DELTA_X=50,Hash.HIGHLIGHT_COLOR="#0000FF",Hash.prototype.init=function(t,e,i){Hash.superclass.init.call(this,t,e,i),this.addControls(),this.nextIndex=0,this.hashingIntegers=!0},Hash.prototype.addControls=function(){this.insertField=this.addControlToAlgorithmBar("Text",""),this.insertField.size=Hash.MAX_HASH_LENGTH,this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),Hash.MAX_HASH_LENGTH,!0),this.insertButton=this.addControlToAlgorithmBar("Button","Insert"),this.insertButton.onclick=this.insertCallback.bind(this),this.deleteField=this.addControlToAlgorithmBar("Text",""),this.deleteField.size=Hash.MAX_HASH_LENGTH,this.deleteField.onkeydown=this.returnSubmit(this.insertField,this.deleteCallback.bind(this),Hash.MAX_HASH_LENGTH,!0),this.deleteButton=this.addControlToAlgorithmBar("Button","Delete"),this.deleteButton.onclick=this.deleteCallback.bind(this),this.findField=this.addControlToAlgorithmBar("Text",""),this.findField.size=Hash.MAX_HASH_LENGTH,this.findField.onkeydown=this.returnSubmit(this.insertField,this.findCallback.bind(this),Hash.MAX_HASH_LENGTH,!0),this.findButton=this.addControlToAlgorithmBar("Button","Find"),this.findButton.onclick=this.findCallback.bind(this);var t=this.addRadioButtonGroupToAlgorithmBar(["Hash Integer","Hash Strings"],"HashType");this.hashIntegerButton=t[0],this.hashIntegerButton.onclick=this.changeHashTypeCallback.bind(this,!0),this.hashStringButton=t[1],this.hashStringButton.onclick=this.changeHashTypeCallback.bind(this,!1),this.hashIntegerButton.checked=!0},Hash.prototype.changeHashTypeCallback=function(t,e){this.hashingIntegers!=t&&this.implementAction(this.changeHashType.bind(this),t)},Hash.prototype.changeHashType=function(t){return this.hashingIntegers=t,this.hashingIntegers?(this.hashIntegerButton.checked=!0,this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),Hash.MAX_HASH_LENGTH,!0),this.deleteField.onkeydown=this.returnSubmit(this.insertField,this.deleteCallback.bind(this),Hash.MAX_HASH_LENGTH,!0),this.findField.onkeydown=this.returnSubmit(this.insertField,this.findCallback.bind(this),Hash.MAX_HASH_LENGTH,!0)):(this.hashStringButton.checked=!0,this.insertField.onkeydown=this.returnSubmit(this.insertField,this.insertCallback.bind(this),Hash.MAX_HASH_LENGTH,!1),this.deleteField.onkeydown=this.returnSubmit(this.insertField,this.deleteCallback.bind(this),Hash.MAX_HASH_LENGTH,!1),this.findField.onkeydown=this.returnSubmit(this.insertField,this.findCallback.bind(this),Hash.MAX_HASH_LENGTH,!1)),this.resetAll()},Hash.prototype.doHash=function(t){if(this.hashingIntegers){var e=this.nextIndex++,i=this.nextIndex++,s=this.nextIndex++,h=parseInt(t)%this.table_size;return this.currHash=parseInt(t),this.cmd("CreateLabel",e,t+" % "+String(this.table_size)+" = ",Hash.HASH_LABEL_X,Hash.HASH_LABEL_Y),this.cmd("CreateLabel",i,h,Hash.HASH_LABEL_X+Hash.HASH_LABEL_DELTA_X,Hash.HASH_LABEL_Y),this.cmd("Step"),this.cmd("CreateHighlightCircle",s,Hash.HIGHLIGHT_COLOR,Hash.HASH_LABEL_X+Hash.HASH_LABEL_DELTA_X,Hash.HASH_LABEL_Y),this.cmd("Move",s,this.indexXPos[h],this.indexYPos[h]),this.cmd("Step"),this.cmd("Delete",e),this.cmd("Delete",i),this.cmd("Delete",s),this.nextIndex-=3,h}this.nextIndex;var r=this.nextIndex++;this.cmd("CreateLabel",r,"Hashing:",10,45,0);for(var n=new Array(t.length),a=new Array(t.length),o=0;o<t.length;o++)n[o]=this.nextIndex++,a[o]=t.charAt(o),this.cmd("CreateLabel",n[o],a[o],Hash.HASH_INPUT_START_X+o*Hash.HASH_INPUT_X_DIFF,Hash.HASH_INPUT_START_Y,0);var l=new Array(32),d=new Array(32),c=new Array(8),g=new Array(8),m=new Array(32),p=new Array(4),u=new Array(4),_=this.nextIndex++,I=this.nextIndex++;for(o=0;o<32;o++)d[o]=0,l[o]=this.nextIndex++,m[o]=this.nextIndex++;for(o=0;o<8;o++)g[o]=this.nextIndex++;for(o=0;o<4;o++)p[o]=this.nextIndex++;for(this.cmd("Step"),o=a.length-1;o>=0;o--){for(D=0;D<32;D++)this.cmd("CreateLabel",l[D],d[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y,0);this.cmd("Delete",n[o]);for(var S=a[o].charCodeAt(0),D=7;D>=0;D--)c[D]=S%2,S=Math.floor(S/2),this.cmd("CreateLabel",g[D],c[D],Hash.HASH_INPUT_START_X+o*Hash.HASH_INPUT_X_DIFF,Hash.HASH_INPUT_START_Y,0),this.cmd("Move",g[D],Hash.HASH_NUMBER_START_X+(D+24)*Hash.HASH_X_DIFF,Hash.HASH_ADD_START_Y);this.cmd("Step"),this.cmd("CreateRectangle",I,"",32*Hash.HASH_X_DIFF,0,Hash.HASH_NUMBER_START_X,Hash.HASH_ADD_LINE_Y,"left","bottom"),this.cmd("CreateLabel",_,"+",Hash.HASH_NUMBER_START_X,Hash.HASH_ADD_START_Y,0),this.cmd("Step");var T=0;for(D=7;D>=0;D--)d[D+24]=d[D+24]+c[D]+T,d[D+24]>1?(d[D+24]=d[D+24]-2,T=1):T=0;for(D=23;D>=0;D--)d[D]=d[D]+T,d[D]>1?(d[D]=d[D]-2,T=1):T=0;for(D=0;D<32;D++)this.cmd("CreateLabel",m[D],d[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_RESULT_Y,0);for(this.cmd("Step"),D=0;D<8;D++)this.cmd("Delete",g[D]);for(this.cmd("Delete",I),this.cmd("Delete",_),D=0;D<32;D++)this.cmd("Delete",l[D]),this.cmd("Move",m[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y);if(this.cmd("Step"),o>0){for(D=0;D<32;D++)this.cmd("Move",m[D],Hash.HASH_NUMBER_START_X+(D-4)*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y);for(this.cmd("Step"),D=0;D<28;D++)u[D]=d[D],d[D]=d[D+4];for(D=0;D<4;D++)this.cmd("Move",m[D],Hash.HASH_NUMBER_START_X+(D+Hash.ELF_HASH_SHIFT)*Hash.HASH_X_DIFF,Hash.HASH_ADD_START_Y),d[D+28]=0,this.cmd("CreateLabel",p[D],0,Hash.HASH_NUMBER_START_X+(D+28)*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y,0),u[D]&&(d[D+Hash.ELF_HASH_SHIFT]=1-d[D+Hash.ELF_HASH_SHIFT]);for(this.cmd("CreateRectangle",I,"",32*Hash.HASH_X_DIFF,0,Hash.HASH_NUMBER_START_X,Hash.HASH_ADD_LINE_Y,"left","bottom"),this.cmd("CreateLabel",_,"XOR",Hash.HASH_NUMBER_START_X,Hash.HASH_ADD_START_Y,0),this.cmd("Step"),D=0;D<32;D++)this.cmd("CreateLabel",l[D],d[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_RESULT_Y,0);for(this.cmd("Step"),this.cmd("Delete",_),this.cmd("Delete",I),D=0;D<32;D++)this.cmd("Delete",m[D]),this.cmd("Move",l[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y);for(D=0;D<4;D++)this.cmd("Delete",p[D]);for(this.cmd("Step"),D=0;D<32;D++)this.cmd("Delete",l[D])}else for(D=0;D<32;D++)this.cmd("Delete",m[D])}for(this.cmd("Delete",r),D=0;D<32;D++)this.cmd("CreateLabel",l[D],d[D],Hash.HASH_NUMBER_START_X+D*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y,0);for(this.currHash=0,D=0;D<32;D++)this.currHash=2*this.currHash+d[D];for(this.cmd("CreateLabel",r," = "+String(this.currHash),Hash.HASH_NUMBER_START_X+32*Hash.HASH_X_DIFF,Hash.HASH_NUMBER_START_Y,0),this.cmd("Step"),D=0;D<32;D++)this.cmd("Delete",l[D]);var L=this.nextIndex++;return this.cmd("SetText",r,String(this.currHash)+" % "+String(this.table_size)+" = "),h=this.currHash%this.table_size,this.cmd("CreateLabel",L,h,Hash.HASH_NUMBER_START_X+32*Hash.HASH_X_DIFF+105,Hash.HASH_NUMBER_START_Y,0),this.cmd("Step"),s=this.nextIndex++,this.cmd("CreateHighlightCircle",s,Hash.HIGHLIGHT_COLOR,Hash.HASH_NUMBER_START_X+30*Hash.HASH_X_DIFF+120,Hash.HASH_NUMBER_START_Y+15),this.cmd("Move",s,this.indexXPos[h],this.indexYPos[h]),this.cmd("Step"),this.cmd("Delete",s),this.cmd("Delete",r),this.cmd("Delete",L),h},Hash.prototype.resetAll=function(){return this.insertField.value="",this.deleteField.value="",this.findField.value="",[]},Hash.prototype.insertCallback=function(t){var e=this.insertField.value;""!=e&&(this.insertField.value="",this.implementAction(this.insertElement.bind(this),e))},Hash.prototype.deleteCallback=function(t){var e=this.deleteField.value;""!=e&&(this.deleteField.value="",this.implementAction(this.deleteElement.bind(this),e))},Hash.prototype.findCallback=function(t){var e=this.findField.value;""!=e&&(this.findField.value="",this.implementAction(this.findElement.bind(this),e))},Hash.prototype.insertElement=function(t){},Hash.prototype.deleteElement=function(t){},Hash.prototype.findElement=function(t){},Hash.prototype.reset=function(){this.hashIntegerButton.checked=!0},Hash.prototype.disableUI=function(t){this.insertField.disabled=!0,this.insertButton.disabled=!0,this.deleteField.disabled=!0,this.deleteButton.disabled=!0,this.findField.disabled=!0,this.findButton.disabled=!0},Hash.prototype.enableUI=function(t){this.insertField.disabled=!1,this.insertButton.disabled=!1,this.deleteField.disabled=!1,this.deleteButton.disabled=!1,this.findField.disabled=!1,this.findButton.disabled=!1},ClosedHashBucket.inheritFrom(Hash),ClosedHashBucket.ARRAY_ELEM_WIDTH=90,ClosedHashBucket.ARRAY_ELEM_HEIGHT=30,ClosedHashBucket.ARRAY_ELEM_START_X=50,ClosedHashBucket.ARRAY_ELEM_START_Y=100,ClosedHashBucket.ARRAY_VERTICAL_SEPARATION=100,ClosedHashBucket.CLOSED_HASH_TABLE_SIZE=29,ClosedHashBucket.BUCKET_SIZE=3,ClosedHashBucket.NUM_BUCKETS=11,ClosedHashBucket.CLOSED_HASH_TABLE_SIZE=40,ClosedHashBucket.ARRAY_Y_POS=350,ClosedHashBucket.INDEX_COLOR="#0000FF",ClosedHashBucket.MAX_DATA_VALUE=999,ClosedHashBucket.HASH_TABLE_SIZE=13,ClosedHashBucket.ARRAY_Y_POS=350,ClosedHashBucket.INDEX_COLOR="#0000FF",ClosedHashBucket.prototype.init=function(t,e,i){ClosedHashBucket.superclass.init.call(this,t,e,i),this.elements_per_row=Math.floor(e/ClosedHashBucket.ARRAY_ELEM_WIDTH),this.nextIndex=0,this.setup()},ClosedHashBucket.prototype.addControls=function(){ClosedHashBucket.superclass.addControls.call(this)},ClosedHashBucket.prototype.insertElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Inserting element: "+String(t));for(var e=this.doHash(t),i=-1,s=e*ClosedHashBucket.BUCKET_SIZE;s<e*ClosedHashBucket.BUCKET_SIZE+ClosedHashBucket.BUCKET_SIZE;s++)if(this.cmd("SetHighlight",this.hashTableVisual[s],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[s],0),this.empty[s]){i=s;break}if(-1==i)for(s=ClosedHashBucket.BUCKET_SIZE*ClosedHashBucket.NUM_BUCKETS;s<ClosedHashBucket.CLOSED_HASH_TABLE_SIZE;s++)if(this.cmd("SetHighlight",this.hashTableVisual[s],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[s],0),this.empty[s]){i=s;break}if(-1!=i){var h=this.nextIndex++;this.cmd("CreateLabel",h,t,20,25),this.cmd("Move",h,this.indexXPos2[i],this.indexYPos2[i]-ClosedHashBucket.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Delete",h),this.cmd("SetText",this.hashTableVisual[i],t),this.hashTableValues[i]=t,this.empty[i]=!1,this.deleted[i]=!1}return this.cmd("SetText",this.ExplainLabel,""),this.commands},ClosedHashBucket.prototype.getElemIndex=function(t){for(var e=this.doHash(t),i=e*ClosedHashBucket.BUCKET_SIZE;i<e*ClosedHashBucket.BUCKET_SIZE+ClosedHashBucket.BUCKET_SIZE;i++){if(this.cmd("SetHighlight",this.hashTableVisual[i],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[i],0),!this.empty[i]&&this.hashTableValues[i]==t)return i;if(this.empty[i]&&!this.deleted[i])return-1}for(i=ClosedHashBucket.BUCKET_SIZE*ClosedHashBucket.NUM_BUCKETS;i<ClosedHashBucket.CLOSED_HASH_TABLE_SIZE;i++){if(this.cmd("SetHighlight",this.hashTableVisual[i],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[i],0),!this.empty[i]&&this.hashTableValues[i]==t)return i;if(this.empty[i]&&!this.deleted[i])return-1}return-1},ClosedHashBucket.prototype.deleteElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t);var e=this.getElemIndex(t);return-1==e?this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element not in table"):(this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element this.deleted"),this.empty[e]=!0,this.deleted[e]=!0,this.cmd("SetText",this.hashTableVisual[e],"<deleted>")),this.commands},ClosedHashBucket.prototype.findElement=function(t){return this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t),-1==this.getElemIndex(t)?this.cmd("SetText",this.ExplainLabel,"Element "+t+" not found"):this.cmd("SetText",this.ExplainLabel,"Element "+t+" found"),this.commands},ClosedHashBucket.prototype.setup=function(){this.table_size=ClosedHashBucket.NUM_BUCKETS,this.hashTableVisual=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.hashTableIndices=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.hashTableValues=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.indexXPos=new Array(ClosedHashBucket.NUM_BUCKETS),this.indexYPos=new Array(ClosedHashBucket.NUM_BUCKETS),this.indexXPos2=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.indexYPos2=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.empty=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.deleted=new Array(ClosedHashBucket.CLOSED_HASH_TABLE_SIZE),this.ExplainLabel=this.nextIndex++,this.commands=[];for(var t=0;t<ClosedHashBucket.CLOSED_HASH_TABLE_SIZE;t++){var e=this.nextIndex++;this.empty[t]=!0,this.deleted[t]=!1;var i=ClosedHashBucket.ARRAY_ELEM_START_X+t%this.elements_per_row*ClosedHashBucket.ARRAY_ELEM_WIDTH,s=ClosedHashBucket.ARRAY_ELEM_START_Y+Math.floor(t/this.elements_per_row)*ClosedHashBucket.ARRAY_VERTICAL_SEPARATION;this.cmd("CreateRectangle",e,"",ClosedHashBucket.ARRAY_ELEM_WIDTH,ClosedHashBucket.ARRAY_ELEM_HEIGHT,i,s),this.hashTableVisual[t]=e,e=this.nextIndex++,this.hashTableIndices[t]=e,this.indexXPos2[t]=i,this.indexYPos2[t]=s+ClosedHashBucket.ARRAY_ELEM_HEIGHT,this.cmd("CreateLabel",e,t,this.indexXPos2[t],this.indexYPos2[t]),this.cmd("SetForegroundColor",e,ClosedHashBucket.INDEX_COLOR)}for(t=0;t<=ClosedHashBucket.NUM_BUCKETS;t++)e=this.nextIndex++,i=ClosedHashBucket.ARRAY_ELEM_START_X+3*t%this.elements_per_row*ClosedHashBucket.ARRAY_ELEM_WIDTH-ClosedHashBucket.ARRAY_ELEM_WIDTH/2,s=ClosedHashBucket.ARRAY_ELEM_START_Y+Math.floor(3*t/this.elements_per_row)*ClosedHashBucket.ARRAY_VERTICAL_SEPARATION+ClosedHashBucket.ARRAY_ELEM_HEIGHT,this.cmd("CreateRectangle",e,"",0,2*ClosedHashBucket.ARRAY_ELEM_HEIGHT,i,s),e=this.nextIndex++,t==ClosedHashBucket.NUM_BUCKETS?this.cmd("CreateLabel",e,"Overflow",i+3,s+ClosedHashBucket.ARRAY_ELEM_HEIGHT/2,0):(this.indexXPos[t]=i+5,this.indexYPos[t]=s+ClosedHashBucket.ARRAY_ELEM_HEIGHT/2,this.cmd("CreateLabel",e,t,this.indexXPos[t],this.indexYPos[t],0));this.cmd("CreateLabel",this.ExplainLabel,"",10,25,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.resetIndex=this.nextIndex},ClosedHashBucket.prototype.resetAll=function(){this.commands=ClosedHashBucket.superclass.resetAll.call(this);for(var t=0;t<ClosedHashBucket.CLOSED_HASH_TABLE_SIZE;t++)this.empty[t]=!0,this.deleted[t]=!1,this.cmd("SetText",this.hashTableVisual[t],"");return this.commands},ClosedHashBucket.prototype.reset=function(){for(var t=0;t<ClosedHashBucket.CLOSED_HASH_TABLE_SIZE;t++)this.empty[t]=!0,this.deleted[t]=!1;this.nextIndex=this.resetIndex,ClosedHashBucket.superclass.reset.call(this)},ClosedHashBucket.prototype.disableUI=function(t){ClosedHashBucket.superclass.disableUI.call(this)},ClosedHashBucket.prototype.enableUI=function(t){ClosedHashBucket.superclass.enableUI.call(this)},ClosedHash.inheritFrom(Hash),ClosedHash.ARRAY_ELEM_WIDTH=90,ClosedHash.ARRAY_ELEM_HEIGHT=30,ClosedHash.ARRAY_ELEM_START_X=50,ClosedHash.ARRAY_ELEM_START_Y=100,ClosedHash.ARRAY_VERTICAL_SEPARATION=100,ClosedHash.CLOSED_HASH_TABLE_SIZE=29,ClosedHash.ARRAY_Y_POS=350,ClosedHash.INDEX_COLOR="#0000FF",ClosedHash.MAX_DATA_VALUE=999,ClosedHash.HASH_TABLE_SIZE=13,ClosedHash.ARRAY_Y_POS=350,ClosedHash.INDEX_COLOR="#0000FF",ClosedHash.prototype.init=function(t,e,i){var s=ClosedHash.superclass.init;this.elements_per_row=Math.floor(e/ClosedHash.ARRAY_ELEM_WIDTH),s.call(this,t,e,i),this.nextIndex=0,this.setup()},ClosedHash.prototype.addControls=function(){ClosedHash.superclass.addControls.call(this);var t=this.addRadioButtonGroupToAlgorithmBar(["Linear Probing: f(i) = i","Quadratic Probing: f(i) = i * i","Double Hashing: f(i) = i * hash2(elem)"],"CollisionStrategy");this.linearProblingButton=t[0],this.linearProblingButton.onclick=this.linearProbeCallback.bind(this),this.quadraticProbingButton=t[1],this.quadraticProbingButton.onclick=this.quadraticProbeCallback.bind(this),this.doubleHashingButton=t[2],this.doubleHashingButton.onclick=this.doubleHashingCallback.bind(this),this.linearProblingButton.checked=!0,this.currentHashingTypeButtonState=this.linearProblingButton},ClosedHash.prototype.changeProbeType=function(t){if(t==this.linearProblingButton){this.linearProblingButton.checked=!0,this.currentHashingTypeButtonState=this.linearProblingButton;for(var e=0;e<this.table_size;e++)this.skipDist[e]=e}else if(t==this.quadraticProbingButton){this.quadraticProbingButton.checked=!0,this.currentHashingTypeButtonState=this.quadraticProbingButton;for(e=0;e<this.table_size;e++)this.skipDist[e]=e*e}else t==this.doubleHashingButton&&(this.doubleHashingButton.checked=!0,this.currentHashingTypeButtonState=this.doubleHashingButton);return this.commands=this.resetAll(),this.commands},ClosedHash.prototype.quadraticProbeCallback=function(t){this.currentHashingTypeButtonState!=this.quadraticProbingButton&&this.implementAction(this.changeProbeType.bind(this),this.quadraticProbingButton)},ClosedHash.prototype.doubleHashingCallback=function(t){this.currentHashingTypeButtonState!=this.doubleHashingButton&&this.implementAction(this.changeProbeType.bind(this),this.doubleHashingButton)},ClosedHash.prototype.linearProbeCallback=function(t){this.currentHashingTypeButtonState!=this.linearProblingButton&&this.implementAction(this.changeProbeType.bind(this),this.linearProblingButton)},ClosedHash.prototype.insertElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Inserting element: "+String(t));var e=this.doHash(t);if(e=this.getEmptyIndex(e,t),this.cmd("SetText",this.ExplainLabel,""),-1!=e){var i=this.nextIndex++;this.cmd("CreateLabel",i,t,20,25),this.cmd("Move",i,this.indexXPos[e],this.indexYPos[e]-ClosedHash.ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Delete",i),this.cmd("SetText",this.hashTableVisual[e],t),this.hashTableValues[e]=t,this.empty[e]=!1,this.deleted[e]=!1}return this.commands},ClosedHash.prototype.resetSkipDist=function(t,e){var i=7-this.currHash%7;this.cmd("CreateLabel",e,"hash2("+String(t)+") = 1 - "+String(this.currHash)+" % 7 = "+String(i),20,45,0),this.skipDist[0]=0;for(var s=1;s<this.table_size;s++)this.skipDist[s]=this.skipDist[s-1]+i},ClosedHash.prototype.getEmptyIndex=function(t,e){this.currentHashingTypeButtonState==this.doubleHashingButton&&this.resetSkipDist(e,this.nextIndex++);for(var i=-1,s=0;s<this.table_size;s++){var h=(t+this.skipDist[s])%this.table_size;if(this.cmd("SetHighlight",this.hashTableVisual[h],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[h],0),this.empty[h]){i=h;break}}return this.currentHashingTypeButtonState==this.doubleHashingButton&&this.cmd("Delete",--this.nextIndex),i},ClosedHash.prototype.getElemIndex=function(t,e){this.currentHashingTypeButtonState==this.doubleHashingButton&&resetSkipDist(e,this.nextIndex++);for(var i=-1,s=0;s<this.table_size;s++){var h=(t+this.skipDist[s])%this.table_size;if(this.cmd("SetHighlight",this.hashTableVisual[h],1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableVisual[h],0),!this.empty[h]&&this.hashTableValues[h]==e){i=h;break}if(this.empty[h]&&!this.deleted[h])break}return this.currentHashingTypeButtonState==this.doubleHashingButton&&this.cmd("Delete",--this.nextIndex),i},ClosedHash.prototype.deleteElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t);var e=this.doHash(t);return(e=this.getElemIndex(e,t))>0?(this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element deleted"),this.empty[e]=!0,this.deleted[e]=!0,this.cmd("SetText",this.hashTableVisual[e],"<deleted>")):this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element not in table"),this.commands},ClosedHash.prototype.findElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t);var e=this.doHash(t);return-1!=this.getElemIndex(e,t)?this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t+"  Found!"):this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t+"  Not Found!"),this.commands},ClosedHash.prototype.setup=function(){this.table_size=ClosedHash.CLOSED_HASH_TABLE_SIZE,this.skipDist=new Array(this.table_size),this.hashTableVisual=new Array(this.table_size),this.hashTableIndices=new Array(this.table_size),this.hashTableValues=new Array(this.table_size),this.indexXPos=new Array(this.table_size),this.indexYPos=new Array(this.table_size),this.empty=new Array(this.table_size),this.deleted=new Array(this.table_size),this.ExplainLabel=this.nextIndex++,this.commands=[];for(var t=0;t<this.table_size;t++){this.skipDist[t]=t;var e=this.nextIndex++;this.empty[t]=!0,this.deleted[t]=!1;var i=ClosedHash.ARRAY_ELEM_START_X+t%this.elements_per_row*ClosedHash.ARRAY_ELEM_WIDTH,s=ClosedHash.ARRAY_ELEM_START_Y+Math.floor(t/this.elements_per_row)*ClosedHash.ARRAY_VERTICAL_SEPARATION;this.cmd("CreateRectangle",e,"",ClosedHash.ARRAY_ELEM_WIDTH,ClosedHash.ARRAY_ELEM_HEIGHT,i,s),this.hashTableVisual[t]=e,e=this.nextIndex++,this.hashTableIndices[t]=e,this.indexXPos[t]=i,this.indexYPos[t]=s+ClosedHash.ARRAY_ELEM_HEIGHT,this.cmd("CreateLabel",e,t,this.indexXPos[t],this.indexYPos[t]),this.cmd("SetForegroundColor",e,ClosedHash.INDEX_COLOR)}this.cmd("CreateLabel",this.ExplainLabel,"",10,25,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.resetIndex=this.nextIndex},ClosedHash.prototype.resetAll=function(){this.commands=ClosedHash.superclass.resetAll.call(this);for(var t=0;t<this.table_size;t++)this.empty[t]=!0,this.deleted[t]=!1,this.cmd("SetText",this.hashTableVisual[t],"");return this.commands},ClosedHash.prototype.reset=function(){for(var t=0;t<this.table_size;t++)this.empty[t]=!0,this.deleted[t]=!1;this.nextIndex=this.resetIndex,ClosedHash.superclass.reset.call(this)},ClosedHash.prototype.disableUI=function(t){ClosedHash.superclass.disableUI.call(this),this.linearProblingButton.disabled=!0,this.quadraticProbingButton.disabled=!0,this.doubleHashingButton.disabled=!0},ClosedHash.prototype.enableUI=function(t){ClosedHash.superclass.enableUI.call(this),this.linearProblingButton.disabled=!1,this.quadraticProbingButton.disabled=!1,this.doubleHashingButton.disabled=!1},OpenHash.inheritFrom(Hash),OpenHash.POINTER_ARRAY_ELEM_WIDTH=70,OpenHash.POINTER_ARRAY_ELEM_HEIGHT=30,OpenHash.POINTER_ARRAY_ELEM_START_X=50,OpenHash.LINKED_ITEM_HEIGHT=30,OpenHash.LINKED_ITEM_WIDTH=65,OpenHash.LINKED_ITEM_Y_DELTA=50,OpenHash.LINKED_ITEM_POINTER_PERCENT=.25,OpenHash.MAX_DATA_VALUE=999,OpenHash.HASH_TABLE_SIZE=13,OpenHash.ARRAY_Y_POS=350,OpenHash.INDEX_COLOR="#0000FF",OpenHash.prototype.init=function(t,e,i){OpenHash.superclass.init.call(this,t,e,i),this.nextIndex=0,this.POINTER_ARRAY_ELEM_Y=i-OpenHash.POINTER_ARRAY_ELEM_WIDTH,this.setup()},OpenHash.prototype.addControls=function(){OpenHash.superclass.addControls.call(this)},OpenHash.prototype.insertElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Inserting element: "+String(t));var e=this.doHash(t),i=new LinkedListNode(t,this.nextIndex++,100,75);return this.cmd("CreateLinkedList",i.graphicID,t,OpenHash.LINKED_ITEM_WIDTH,OpenHash.LINKED_ITEM_HEIGHT,100,75),null!=this.hashTableValues[e]&&void 0!=this.hashTableValues[e]?(this.cmd("connect",i.graphicID,this.hashTableValues[e].graphicID),this.cmd("disconnect",this.hashTableVisual[e],this.hashTableValues[e].graphicID)):(this.cmd("SetNull",i.graphicID,1),this.cmd("SetNull",this.hashTableVisual[e],0)),this.cmd("connect",this.hashTableVisual[e],i.graphicID),i.next=this.hashTableValues[e],this.hashTableValues[e]=i,this.repositionList(e),this.cmd("SetText",this.ExplainLabel,""),this.commands},OpenHash.prototype.repositionList=function(t){for(var e=OpenHash.POINTER_ARRAY_ELEM_START_X+t*OpenHash.POINTER_ARRAY_ELEM_WIDTH,i=this.POINTER_ARRAY_ELEM_Y-OpenHash.LINKED_ITEM_Y_DELTA,s=this.hashTableValues[t];null!=s;)s.x=e,s.y=i,this.cmd("Move",s.graphicID,s.x,s.y),i-=OpenHash.LINKED_ITEM_Y_DELTA,s=s.next},OpenHash.prototype.deleteElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t);var e=this.doHash(t);if(null==this.hashTableValues[e])return this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element not in table"),this.commands;if(this.cmd("SetHighlight",this.hashTableValues[e].graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",this.hashTableValues[e].graphicID,0),this.hashTableValues[e].data==t)return null!=this.hashTableValues[e].next?this.cmd("Connect",this.hashTableVisual[e],this.hashTableValues[e].next.graphicID):this.cmd("SetNull",this.hashTableVisual[e],1),this.cmd("Delete",this.hashTableValues[e].graphicID),this.hashTableValues[e]=this.hashTableValues[e].next,this.repositionList(e),this.commands;for(var i=this.hashTableValues[e],s=this.hashTableValues[e].next,h=!1;null!=s&&!h;)this.cmd("SetHighlight",s.graphicID,1),this.cmd("Step"),this.cmd("SetHighlight",s.graphicID,0),s.data==t?(h=!0,this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element deleted"),null!=s.next?this.cmd("Connect",i.graphicID,s.next.graphicID):this.cmd("SetNull",i.graphicID,1),i.next=i.next.next,this.cmd("Delete",s.graphicID),this.repositionList(e)):(i=s,s=s.next);return h||this.cmd("SetText",this.ExplainLabel,"Deleting element: "+t+"  Element not in table"),this.commands},OpenHash.prototype.findElement=function(t){this.commands=new Array,this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t);var e=this.doHash(t),i=this.nextIndex++,s=!1,h=this.hashTableValues[e];for(this.cmd("CreateLabel",i,"",10,40,0);null!=h&&!s;)this.cmd("SetHighlight",h.graphicID,1),h.data==t?(this.cmd("SetText",i,h.data+"=="+t),s=!0):this.cmd("SetText",i,h.data+"!="+t),this.cmd("Step"),this.cmd("SetHighlight",h.graphicID,0),h=h.next;return s?this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t+"  Found!"):this.cmd("SetText",this.ExplainLabel,"Finding Element: "+t+"  Not Found!"),this.cmd("Delete",i),this.nextIndex--,this.commands},OpenHash.prototype.setup=function(){this.hashTableVisual=new Array(OpenHash.HASH_TABLE_SIZE),this.hashTableIndices=new Array(OpenHash.HASH_TABLE_SIZE),this.hashTableValues=new Array(OpenHash.HASH_TABLE_SIZE),this.indexXPos=new Array(OpenHash.HASH_TABLE_SIZE),this.indexYPos=new Array(OpenHash.HASH_TABLE_SIZE),this.ExplainLabel=this.nextIndex++,this.table_size=OpenHash.HASH_TABLE_SIZE,this.commands=[];for(var t=0;t<OpenHash.HASH_TABLE_SIZE;t++){var e=this.nextIndex++;this.cmd("CreateRectangle",e,"",OpenHash.POINTER_ARRAY_ELEM_WIDTH,OpenHash.POINTER_ARRAY_ELEM_HEIGHT,OpenHash.POINTER_ARRAY_ELEM_START_X+t*OpenHash.POINTER_ARRAY_ELEM_WIDTH,this.POINTER_ARRAY_ELEM_Y),this.hashTableVisual[t]=e,this.cmd("SetNull",this.hashTableVisual[t],1),e=this.nextIndex++,this.hashTableIndices[t]=e,this.indexXPos[t]=OpenHash.POINTER_ARRAY_ELEM_START_X+t*OpenHash.POINTER_ARRAY_ELEM_WIDTH,this.indexYPos[t]=this.POINTER_ARRAY_ELEM_Y+OpenHash.POINTER_ARRAY_ELEM_HEIGHT,this.hashTableValues[t]=null,this.cmd("CreateLabel",e,t,this.indexXPos[t],this.indexYPos[t]),this.cmd("SetForegroundColor",e,OpenHash.INDEX_COLOR)}this.cmd("CreateLabel",this.ExplainLabel,"",10,25,0),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.resetIndex=this.nextIndex},OpenHash.prototype.resetAll=function(){var t;this.commands=OpenHash.superclass.resetAll.call(this);for(var e=0;e<this.hashTableValues.length;e++)if(null!=(t=this.hashTableValues[e])){for(;null!=t;)this.cmd("Delete",t.graphicID),t=t.next;this.hashTableValues[e]=null,this.cmd("SetNull",this.hashTableVisual[e],1)}return this.commands},OpenHash.prototype.reset=function(){for(var t=0;t<this.table_size;t++)this.hashTableValues[t]=null;this.nextIndex=this.resetIndex,OpenHash.superclass.reset.call(this)},OpenHash.prototype.resetCallback=function(t){},OpenHash.prototype.disableUI=function(t){OpenHash.superclass.disableUI.call(this)},OpenHash.prototype.enableUI=function(t){OpenHash.superclass.enableUI.call(this)},Graph.inheritFrom(Algorithm),Graph.LARGE_ALLOWED=[[!1,!0,!0,!1,!0,!1,!1,!0,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],[!0,!1,!0,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!1,!0,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!0],[!0,!0,!1,!1,!1,!0,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!0,!1,!0,!1,!0,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!0,!1,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!0,!1,!0,!1,!0,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!0,!1,!0,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0],[!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!0,!1,!0,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!0,!1,!0,!1,!0,!0,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!0,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!0,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!0,!1,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!0,!1,!0,!0,!1]],Graph.LARGE_CURVE=[[0,0,-.4,0,0,0,0,0,0,0,0,0,0,0,.25,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[.4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-.25],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-.25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.4],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,.25,0,0,0,0,0,0,0,0,0,0,0,-.4,0,0]],Graph.LARGE_X_POS_LOGICAL=[600,700,800,900,650,750,850,600,700,800,900,650,750,850,600,700,800,900],Graph.LARGE_Y_POS_LOGICAL=[50,50,50,50,150,150,150,250,250,250,250,350,350,350,450,450,450,450],Graph.SMALL_ALLLOWED=[[!1,!0,!0,!0,!0,!1,!1,!1],[!0,!1,!0,!0,!1,!0,!0,!1],[!0,!0,!1,!1,!0,!0,!0,!1],[!0,!0,!1,!1,!1,!0,!1,!0],[!0,!1,!0,!1,!1,!1,!0,!0],[!1,!0,!0,!0,!1,!1,!0,!0],[!1,!0,!0,!1,!0,!0,!1,!0],[!1,!1,!1,!0,!0,!0,!0,!1]],Graph.SMALL_CURVE=[[0,.001,0,.5,-.5,0,0,0],[0,0,0,.001,0,.001,-.2,0],[0,.001,0,0,0,.2,0,0],[-.5,0,0,0,0,.001,0,.5],[.5,0,0,0,0,0,0,-.5],[0,0,-.2,0,0,0,.001,.001],[0,.2,0,0,0,0,0,0],[0,0,0,-.5,.5,0,0,0]],Graph.SMALL_X_POS_LOGICAL=[800,725,875,650,950,725,875,800],Graph.SMALL_Y_POS_LOGICAL=[25,125,125,225,225,325,325,425],Graph.SMALL_ADJ_MATRIX_X_START=700,Graph.SMALL_ADJ_MATRIX_Y_START=40,Graph.SMALL_ADJ_MATRIX_WIDTH=30,Graph.SMALL_ADJ_MATRIX_HEIGHT=30,Graph.SMALL_ADJ_LIST_X_START=600,Graph.SMALL_ADJ_LIST_Y_START=30,Graph.SMALL_ADJ_LIST_ELEM_WIDTH=50,Graph.SMALL_ADJ_LIST_ELEM_HEIGHT=30,Graph.SMALL_ADJ_LIST_HEIGHT=36,Graph.SMALL_ADJ_LIST_WIDTH=36,Graph.SMALL_ADJ_LIST_SPACING=10,Graph.LARGE_ADJ_MATRIX_X_START=575,Graph.LARGE_ADJ_MATRIX_Y_START=30,Graph.LARGE_ADJ_MATRIX_WIDTH=23,Graph.LARGE_ADJ_MATRIX_HEIGHT=23,Graph.LARGE_ADJ_LIST_X_START=600,Graph.LARGE_ADJ_LIST_Y_START=30,Graph.LARGE_ADJ_LIST_ELEM_WIDTH=50,Graph.LARGE_ADJ_LIST_ELEM_HEIGHT=26,Graph.LARGE_ADJ_LIST_HEIGHT=30,Graph.LARGE_ADJ_LIST_WIDTH=30,Graph.LARGE_ADJ_LIST_SPACING=10,Graph.VERTEX_INDEX_COLOR="#0000FF",Graph.EDGE_COLOR="#000000",Graph.SMALL_SIZE=8,Graph.LARGE_SIZE=18,Graph.HIGHLIGHT_COLOR="#0000FF",Graph.prototype.init=function(t,e,i,s,h){s=void 0==s||s,h=void 0!=h&&h,Graph.superclass.init.call(this,t,e,i),this.nextIndex=0,this.currentLayer=1,this.isDAG=h,this.directed=s,this.currentLayer=1,this.addControls(),this.setup_small()},Graph.prototype.addControls=function(t){if(void 0==t&&(t=!0),this.newGraphButton=this.addControlToAlgorithmBar("Button","New Graph"),this.newGraphButton.onclick=this.newGraphCallback.bind(this),t){var e=this.addRadioButtonGroupToAlgorithmBar(["Directed Graph","Undirected Graph"],"GraphType");this.directedGraphButton=e[0],this.directedGraphButton.onclick=this.directedGraphCallback.bind(this,!0),this.undirectedGraphButton=e[1],this.undirectedGraphButton.onclick=this.directedGraphCallback.bind(this,!1),this.directedGraphButton.checked=this.directed,this.undirectedGraphButton.checked=!this.directed}e=this.addRadioButtonGroupToAlgorithmBar(["Small Graph","Large Graph"],"GraphSize");this.smallGraphButton=e[0],this.smallGraphButton.onclick=this.smallGraphCallback.bind(this),this.largeGraphButton=e[1],this.largeGraphButton.onclick=this.largeGraphCallback.bind(this),this.smallGraphButton.checked=!0;e=this.addRadioButtonGroupToAlgorithmBar(["Logical Representation","Adjacency List Representation","Adjacency Matrix Representation"],"GraphRepresentation");this.logicalButton=e[0],this.logicalButton.onclick=this.graphRepChangedCallback.bind(this,1),this.adjacencyListButton=e[1],this.adjacencyListButton.onclick=this.graphRepChangedCallback.bind(this,2),this.adjacencyMatrixButton=e[2],this.adjacencyMatrixButton.onclick=this.graphRepChangedCallback.bind(this,3),this.logicalButton.checked=!0},Graph.prototype.directedGraphCallback=function(t,e){t!=this.directed&&(this.directed=t,this.animationManager.resetAll(),this.setup())},Graph.prototype.smallGraphCallback=function(t){this.size!=Graph.SMALL_SIZE&&(this.animationManager.resetAll(),this.setup_small())},Graph.prototype.largeGraphCallback=function(t){this.size!=Graph.LARGE_SIZE&&(this.animationManager.resetAll(),this.setup_large())},Graph.prototype.newGraphCallback=function(t){this.animationManager.resetAll(),this.setup()},Graph.prototype.graphRepChangedCallback=function(t,e){this.animationManager.setAllLayers([0,t]),this.currentLayer=t},Graph.prototype.recolorGraph=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.adj_matrix[t][e]>=0&&this.setEdgeColor(t,e,Graph.EDGE_COLOR)},Graph.prototype.highlightEdge=function(t,e,i){this.cmd("SetHighlight",this.adj_list_edges[t][e],i),this.cmd("SetHighlight",this.adj_matrixID[t][e],i),this.cmd("SetEdgeHighlight",this.circleID[t],this.circleID[e],i),this.directed||this.cmd("SetEdgeHighlight",this.circleID[e],this.circleID[t],i)},Graph.prototype.setEdgeColor=function(t,e,i){this.cmd("SetForegroundColor",this.adj_list_edges[t][e],i),this.cmd("SetTextColor",this.adj_matrixID[t][e],i),this.cmd("SetEdgeColor",this.circleID[t],this.circleID[e],i),this.directed||this.cmd("SetEdgeColor",this.circleID[e],this.circleID[t],i)},Graph.prototype.clearEdges=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.adj_matrix[t][e]>=0&&this.cmd("Disconnect",this.circleID[t],this.circleID[e])},Graph.prototype.rebuildEdges=function(){this.clearEdges(),this.buildEdges()},Graph.prototype.buildEdges=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++){var i;if(this.adj_matrix[t][e]>=0)i=this.showEdgeCosts?String(this.adj_matrix[t][e]):"",this.directed?this.cmd("Connect",this.circleID[t],this.circleID[e],Graph.EDGE_COLOR,this.adjustCurveForDirectedEdges(this.curve[t][e],this.adj_matrix[e][t]>=0),1,i):t<e&&this.cmd("Connect",this.circleID[t],this.circleID[e],Graph.EDGE_COLOR,this.curve[t][e],0,i)}},Graph.prototype.setup_small=function(){this.allowed=Graph.SMALL_ALLLOWED,this.curve=Graph.SMALL_CURVE,this.x_pos_logical=Graph.SMALL_X_POS_LOGICAL,this.y_pos_logical=Graph.SMALL_Y_POS_LOGICAL,this.adj_matrix_x_start=Graph.SMALL_ADJ_MATRIX_X_START,this.adj_matrix_y_start=Graph.SMALL_ADJ_MATRIX_Y_START,this.adj_matrix_width=Graph.SMALL_ADJ_MATRIX_WIDTH,this.adj_matrix_height=Graph.SMALL_ADJ_MATRIX_HEIGHT,this.adj_list_x_start=Graph.SMALL_ADJ_LIST_X_START,this.adj_list_y_start=Graph.SMALL_ADJ_LIST_Y_START,this.adj_list_elem_width=Graph.SMALL_ADJ_LIST_ELEM_WIDTH,this.adj_list_elem_height=Graph.SMALL_ADJ_LIST_ELEM_HEIGHT,this.adj_list_height=Graph.SMALL_ADJ_LIST_HEIGHT,this.adj_list_width=Graph.SMALL_ADJ_LIST_WIDTH,this.adj_list_spacing=Graph.SMALL_ADJ_LIST_SPACING,this.size=Graph.SMALL_SIZE,this.setup()},Graph.prototype.setup_large=function(){this.allowed=Graph.LARGE_ALLOWED,this.curve=Graph.LARGE_CURVE,this.x_pos_logical=Graph.LARGE_X_POS_LOGICAL,this.y_pos_logical=Graph.LARGE_Y_POS_LOGICAL,this.adj_matrix_x_start=Graph.LARGE_ADJ_MATRIX_X_START,this.adj_matrix_y_start=Graph.LARGE_ADJ_MATRIX_Y_START,this.adj_matrix_width=Graph.LARGE_ADJ_MATRIX_WIDTH,this.adj_matrix_height=Graph.LARGE_ADJ_MATRIX_HEIGHT,this.adj_list_x_start=Graph.LARGE_ADJ_LIST_X_START,this.adj_list_y_start=Graph.LARGE_ADJ_LIST_Y_START,this.adj_list_elem_width=Graph.LARGE_ADJ_LIST_ELEM_WIDTH,this.adj_list_elem_height=Graph.LARGE_ADJ_LIST_ELEM_HEIGHT,this.adj_list_height=Graph.LARGE_ADJ_LIST_HEIGHT,this.adj_list_width=Graph.LARGE_ADJ_LIST_WIDTH,this.adj_list_spacing=Graph.LARGE_ADJ_LIST_SPACING,this.size=Graph.LARGE_SIZE,this.setup()},Graph.prototype.adjustCurveForDirectedEdges=function(t,e){return!e||Math.abs(t)>.01?t:.1},Graph.prototype.setup=function(){this.commands=new Array,this.circleID=new Array(this.size);for(var t=0;t<this.size;t++)this.circleID[t]=this.nextIndex++,this.cmd("CreateCircle",this.circleID[t],t,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("SetTextColor",this.circleID[t],Graph.VERTEX_INDEX_COLOR,0),this.cmd("SetLayer",this.circleID[t],1);for(this.adj_matrix=new Array(this.size),this.adj_matrixID=new Array(this.size),t=0;t<this.size;t++)this.adj_matrix[t]=new Array(this.size),this.adj_matrixID[t]=new Array(this.size);var e;e=this.size==Graph.SMALL_SIZE?this.directed?.4:.5:this.directed?.35:.6;if(this.directed){for(t=0;t<this.size;t++)for(var i=0;i<this.size;i++)this.adj_matrixID[t][i]=this.nextIndex++,this.allowed[t][i]&&Math.random()<=e&&(t<i||Math.abs(this.curve[t][i])<.01||-1==this.adj_matrixID[i][t])&&(!this.isDAG||t<i)?this.showEdgeCosts?this.adj_matrix[t][i]=Math.floor(9*Math.random())+1:this.adj_matrix[t][i]=1:this.adj_matrix[t][i]=-1;this.buildEdges()}else{for(t=0;t<this.size;t++)for(i=t+1;i<this.size;i++)if(this.adj_matrixID[t][i]=this.nextIndex++,this.adj_matrixID[i][t]=this.nextIndex++,this.allowed[t][i]&&Math.random()<=e){if(this.showEdgeCosts?this.adj_matrix[t][i]=Math.floor(9*Math.random())+1:this.adj_matrix[t][i]=1,this.adj_matrix[i][t]=this.adj_matrix[t][i],this.showEdgeCosts)var s=String(this.adj_matrix[t][i]);else s="";this.cmd("Connect",this.circleID[t],this.circleID[i],Graph.EDGE_COLOR,this.curve[t][i],0,s)}else this.adj_matrix[t][i]=-1,this.adj_matrix[i][t]=-1;for(this.buildEdges(),t=0;t<this.size;t++)this.adj_matrix[t][t]=-1}this.buildAdjList(),this.buildAdjMatrix(),this.animationManager.setAllLayers([0,this.currentLayer]),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.clearHistory()},Graph.prototype.resetAll=function(){},Graph.prototype.buildAdjMatrix=function(){this.adj_matrix_index_x=new Array(this.size),this.adj_matrix_index_y=new Array(this.size);for(var t=0;t<this.size;t++){this.adj_matrix_index_x[t]=this.nextIndex++,this.adj_matrix_index_y[t]=this.nextIndex++,this.cmd("CreateLabel",this.adj_matrix_index_x[t],t,this.adj_matrix_x_start+t*this.adj_matrix_width,this.adj_matrix_y_start-this.adj_matrix_height),this.cmd("SetForegroundColor",this.adj_matrix_index_x[t],Graph.VERTEX_INDEX_COLOR),this.cmd("CreateLabel",this.adj_matrix_index_y[t],t,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("SetForegroundColor",this.adj_matrix_index_y[t],Graph.VERTEX_INDEX_COLOR),this.cmd("SetLayer",this.adj_matrix_index_x[t],3),this.cmd("SetLayer",this.adj_matrix_index_y[t],3);for(var e=0;e<this.size;e++){if(this.adj_matrixID[t][e]=this.nextIndex++,this.adj_matrix[t][e]<0)var i="";else i=String(this.adj_matrix[t][e]);this.cmd("CreateRectangle",this.adj_matrixID[t][e],i,this.adj_matrix_width,this.adj_matrix_height,this.adj_matrix_x_start+e*this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("SetLayer",this.adj_matrixID[t][e],3)}}},Graph.prototype.removeAdjList=function(){for(var t=0;t<this.size;t++){this.cmd("Delete",this.adj_list_list[t],"RAL1"),this.cmd("Delete",this.adj_list_index[t],"RAL2");for(var e=0;e<this.size;e++)this.adj_matrix[t][e]>0&&this.cmd("Delete",this.adj_list_edges[t][e],"RAL3")}},Graph.prototype.buildAdjList=function(){this.adj_list_index=new Array(this.size),this.adj_list_list=new Array(this.size),this.adj_list_edges=new Array(this.size);for(var t=0;t<this.size;t++){this.adj_list_index[t]=this.nextIndex++,this.adj_list_edges[t]=new Array(this.size),this.adj_list_index[t]=this.nextIndex++,this.adj_list_list[t]=this.nextIndex++,this.cmd("CreateRectangle",this.adj_list_list[t],"",this.adj_list_width,this.adj_list_height,this.adj_list_x_start,this.adj_list_y_start+t*this.adj_list_height),this.cmd("SetLayer",this.adj_list_list[t],2),this.cmd("CreateLabel",this.adj_list_index[t],t,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("SetForegroundColor",this.adj_list_index[t],Graph.VERTEX_INDEX_COLOR),this.cmd("SetLayer",this.adj_list_index[t],2);for(var e=this.adj_list_list[t],i=this.adj_list_x_start+this.adj_list_width+this.adj_list_spacing,s=!1,h=0;h<this.size;h++)this.adj_matrix[t][h]>0&&(s=!0,this.adj_list_edges[t][h]=this.nextIndex++,this.cmd("CreateLinkedList",this.adj_list_edges[t][h],h,this.adj_list_elem_width,this.adj_list_elem_height,i,this.adj_list_y_start+t*this.adj_list_height,.25,0,1,2),this.cmd("SetNull",this.adj_list_edges[t][h],1),this.cmd("SetText",this.adj_list_edges[t][h],this.adj_matrix[t][h],1),this.cmd("SetTextColor",this.adj_list_edges[t][h],Graph.VERTEX_INDEX_COLOR,0),this.cmd("SetLayer",this.adj_list_edges[t][h],2),i=i+this.adj_list_elem_width+this.adj_list_spacing,this.cmd("Connect",e,this.adj_list_edges[t][h]),this.cmd("SetNull",e,0),e=this.adj_list_edges[t][h]);s||this.cmd("SetNull",this.adj_list_list[t],1)}},Graph.prototype.reset=function(){},Graph.prototype.disableUI=function(t){this.newGraphButton.disabled=!0,null!=this.directedGraphButton&&void 0!=this.directedGraphButton&&(this.directedGraphButton.disabled=!0),null!=this.undirectedGraphButton&&void 0!=this.undirectedGraphButton&&(this.undirectedGraphButton.disabled=!0),this.smallGraphButton.disabled=!0,this.largeGraphButton.disabled=!0},Graph.prototype.enableUI=function(t){this.newGraphButton.disabled=!1,null!=this.directedGraphButton&&void 0!=this.directedGraphButton&&(this.directedGraphButton.disabled=!1),null!=this.undirectedGraphButton&&void 0!=this.undirectedGraphButton&&(this.undirectedGraphButton.disabled=!1),this.smallGraphButton.disabled=!1,this.largeGraphButton.disabled=!1},BFS.inheritFrom(Graph),BFS.AUX_ARRAY_WIDTH=25,BFS.AUX_ARRAY_HEIGHT=25,BFS.AUX_ARRAY_START_Y=50,BFS.VISITED_START_X=475,BFS.PARENT_START_X=400,BFS.HIGHLIGHT_CIRCLE_COLOR="#000000",BFS.BFS_TREE_COLOR="#0000FF",BFS.BFS_QUEUE_HEAD_COLOR="#0000FF",BFS.QUEUE_START_X=30,BFS.QUEUE_START_Y=50,BFS.QUEUE_SPACING=30,BFS.prototype.addControls=function(){this.addLabelToAlgorithmBar("Start Vertex: "),this.startField=this.addControlToAlgorithmBar("Text",""),this.startField.onkeydown=this.returnSubmit(this.startField,this.startCallback.bind(this),2,!0),this.startField.size=2,this.startButton=this.addControlToAlgorithmBar("Button","Run BFS"),this.startButton.onclick=this.startCallback.bind(this),BFS.superclass.addControls.call(this)},BFS.prototype.init=function(t,e,i,s){showEdgeCosts=!1,BFS.superclass.init.call(this,t,e,i,s)},BFS.prototype.setup=function(){BFS.superclass.setup.call(this),this.messageID=new Array,this.commands=new Array,this.visitedID=new Array(this.size),this.visitedIndexID=new Array(this.size),this.parentID=new Array(this.size),this.parentIndexID=new Array(this.size);for(var t=0;t<this.size;t++)this.visitedID[t]=this.nextIndex++,this.visitedIndexID[t]=this.nextIndex++,this.parentID[t]=this.nextIndex++,this.parentIndexID[t]=this.nextIndex++,this.cmd("CreateRectangle",this.visitedID[t],"f",BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_HEIGHT,BFS.VISITED_START_X,BFS.AUX_ARRAY_START_Y+t*BFS.AUX_ARRAY_HEIGHT),this.cmd("CreateLabel",this.visitedIndexID[t],t,BFS.VISITED_START_X-BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_START_Y+t*BFS.AUX_ARRAY_HEIGHT),this.cmd("SetForegroundColor",this.visitedIndexID[t],BFS.VERTEX_INDEX_COLOR),this.cmd("CreateRectangle",this.parentID[t],"",BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_HEIGHT,BFS.PARENT_START_X,BFS.AUX_ARRAY_START_Y+t*BFS.AUX_ARRAY_HEIGHT),this.cmd("CreateLabel",this.parentIndexID[t],t,BFS.PARENT_START_X-BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_START_Y+t*BFS.AUX_ARRAY_HEIGHT),this.cmd("SetForegroundColor",this.parentIndexID[t],BFS.VERTEX_INDEX_COLOR);this.cmd("CreateLabel",this.nextIndex++,"Parent",BFS.PARENT_START_X-BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_START_Y-1.5*BFS.AUX_ARRAY_HEIGHT,0),this.cmd("CreateLabel",this.nextIndex++,"Visited",BFS.VISITED_START_X-BFS.AUX_ARRAY_WIDTH,BFS.AUX_ARRAY_START_Y-1.5*BFS.AUX_ARRAY_HEIGHT,0),this.cmd("CreateLabel",this.nextIndex++,"BFS Queue",BFS.QUEUE_START_X,BFS.QUEUE_START_Y-30,0),this.animationManager.setAllLayers([0,this.currentLayer]),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.highlightCircleL=this.nextIndex++,this.highlightCircleAL=this.nextIndex++,this.highlightCircleAM=this.nextIndex++},BFS.prototype.startCallback=function(t){""!=this.startField.value&&(startvalue=this.startField.value,this.startField.value="",parseInt(startvalue)<this.size&&this.implementAction(this.doBFS.bind(this),startvalue))},BFS.prototype.doBFS=function(t){this.visited=new Array(this.size),this.commands=new Array,this.queue=new Array(this.size);var e=0,i=0,s=new Array(this.size),h=0;if(null!=this.messageID)for(var r=0;r<this.messageID.length;r++)this.cmd("Delete",this.messageID[r]);for(this.rebuildEdges(),this.messageID=new Array,r=0;r<this.size;r++)this.cmd("SetText",this.visitedID[r],"f"),this.cmd("SetText",this.parentID[r],""),this.visited[r]=!1,s[r]=this.nextIndex++;var n=parseInt(t);for(this.visited[n]=!0,this.queue[i]=n,this.cmd("CreateLabel",s[i],n,BFS.QUEUE_START_X+h*BFS.QUEUE_SPACING,BFS.QUEUE_START_Y),h+=1,i=(i+1)%this.size;h>0;){n=this.queue[e],this.cmd("CreateHighlightCircle",this.highlightCircleL,BFS.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[n],this.y_pos_logical[n]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,BFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+n*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,BFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+n*this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),this.cmd("SetTextColor",s[e],BFS.BFS_QUEUE_HEAD_COLOR);for(var a=0;a<this.size;a++)this.adj_matrix[n][a]>0&&(this.highlightEdge(n,a,1),this.cmd("SetHighlight",this.visitedID[a],1),this.cmd("Step"),this.visited[a]?this.highlightEdge(n,a,0):(this.visited[a]=!0,this.cmd("SetText",this.visitedID[a],"T"),this.cmd("SetText",this.parentID[a],n),this.highlightEdge(n,a,0),this.cmd("Disconnect",this.circleID[n],this.circleID[a]),this.cmd("Connect",this.circleID[n],this.circleID[a],BFS.BFS_TREE_COLOR,this.curve[n][a],1,""),this.queue[i]=a,this.cmd("CreateLabel",s[i],a,BFS.QUEUE_START_X+h*BFS.QUEUE_SPACING,BFS.QUEUE_START_Y),i=(i+1)%this.size,h+=1),this.cmd("SetHighlight",this.visitedID[a],0),this.cmd("Step"));for(this.cmd("Delete",s[e]),e=(e+1)%this.size,h-=1,r=0;r<h;r++){var o=(r+e)%this.size;this.cmd("Move",s[o],BFS.QUEUE_START_X+r*BFS.QUEUE_SPACING,BFS.QUEUE_START_Y)}this.cmd("Delete",this.highlightCircleL),this.cmd("Delete",this.highlightCircleAM),this.cmd("Delete",this.highlightCircleAL)}return this.commands},BFS.prototype.reset=function(){this.messageID=new Array},BFS.prototype.enableUI=function(t){this.startField.disabled=!1,this.startButton.disabled=!1,this.startButton,BFS.superclass.enableUI.call(this,t)},BFS.prototype.disableUI=function(t){this.startField.disabled=!0,this.startButton.disabled=!0,BFS.superclass.disableUI.call(this,t)},ConnectedComponent.AUX_ARRAY_WIDTH=25,ConnectedComponent.AUX_ARRAY_HEIGHT=25,ConnectedComponent.AUX_ARRAY_START_Y=100,ConnectedComponent.VISITED_START_X=475,ConnectedComponent.PARENT_START_X=400,ConnectedComponent.D_X_POS_SMALL=[760,685,915,610,910,685,915,760],ConnectedComponent.F_X_POS_SMALL=[760,685,915,610,910,685,915,760],ConnectedComponent.D_Y_POS_SMALL=[18,118,118,218,218,318,318,418],ConnectedComponent.F_Y_POS_SMALL=[32,132,132,232,232,332,332,432],ConnectedComponent.D_X_POS_LARGE=[560,660,760,860,610,710,810,560,660,760,860,610,710,810,560,660,760,860],ConnectedComponent.F_X_POS_LARGE=[560,660,760,860,610,710,810,560,660,760,860,610,710,810,560,660,760,860],ConnectedComponent.D_Y_POS_LARGE=[31,31,31,31,137,137,137,237,237,237,237,337,337,337,437,437,437,437],ConnectedComponent.F_Y_POS_LARGE=[62,62,62,62,162,162,162,262,262,262,262,362,362,362,462,462,462,462],ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR="#000000",ConnectedComponent.DFS_TREE_COLOR="#0000FF",ConnectedComponent.inheritFrom(Graph),ConnectedComponent.prototype.addControls=function(){this.startButton=this.addControlToAlgorithmBar("Button","Run Connected Component"),this.startButton.onclick=this.startCallback.bind(this),ConnectedComponent.superclass.addControls.call(this,!1)},ConnectedComponent.prototype.init=function(t,e,i){this.showEdgeCosts=!1,ConnectedComponent.superclass.init.call(this,t,e,i,!0,!1)},ConnectedComponent.prototype.setup=function(){ConnectedComponent.superclass.setup.call(this),this.animationManager.setAllLayers([0,this.currentLayer]),this.messageID=new Array,this.commands=new Array,this.animationManager.clearHistory(),this.messageID=new Array,this.commands=new Array,this.highlightCircleL=this.nextIndex++,this.highlightCircleAL=this.nextIndex++,this.highlightCircleAM=this.nextIndex++,this.initialIndex=this.nextIndex,this.old_adj_matrix=new Array(this.size),this.old_adj_list_list=new Array(this.size),this.old_adj_list_index=new Array(this.size),this.old_adj_list_edges=new Array(this.size);for(var t=0;t<this.size;t++){this.old_adj_matrix[t]=new Array(this.size),this.old_adj_list_index[t]=this.adj_list_index[t],this.old_adj_list_list[t]=this.adj_list_list[t],this.old_adj_list_edges[t]=new Array(this.size);for(var e=0;e<this.size;e++)this.old_adj_matrix[t][e]=this.adj_matrix[t][e],this.adj_matrix[t][e]>0&&(this.old_adj_list_edges[t][e]=this.adj_list_edges[t][e])}},ConnectedComponent.prototype.startCallback=function(t){this.implementAction(this.doCC.bind(this),"")},ConnectedComponent.prototype.transpose=function(){for(var t=0;t<this.size;t++)for(var e=t+1;e<this.size;e++){var i=this.adj_matrix[t][e];this.adj_matrix[t][e]=this.adj_matrix[e][t],this.adj_matrix[e][t]=i}},ConnectedComponent.prototype.doCC=function(t){var e,i;if(this.visited=new Array(this.size),this.commands=new Array,null!=this.messageID)for(e=0;e<this.messageID.length;e++)this.cmd("Delete",this.messageID[e],1);for(this.rebuildEdges(),this.messageID=new Array,this.d_timesID_L=new Array(this.size),this.f_timesID_L=new Array(this.size),this.d_timesID_AL=new Array(this.size),this.f_timesID_AL=new Array(this.size),this.d_times=new Array(this.size),this.f_times=new Array(this.size),this.currentTime=1,e=0;e<this.size;e++)this.d_timesID_L[e]=this.nextIndex++,this.f_timesID_L[e]=this.nextIndex++,this.d_timesID_AL[e]=this.nextIndex++,this.f_timesID_AL[e]=this.nextIndex++;for(this.messageY=30,i=0;i<this.size;i++)if(!this.visited[i]){if(this.cmd("CreateHighlightCircle",this.highlightCircleL,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[i],this.y_pos_logical[i]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+i*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+i*this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),i>0){var s=this.nextIndex++;this.messageID.push(s),this.cmd("CreateRectangle",s,"",200,0,10,this.messageY,"left","bottom"),this.messageY=this.messageY+20}this.dfsVisit(i,10,!1),this.cmd("Delete",this.highlightCircleL,2),this.cmd("Delete",this.highlightCircleAL,3),this.cmd("Delete",this.highlightCircleAM,4)}for(this.clearEdges(),this.removeAdjList(),this.transpose(),this.buildEdges(),this.buildAdjList(),this.currentTime=1,e=0;e<this.size;e++)for(n=0;n<this.size;n++)this.adj_matrix[e][n]>=0?this.cmd("SetText",this.adj_matrixID[e][n],"1"):this.cmd("SetText",this.adj_matrixID[e][n],"");for(i=0;i<this.size;i++)this.visited[i]=!1,this.cmd("Delete",this.d_timesID_L[i],5),this.cmd("Delete",this.f_timesID_L[i],6),this.cmd("Delete",this.d_timesID_AL[i],7),this.cmd("Delete",this.f_timesID_AL[i],8);var h=new Array(this.size),r=new Array(this.size);for(i=0;i<this.size;i++)h[i]=i,r[i]=this.nextIndex++,this.cmd("CreateLabel",r[i],"Vertex: "+String(i)+" f = "+String(this.f_times[i]),400,110+20*i,0);for(this.cmd("Step"),e=1;e<this.size;e++){for(var n=e,a=this.f_times[e],o=h[e],l=r[e];n>0&&this.f_times[n-1]<a;)this.f_times[n]=this.f_times[n-1],h[n]=h[n-1],r[n]=r[n-1],n--;this.f_times[n]=a,h[n]=o,r[n]=l}for(i=0;i<this.size;i++)this.cmd("Move",r[i],400,110+20*i);for(e=0;e<this.messageID.length;e++)this.cmd("Delete",this.messageID[e],9);this.messageID=new Array,this.messageY=30;var d=1;for(e=0;e<this.size;e++){if(i=h[e],!this.visited[i]){var c=this.nextIndex++;this.messageID.push(c);var g=this.nextIndex++;this.messageID.push(g),this.cmd("CreateRectangle",c,"",200,0,50,this.messageY+8,"left","center"),this.cmd("CreateLabel",g,"CC #"+String(d++),10,this.messageY,0),this.cmd("SetForegroundColor",c,"#004B00"),this.cmd("SetForegroundColor",g,"#004B00"),this.messageY=this.messageY+20,this.cmd("CreateHighlightCircle",this.highlightCircleL,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[i],this.y_pos_logical[i]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+i*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,ConnectedComponent.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+i*this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),this.dfsVisit(i,75,!0),this.cmd("Delete",this.highlightCircleL,10),this.cmd("Delete",this.highlightCircleAL,11),this.cmd("Delete",this.highlightCircleAM,12)}this.cmd("Delete",r[e],13)}for(i=0;i<this.size;i++)this.cmd("Delete",this.d_timesID_L[i],14),this.cmd("Delete",this.f_timesID_L[i],15),this.cmd("Delete",this.d_timesID_AL[i],16),this.cmd("Delete",this.f_timesID_AL[i],17);return this.commands},ConnectedComponent.prototype.setup_large=function(){this.d_x_pos=ConnectedComponent.D_X_POS_LARGE,this.d_y_pos=ConnectedComponent.D_Y_POS_LARGE,this.f_x_pos=ConnectedComponent.F_X_POS_LARGE,this.f_y_pos=ConnectedComponent.F_Y_POS_LARGE,ConnectedComponent.superclass.setup_large.call(this)},ConnectedComponent.prototype.setup_small=function(){this.d_x_pos=ConnectedComponent.D_X_POS_SMALL,this.d_y_pos=ConnectedComponent.D_Y_POS_SMALL,this.f_x_pos=ConnectedComponent.F_X_POS_SMALL,this.f_y_pos=ConnectedComponent.F_Y_POS_SMALL,ConnectedComponent.superclass.setup_small.call(this)},ConnectedComponent.prototype.dfsVisit=function(t,e,i){if(i){var s=this.nextIndex++;this.messageID.push(s),this.cmd("CreateLabel",s,"Vertex "+String(t),5,this.messageY,0),this.cmd("SetForegroundColor",s,"#0000FF")}var h=this.nextIndex++;if(this.messageID.push(h),this.cmd("CreateLabel",h,"DFS("+String(t)+")",e,this.messageY,0),this.messageY=this.messageY+20,!this.visited[t]){this.d_times[t]=this.currentTime++,this.cmd("CreateLabel",this.d_timesID_L[t],"d = "+String(this.d_times[t]),this.d_x_pos[t],this.d_y_pos[t]),this.cmd("CreateLabel",this.d_timesID_AL[t],"d = "+String(this.d_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height-.25*this.adj_list_height),this.cmd("SetLayer",this.d_timesID_L[t],1),this.cmd("SetLayer",this.d_timesID_AL[t],2),this.visited[t]=!0,this.cmd("Step");for(var r=0;r<this.size;r++)this.adj_matrix[t][r]>0&&(this.highlightEdge(t,r,1),this.visited[r]&&(h=this.nextIndex,this.cmd("CreateLabel",h,"Vertex "+String(r)+" already this.visited.",e,this.messageY,0)),this.cmd("Step"),this.highlightEdge(t,r,0),this.visited[r]&&this.cmd("Delete",h,"DNM"),this.visited[r]||(this.cmd("Disconnect",this.circleID[t],this.circleID[r]),this.cmd("Connect",this.circleID[t],this.circleID[r],ConnectedComponent.DFS_TREE_COLOR,this.curve[t][r],1,""),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[r],this.y_pos_logical[r]),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+r*this.adj_list_height),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+r*this.adj_matrix_height),this.cmd("Step"),this.dfsVisit(r,e+10,i),h=this.nextIndex,this.cmd("CreateLabel",h,"Returning from recursive call: DFS("+String(r)+")",e+20,this.messageY,0),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("Step"),this.cmd("Delete",h,18)),this.cmd("Step"));this.f_times[t]=this.currentTime++,this.cmd("CreateLabel",this.f_timesID_L[t],"f = "+String(this.f_times[t]),this.f_x_pos[t],this.f_y_pos[t]),this.cmd("CreateLabel",this.f_timesID_AL[t],"f = "+String(this.f_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height+.25*this.adj_list_height),this.cmd("SetLayer",this.f_timesID_L[t],1),this.cmd("SetLayer",this.f_timesID_AL[t],2)}},ConnectedComponent.prototype.reset=function(){this.messageID=new Array,this.nextIndex=this.initialIndex;for(var t=0;t<this.size;t++){this.adj_list_list[t]=this.old_adj_list_list[t],this.adj_list_index[t]=this.old_adj_list_index[t];for(var e=0;e<this.size;e++)this.adj_matrix[t][e]=this.old_adj_matrix[t][e],this.adj_matrix[t][e]>0&&(this.adj_list_edges[t][e]=this.old_adj_list_edges[t][e])}},ConnectedComponent.prototype.enableUI=function(t){this.startButton.disabled=!1,ConnectedComponent.superclass.enableUI.call(this,t)},ConnectedComponent.prototype.disableUI=function(t){this.startButton.disabled=!0,ConnectedComponent.superclass.disableUI.call(this,t)},DFS.AUX_ARRAY_WIDTH=25,DFS.AUX_ARRAY_HEIGHT=25,DFS.AUX_ARRAY_START_Y=50,DFS.VISITED_START_X=475,DFS.PARENT_START_X=400,DFS.HIGHLIGHT_CIRCLE_COLOR="#000000",DFS.DFS_TREE_COLOR="#0000FF",DFS.BFS_QUEUE_HEAD_COLOR="#0000FF",DFS.QUEUE_START_X=30,DFS.QUEUE_START_Y=50,DFS.QUEUE_SPACING=30,DFS.inheritFrom(Graph),DFS.prototype.addControls=function(){this.addLabelToAlgorithmBar("Start Vertex: "),this.startField=this.addControlToAlgorithmBar("Text",""),this.startField.onkeydown=this.returnSubmit(this.startField,this.startCallback.bind(this),2,!0),this.startButton=this.addControlToAlgorithmBar("Button","Run DFS"),this.startButton.onclick=this.startCallback.bind(this),DFS.superclass.addControls.call(this)},DFS.prototype.init=function(t,e,i,s){showEdgeCosts=!1,DFS.superclass.init.call(this,t,e,i,s)},DFS.prototype.setup=function(){DFS.superclass.setup.call(this),this.messageID=new Array,this.commands=new Array,this.visitedID=new Array(this.size),this.visitedIndexID=new Array(this.size),this.parentID=new Array(this.size),this.parentIndexID=new Array(this.size);for(var t=0;t<this.size;t++)this.visitedID[t]=this.nextIndex++,this.visitedIndexID[t]=this.nextIndex++,this.parentID[t]=this.nextIndex++,this.parentIndexID[t]=this.nextIndex++,this.cmd("CreateRectangle",this.visitedID[t],"f",DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_HEIGHT,DFS.VISITED_START_X,DFS.AUX_ARRAY_START_Y+t*DFS.AUX_ARRAY_HEIGHT),this.cmd("CreateLabel",this.visitedIndexID[t],t,DFS.VISITED_START_X-DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_START_Y+t*DFS.AUX_ARRAY_HEIGHT),this.cmd("SetForegroundColor",this.visitedIndexID[t],DFS.VERTEX_INDEX_COLOR),this.cmd("CreateRectangle",this.parentID[t],"",DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_HEIGHT,DFS.PARENT_START_X,DFS.AUX_ARRAY_START_Y+t*DFS.AUX_ARRAY_HEIGHT),this.cmd("CreateLabel",this.parentIndexID[t],t,DFS.PARENT_START_X-DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_START_Y+t*DFS.AUX_ARRAY_HEIGHT),this.cmd("SetForegroundColor",this.parentIndexID[t],DFS.VERTEX_INDEX_COLOR);this.cmd("CreateLabel",this.nextIndex++,"Parent",DFS.PARENT_START_X-DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_START_Y-1.5*DFS.AUX_ARRAY_HEIGHT,0),this.cmd("CreateLabel",this.nextIndex++,"Visited",DFS.VISITED_START_X-DFS.AUX_ARRAY_WIDTH,DFS.AUX_ARRAY_START_Y-1.5*DFS.AUX_ARRAY_HEIGHT,0),this.animationManager.setAllLayers([0,this.currentLayer]),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.highlightCircleL=this.nextIndex++,this.highlightCircleAL=this.nextIndex++,this.highlightCircleAM=this.nextIndex++},DFS.prototype.startCallback=function(t){""!=this.startField.value&&(startvalue=this.startField.value,this.startField.value="",parseInt(startvalue)<this.size&&this.implementAction(this.doDFS.bind(this),startvalue))},DFS.prototype.doDFS=function(t){if(this.visited=new Array(this.size),this.commands=new Array,null!=this.messageID)for(var e=0;e<this.messageID.length;e++)this.cmd("Delete",this.messageID[e]);for(this.rebuildEdges(),this.messageID=new Array,e=0;e<this.size;e++)this.cmd("SetText",this.visitedID[e],"f"),this.cmd("SetText",this.parentID[e],""),this.visited[e]=!1;var i=parseInt(t);return this.cmd("CreateHighlightCircle",this.highlightCircleL,DFS.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[i],this.y_pos_logical[i]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,DFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+i*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,DFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+i*this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),this.messageY=30,this.dfsVisit(i,10),this.cmd("Delete",this.highlightCircleL),this.cmd("Delete",this.highlightCircleAL),this.cmd("Delete",this.highlightCircleAM),this.commands},DFS.prototype.dfsVisit=function(t,e){var i=this.nextIndex++;if(this.messageID.push(i),this.cmd("CreateLabel",i,"DFS("+String(t)+")",e,this.messageY,0),this.messageY=this.messageY+20,!this.visited[t]){this.visited[t]=!0,this.cmd("SetText",this.visitedID[t],"T"),this.cmd("Step");for(var s=0;s<this.size;s++)this.adj_matrix[t][s]>0&&(this.highlightEdge(t,s,1),this.cmd("SetHighlight",this.visitedID[s],1),this.visited[s]&&(i=this.nextIndex,this.cmd("CreateLabel",i,"Vertex "+String(s)+" already visited.",e,this.messageY,0)),this.cmd("Step"),this.highlightEdge(t,s,0),this.cmd("SetHighlight",this.visitedID[s],0),this.visited[s]&&this.cmd("Delete",i),this.visited[s]||(this.cmd("Disconnect",this.circleID[t],this.circleID[s]),this.cmd("Connect",this.circleID[t],this.circleID[s],DFS.DFS_TREE_COLOR,this.curve[t][s],1,""),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[s],this.y_pos_logical[s]),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+s*this.adj_list_height),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+s*this.adj_matrix_height),this.cmd("SetText",this.parentID[s],t),this.cmd("Step"),this.dfsVisit(s,e+20),i=this.nextIndex,this.cmd("CreateLabel",i,"Returning from recursive call: DFS("+String(s)+")",e+20,this.messageY,0),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("Step"),this.cmd("Delete",i)),this.cmd("Step"))}},DFS.prototype.reset=function(){this.messageID=new Array},DFS.prototype.enableUI=function(t){this.startField.disabled=!1,this.startButton.disabled=!1,this.startButton,DFS.superclass.enableUI.call(this,t)},DFS.prototype.disableUI=function(t){this.startField.disabled=!0,this.startButton.disabled=!0,DFS.superclass.disableUI.call(this,t)},DijkstraPrim.TABLE_ENTRY_WIDTH=50,DijkstraPrim.TABLE_ENTRY_HEIGHT=25,DijkstraPrim.TABLE_START_X=50,DijkstraPrim.TABLE_START_Y=80,DijkstraPrim.MESSAGE_LABEL_1_X=20,DijkstraPrim.MESSAGE_LABEL_1_Y=10,DijkstraPrim.HIGHLIGHT_CIRCLE_COLOR="#000000",DijkstraPrim.inheritFrom(Graph),DijkstraPrim.prototype.addControls=function(){this.addLabelToAlgorithmBar("Start Vertex: "),this.startField=this.addControlToAlgorithmBar("Text",""),this.startField.onkeydown=this.returnSubmit(this.startField,this.startCallback.bind(this),2,!0),this.startField.size=2,this.runningDijkstra?this.startButton=this.addControlToAlgorithmBar("Button","Run Dijkstra"):this.startButton=this.addControlToAlgorithmBar("Button","Run Prim"),this.startButton.onclick=this.startCallback.bind(this),DijkstraPrim.superclass.addControls.call(this,this.runningDijkstra)},DijkstraPrim.prototype.init=function(t,e,i,s){this.showEdgeCosts=!0,DijkstraPrim.superclass.init.call(this,t,e,i,s,!1)},DijkstraPrim.prototype.setup=function(){this.message1ID=this.nextIndex++,DijkstraPrim.superclass.setup.call(this),this.commands=new Array,this.cmd("CreateLabel",this.message1ID,"",DijkstraPrim.MESSAGE_LABEL_1_X,DijkstraPrim.MESSAGE_LABEL_1_Y,0),this.vertexID=new Array(this.size),this.knownID=new Array(this.size),this.distanceID=new Array(this.size),this.pathID=new Array(this.size),this.known=new Array(this.size),this.distance=new Array(this.size),this.path=new Array(this.size),this.messageID=null;for(var t=0;t<this.size;t++)this.vertexID[t]=this.nextIndex++,this.knownID[t]=this.nextIndex++,this.distanceID[t]=this.nextIndex++,this.pathID[t]=this.nextIndex++,this.cmd("CreateRectangle",this.vertexID[t],t,DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_ENTRY_HEIGHT,DijkstraPrim.TABLE_START_X,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateRectangle",this.knownID[t],"",DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_ENTRY_HEIGHT,DijkstraPrim.TABLE_START_X+DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateRectangle",this.distanceID[t],"",DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_ENTRY_HEIGHT,DijkstraPrim.TABLE_START_X+2*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateRectangle",this.pathID[t],"",DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_ENTRY_HEIGHT,DijkstraPrim.TABLE_START_X+3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("SetTextColor",this.vertexID[t],DijkstraPrim.VERTEX_INDEX_COLOR);this.cmd("CreateLabel",this.nextIndex++,"Vertex",DijkstraPrim.TABLE_START_X,DijkstraPrim.TABLE_START_Y-DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateLabel",this.nextIndex++,"Known",DijkstraPrim.TABLE_START_X+DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y-DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateLabel",this.nextIndex++,"Cost",DijkstraPrim.TABLE_START_X+2*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y-DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("CreateLabel",this.nextIndex++,"Path",DijkstraPrim.TABLE_START_X+3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y-DijkstraPrim.TABLE_ENTRY_HEIGHT),this.animationManager.setAllLayers([0,this.currentLayer]),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.comparisonMessageID=this.nextIndex++},DijkstraPrim.prototype.findCheapestUnknown=function(){var t=-1;this.cmd("SetText",this.message1ID,"Finding Cheapest Uknown Vertex");for(var e=0;e<this.size;e++)this.known[e]||this.cmd("SetHighlight",this.distanceID[e],1),!this.known[e]&&-1!=this.distance[e]&&(-1==t||this.distance[e]<this.distance[t])&&(t=e);if(-1==t){2}this.cmd("Step");for(e=0;e<this.size;e++)this.known[e]||this.cmd("SetHighlight",this.distanceID[e],0);return t},DijkstraPrim.prototype.doDijkstraPrim=function(t){this.commands=new Array,this.runningDijkstra||this.recolorGraph();for(var e=parseInt(t),i=0;i<this.size;i++)this.known[i]=!1,this.distance[i]=-1,this.path[i]=-1,this.cmd("SetText",this.knownID[i],"F"),this.cmd("SetText",this.distanceID[i],"INF"),this.cmd("SetText",this.pathID[i],"-1"),this.cmd("SetTextColor",this.knownID[i],"#000000");if(null!=this.messageID)for(i=0;i<this.messageID.length;i++)this.cmd("Delete",this.messageID[i]);for(this.messageID=new Array,this.distance[e]=0,this.cmd("SetText",this.distanceID[e],0),i=0;i<this.size&&!((e=this.findCheapestUnknown())<0);i++){this.cmd("SetText",this.message1ID,"Cheapest Unknown Vertex: "+e),this.cmd("SetHighlight",this.distanceID[e],1),this.cmd("SetHighlight",this.circleID[e],1),this.cmd("Step"),this.cmd("SetHighlight",this.distanceID[e],0),this.cmd("SetText",this.message1ID,"Setting known field to True"),this.cmd("SetHighlight",this.knownID[e],1),this.known[e]=!0,this.cmd("SetText",this.knownID[e],"T"),this.cmd("SetTextColor",this.knownID[e],"#AAAAAA"),this.cmd("Step"),this.cmd("SetHighlight",this.knownID[e],0),this.cmd("SetText",this.message1ID,"Updating neighbors of vertex "+e);for(var s=0;s<this.size;s++)if(this.adj_matrix[e][s]>=0){if(this.highlightEdge(e,s,1),this.known[s])this.cmd("CreateLabel",this.comparisonMessageID,"Vertex "+String(s)+" known",DijkstraPrim.TABLE_START_X+5*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("SetHighlight",this.knownID[s],1);else{this.cmd("SetHighlight",this.distanceID[e],1),this.cmd("SetHighlight",this.distanceID[s],1);var h=String(this.distance[s]);this.distance[s]<0&&(h="INF"),this.runningDijkstra?this.distance[s]<0||this.distance[s]>this.distance[e]+this.adj_matrix[e][s]?this.cmd("CreateLabel",this.comparisonMessageID,h+" > "+String(this.distance[e])+" + "+String(this.adj_matrix[e][s]),DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT):this.cmd("CreateLabel",this.comparisonMessageID,"!("+String(this.distance[s])+" > "+String(this.distance[e])+" + "+String(this.adj_matrix[e][s])+")",DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT):this.distance[s]<0||this.distance[s]>this.adj_matrix[e][s]?this.cmd("CreateLabel",this.comparisonMessageID,h+" > "+String(this.adj_matrix[e][s]),DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT):this.cmd("CreateLabel",this.comparisonMessageID,"!("+String(this.distance[s])+" > "+String(this.adj_matrix[e][s])+")",DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT)}var r;if(this.cmd("Step"),this.cmd("Delete",this.comparisonMessageID),this.highlightEdge(e,s,0),this.known[s])this.cmd("SetHighlight",this.knownID[s],0);else this.cmd("SetHighlight",this.distanceID[e],0),this.cmd("SetHighlight",this.distanceID[s],0),r=this.runningDijkstra?this.distance[e]+this.adj_matrix[e][s]:this.adj_matrix[e][s],(this.distance[s]<0||this.distance[s]>r)&&(this.distance[s]=r,this.path[s]=e,this.cmd("SetText",this.distanceID[s],this.distance[s]),this.cmd("SetText",this.pathID[s],this.path[s]))}this.cmd("SetHighlight",this.circleID[e],0)}return this.runningDijkstra?(this.cmd("SetText",this.message1ID,"Finding Paths in Table"),this.createPaths()):(this.cmd("SetText",this.message1ID,"Creating tree from table"),this.highlightTree()),this.cmd("SetText",this.message1ID,""),this.commands},DijkstraPrim.prototype.createPaths=function(){for(var t=0;t<this.size;t++){var e=this.nextIndex++;if(this.distance[t]<0)this.cmd("CreateLabel",e,"No Path",DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.messageID.push(e);else{this.cmd("CreateLabel",e,t,DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.messageID.push(e);for(var i=[e],s=t;s>=0;){if(this.cmd("SetHighlight",this.pathID[s],1),this.cmd("Step"),-1!=this.path[s]){e=this.nextIndex++,this.cmd("CreateLabel",e,this.path[s],DijkstraPrim.TABLE_START_X+3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+s*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.cmd("Move",e,DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH,DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT),this.messageID.push(e);for(var h=i.length-1;h>=0;h--)this.cmd("Move",i[h],DijkstraPrim.TABLE_START_X+4.3*DijkstraPrim.TABLE_ENTRY_WIDTH+17*(i.length-h),DijkstraPrim.TABLE_START_Y+t*DijkstraPrim.TABLE_ENTRY_HEIGHT);this.cmd("Step"),i.push(e)}this.cmd("SetHighlight",this.pathID[s],0),s=this.path[s]}}}},DijkstraPrim.prototype.highlightTree=function(){for(var t=0;t<this.size;t++)this.path[t]>=0&&(this.cmd("SetHighlight",this.vertexID[t],1),this.cmd("SetHighlight",this.pathID[t],1),this.highlightEdge(t,this.path[t],1),this.highlightEdge(this.path[t],t,1),this.cmd("Step"),this.cmd("SetHighlight",this.vertexID[t],0),this.cmd("SetHighlight",this.pathID[t],0),this.highlightEdge(t,this.path[t],0),this.highlightEdge(this.path[t],t,0),this.setEdgeColor(t,this.path[t],"#FF0000"),this.setEdgeColor(this.path[t],t,"#FF0000"))},DijkstraPrim.prototype.reset=function(){this.messageID=new Array},DijkstraPrim.prototype.startCallback=function(t){""!=this.startField.value&&(startvalue=this.startField.value,this.startField.value="",parseInt(startvalue)<this.size&&this.implementAction(this.doDijkstraPrim.bind(this),startvalue))},DijkstraPrim.prototype.enableUI=function(t){this.startField.disabled=!1,this.startButton.disabled=!1,this.startButton,DijkstraPrim.superclass.enableUI.call(this,t)},DijkstraPrim.prototype.disableUI=function(t){this.startField.disabled=!0,this.startButton.disabled=!0,DijkstraPrim.superclass.disableUI.call(this,t)},Floyd.inheritFrom(Graph),Floyd.SMALL_COST_TABLE_WIDTH=30,Floyd.SMALL_COST_TABLE_HEIGHT=30,Floyd.SMALL_COST_TABLE_START_X=40,Floyd.SMALL_COST_TABLE_START_Y=70,Floyd.SMALL_PATH_TABLE_WIDTH=30,Floyd.SMALL_PATH_TABLE_HEIGHT=30,Floyd.SMALL_PATH_TABLE_START_X=330,Floyd.SMALL_PATH_TABLE_START_Y=70,Floyd.SMALL_NODE_1_X_POS=50,Floyd.SMALL_NODE_1_Y_POS=400,Floyd.SMALL_NODE_2_X_POS=150,Floyd.SMALL_NODE_2_Y_POS=350,Floyd.SMALL_NODE_3_X_POS=250,Floyd.SMALL_NODE_3_Y_POS=400,Floyd.SMALL_MESSAGE_X=400,Floyd.SMALL_MESSAGE_Y=350,Floyd.LARGE_COST_TABLE_WIDTH=20,Floyd.LARGE_COST_TABLE_HEIGHT=20,Floyd.LARGE_COST_TABLE_START_X=40,Floyd.LARGE_COST_TABLE_START_Y=50,Floyd.LARGE_PATH_TABLE_WIDTH=20,Floyd.LARGE_PATH_TABLE_HEIGHT=20,Floyd.LARGE_PATH_TABLE_START_X=500,Floyd.LARGE_PATH_TABLE_START_Y=50,Floyd.LARGE_NODE_1_X_POS=50,Floyd.LARGE_NODE_1_Y_POS=500,Floyd.LARGE_NODE_2_X_POS=150,Floyd.LARGE_NODE_2_Y_POS=450,Floyd.LARGE_NODE_3_X_POS=250,Floyd.LARGE_NODE_3_Y_POS=500,Floyd.LARGE_MESSAGE_X=300,Floyd.LARGE_MESSAGE_Y=450,Floyd.prototype.addControls=function(){this.startButton=this.addControlToAlgorithmBar("Button","Run Floyd-Warshall"),this.startButton.onclick=this.startCallback.bind(this),Floyd.superclass.addControls.call(this),this.smallGraphButton.onclick=this.smallGraphCallback.bind(this),this.largeGraphButton.onclick=this.largeGraphCallback.bind(this)},Floyd.prototype.init=function(t,e,i,s){this.showEdgeCosts=!0,Floyd.superclass.init.call(this,t,e,i,s,!1)},Floyd.prototype.reset=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.costTable[t][e]=this.adj_matrix[t][e],this.costTable[t][e]>=0?this.pathTable[t][e]=t:this.pathTable[t][e]=-1},Floyd.prototype.smallGraphCallback=function(t){this.size!=Graph.SMALL_SIZE&&(this.animationManager.resetAll(),this.animationManager.setAllLayers([0,this.currentLayer]),this.logicalButton.disabled=!1,this.adjacencyListButton.disabled=!1,this.adjacencyMatrixButton.disabled=!1,this.setup_small())},Graph.prototype.largeGraphCallback=function(t){this.size!=Graph.LARGE_SIZE&&(this.animationManager.resetAll(),this.logicalButton.disabled=!0,this.adjacencyListButton.disabled=!0,this.adjacencyMatrixButton.disabled=!0,this.setup_large())},Floyd.prototype.getCostLabel=function(t,e){return e=void 0!=e&&e,t>=0?String(t):this.size==Graph.SMALL_SIZE||e?"INF":""},Floyd.prototype.setup_small=function(){this.cost_table_width=Floyd.SMALL_COST_TABLE_WIDTH,this.cost_table_height=Floyd.SMALL_COST_TABLE_HEIGHT,this.cost_table_start_x=Floyd.SMALL_COST_TABLE_START_X,this.cost_table_start_y=Floyd.SMALL_COST_TABLE_START_Y,this.path_table_width=Floyd.SMALL_PATH_TABLE_WIDTH,this.path_table_height=Floyd.SMALL_PATH_TABLE_HEIGHT,this.path_table_start_x=Floyd.SMALL_PATH_TABLE_START_X,this.path_table_start_y=Floyd.SMALL_PATH_TABLE_START_Y,this.node_1_x_pos=Floyd.SMALL_NODE_1_X_POS,this.node_1_y_pos=Floyd.SMALL_NODE_1_Y_POS,this.node_2_x_pos=Floyd.SMALL_NODE_2_X_POS,this.node_2_y_pos=Floyd.SMALL_NODE_2_Y_POS,this.node_3_x_pos=Floyd.SMALL_NODE_3_X_POS,this.node_3_y_pos=Floyd.SMALL_NODE_3_Y_POS,this.message_x=Floyd.SMALL_MESSAGE_X,this.message_y=Floyd.SMALL_MESSAGE_Y,Floyd.superclass.setup_small.call(this)},Floyd.prototype.setup_large=function(){this.cost_table_width=Floyd.LARGE_COST_TABLE_WIDTH,this.cost_table_height=Floyd.LARGE_COST_TABLE_HEIGHT,this.cost_table_start_x=Floyd.LARGE_COST_TABLE_START_X,this.cost_table_start_y=Floyd.LARGE_COST_TABLE_START_Y,this.path_table_width=Floyd.LARGE_PATH_TABLE_WIDTH,this.path_table_height=Floyd.LARGE_PATH_TABLE_HEIGHT,this.path_table_start_x=Floyd.LARGE_PATH_TABLE_START_X,this.path_table_start_y=Floyd.LARGE_PATH_TABLE_START_Y,this.node_1_x_pos=Floyd.LARGE_NODE_1_X_POS,this.node_1_y_pos=Floyd.LARGE_NODE_1_Y_POS,this.node_2_x_pos=Floyd.LARGE_NODE_2_X_POS,this.node_2_y_pos=Floyd.LARGE_NODE_2_Y_POS,this.node_3_x_pos=Floyd.LARGE_NODE_3_X_POS,this.node_3_y_pos=Floyd.LARGE_NODE_3_Y_POS,this.message_x=Floyd.LARGE_MESSAGE_X,this.message_y=Floyd.LARGE_MESSAGE_Y,Floyd.superclass.setup_large.call(this)},Floyd.prototype.setup=function(){var t;for(Floyd.superclass.setup.call(this),this.commands=new Array,this.costTable=new Array(this.size),this.pathTable=new Array(this.size),this.costTableID=new Array(this.size),this.pathTableID=new Array(this.size),this.pathIndexXID=new Array(this.size),this.pathIndexYID=new Array(this.size),this.costIndexXID=new Array(this.size),this.costIndexYID=new Array(this.size),this.node1ID=this.nextIndex++,this.node2ID=this.nextIndex++,this.node3ID=this.nextIndex++,t=0;t<this.size;t++)this.costTable[t]=new Array(this.size),this.pathTable[t]=new Array(this.size),this.costTableID[t]=new Array(this.size),this.pathTableID[t]=new Array(this.size);var e=this.nextIndex++,i=this.nextIndex++;for(this.cmd("CreateLabel",e,"Cost Table",this.cost_table_start_x,this.cost_table_start_y-2*this.cost_table_height,0),this.cmd("CreateLabel",i,"Path Table",this.path_table_start_x,this.path_table_start_y-2*this.path_table_height,0),t=0;t<this.size;t++){this.pathIndexXID[t]=this.nextIndex++,this.pathIndexYID[t]=this.nextIndex++,this.costIndexXID[t]=this.nextIndex++,this.costIndexYID[t]=this.nextIndex++,this.cmd("CreateLabel",this.pathIndexXID[t],t,this.path_table_start_x+t*this.path_table_width,this.path_table_start_y-this.path_table_height),this.cmd("SetTextColor",this.pathIndexXID[t],"#0000FF"),this.cmd("CreateLabel",this.pathIndexYID[t],t,this.path_table_start_x-this.path_table_width,this.path_table_start_y+t*this.path_table_height),this.cmd("SetTextColor",this.pathIndexYID[t],"#0000FF"),this.cmd("CreateLabel",this.costIndexXID[t],t,this.cost_table_start_x+t*this.cost_table_width,this.cost_table_start_y-this.cost_table_height),this.cmd("SetTextColor",this.costIndexXID[t],"#0000FF"),this.cmd("CreateLabel",this.costIndexYID[t],t,this.cost_table_start_x-this.cost_table_width,this.cost_table_start_y+t*this.cost_table_height),this.cmd("SetTextColor",this.costIndexYID[t],"#0000FF");for(var s=0;s<this.size;s++)this.costTable[t][s]=this.adj_matrix[t][s],this.costTable[t][s]>=0?this.pathTable[t][s]=t:this.pathTable[t][s]=-1,this.costTableID[t][s]=this.nextIndex++,this.pathTableID[t][s]=this.nextIndex++,this.cmd("CreateRectangle",this.costTableID[t][s],this.getCostLabel(this.costTable[t][s],!0),this.cost_table_width,this.cost_table_height,this.cost_table_start_x+s*this.cost_table_width,this.cost_table_start_y+t*this.cost_table_height),this.cmd("CreateRectangle",this.pathTableID[t][s],this.pathTable[t][s],this.path_table_width,this.path_table_height,this.path_table_start_x+s*this.path_table_width,this.path_table_start_y+t*this.path_table_height)}this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.size==Graph.LARGE_SIZE&&this.animationManager.setAllLayers([0])},Floyd.prototype.startCallback=function(t){this.implementAction(this.doFloydWarshall.bind(this),"")},Floyd.prototype.doFloydWarshall=function(t){this.commands=new Array;var e=this.nextIndex,i=this.nextIndex++,s=this.nextIndex++,h=this.nextIndex++;this.cmd("CreateCircle",this.node1ID,"",this.node_1_x_pos,this.node_1_y_pos),this.cmd("CreateCircle",this.node2ID,"",this.node_2_x_pos,this.node_2_y_pos),this.cmd("CreateCircle",this.node3ID,"",this.node_3_x_pos,this.node_3_y_pos),this.cmd("CreateLabel",i,"",this.message_x,this.message_y,0);for(var r=0;r<this.size;r++)for(var n=0;n<this.size;n++)for(var a=0;a<this.size;a++)n!=a&&a!=r&&n!=r&&(this.cmd("SetText",this.node1ID,n),this.cmd("SetText",this.node2ID,r),this.cmd("SetText",this.node3ID,a),this.cmd("Connect",this.node1ID,this.node2ID,"#009999",-.1,1,this.getCostLabel(this.costTable[n][r],!0)),this.cmd("Connect",this.node2ID,this.node3ID,"#9900CC",-.1,1,this.getCostLabel(this.costTable[r][a],!0)),this.cmd("Connect",this.node1ID,this.node3ID,"#CC0000",0,1,this.getCostLabel(this.costTable[n][a],!0)),this.cmd("SetHighlight",this.costTableID[n][r],1),this.cmd("SetHighlight",this.costTableID[r][a],1),this.cmd("SetHighlight",this.costTableID[n][a],1),this.cmd("SetTextColor",this.costTableID[n][r],"#009999"),this.cmd("SetTextColor",this.costTableID[r][a],"#9900CC"),this.cmd("SetTextColor",this.costTableID[n][a],"#CC0000"),this.costTable[n][r]>=0&&this.costTable[r][a]>=0&&(this.costTable[n][a]<0||this.costTable[n][r]+this.costTable[r][a]<this.costTable[n][a])?(this.cmd("SetText",i,this.getCostLabel(this.costTable[n][r],!0)+" + "+this.getCostLabel(this.costTable[r][a],!0)+" < "+this.getCostLabel(this.costTable[n][a],!0)),this.cmd("Step"),this.costTable[n][a]=this.costTable[n][r]+this.costTable[r][a],this.cmd("SetText",this.pathTableID[n][a],""),this.cmd("SetText",this.costTableID[n][a],""),this.cmd("CreateLabel",s,this.pathTable[r][a],this.path_table_start_x+a*this.path_table_width,this.path_table_start_y+r*this.path_table_height),this.cmd("Move",s,this.path_table_start_x+a*this.path_table_width,this.path_table_start_y+n*this.path_table_height),this.cmd("CreateLabel",h,this.costTable[n][a],this.message_x,this.message_y),this.cmd("SetHighlight",h,1),this.cmd("Move",h,this.cost_table_start_x+a*this.cost_table_width,this.cost_table_start_y+n*this.cost_table_height),this.pathTable[n][a]=this.pathTable[r][a],this.cmd("Step"),this.cmd("SetText",this.costTableID[n][a],this.costTable[n][a]),this.cmd("SetText",this.pathTableID[n][a],this.pathTable[n][a]),this.cmd("Delete",s),this.cmd("Delete",h)):(this.cmd("SetText",i,"!("+this.getCostLabel(this.costTable[n][r],!0)+" + "+this.getCostLabel(this.costTable[r][a],!0)+" < "+this.getCostLabel(this.costTable[n][a],!0)+")"),this.cmd("Step")),this.cmd("SetTextColor",this.costTableID[n][r],"#000000"),this.cmd("SetTextColor",this.costTableID[r][a],"#000000"),this.cmd("SetTextColor",this.costTableID[n][a],"#000000"),this.cmd("Disconnect",this.node1ID,this.node2ID),this.cmd("Disconnect",this.node2ID,this.node3ID),this.cmd("Disconnect",this.node1ID,this.node3ID),this.cmd("SetHighlight",this.costTableID[n][r],0),this.cmd("SetHighlight",this.costTableID[r][a],0),this.cmd("SetHighlight",this.costTableID[n][a],0));return this.cmd("Delete",this.node1ID),this.cmd("Delete",this.node2ID),this.cmd("Delete",this.node3ID),this.cmd("Delete",i),this.nextIndex=e,this.commands},Floyd.prototype.enableUI=function(t){this.startButton.disabled=!1,Floyd.superclass.enableUI.call(this,t)},Floyd.prototype.disableUI=function(t){this.startButton.disabled=!0,Floyd.superclass.disableUI.call(this,t)},Kruskal.inheritFrom(Graph),Kruskal.HIGHLIGHT_CIRCLE_COLOR="#000000",Kruskal.SET_ARRAY_ELEM_WIDTH=25,Kruskal.SET_ARRAY_ELEM_HEIGHT=25,Kruskal.SET_ARRAY_START_X=50,Kruskal.SET_ARRAY_START_Y=130,Kruskal.EDGE_LIST_ELEM_WIDTH=40,Kruskal.EDGE_LIST_ELEM_HEIGHT=40,Kruskal.EDGE_LIST_COLUMN_WIDTH=100,Kruskal.EDGE_LIST_MAX_PER_COLUMN=10,Kruskal.EDGE_LIST_START_X=150,Kruskal.EDGE_LIST_START_Y=130,Kruskal.FIND_LABEL_1_X=30,Kruskal.FIND_LABEL_2_X=100,Kruskal.FIND_LABEL_1_Y=30,Kruskal.FIND_LABEL_2_Y=Kruskal.FIND_LABEL_1_Y,Kruskal.MESSAGE_LABEL_X=30,Kruskal.MESSAGE_LABEL_Y=50,Kruskal.HIGHLIGHT_CIRCLE_COLOR_1="#FFAAAA",Kruskal.HIGHLIGHT_CIRCLE_COLOR_2="#FF0000",Kruskal.prototype.addControls=function(){this.startButton=this.addControlToAlgorithmBar("Button","Run Kruskal"),this.startButton.onclick=this.startCallback.bind(this),Kruskal.superclass.addControls.call(this,!1)},Kruskal.prototype.init=function(t,e,i){this.showEdgeCosts=!0,Kruskal.superclass.init.call(this,t,e,i,!1,!1)},Kruskal.prototype.setup=function(){var t;for(Kruskal.superclass.setup.call(this),this.messageID=new Array,this.commands=new Array,this.setID=new Array(this.size),this.setIndexID=new Array(this.size),this.setData=new Array(this.size),t=0;t<this.size;t++)this.setID[t]=this.nextIndex++,this.setIndexID[t]=this.nextIndex++,this.cmd("CreateRectangle",this.setID[t],"-1",Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_ELEM_HEIGHT,Kruskal.SET_ARRAY_START_X,Kruskal.SET_ARRAY_START_Y+t*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("CreateLabel",this.setIndexID[t],t,Kruskal.SET_ARRAY_START_X-Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_START_Y+t*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("SetForegroundColor",this.setIndexID[t],Graph.VERTEX_INDEX_COLOR);this.cmd("CreateLabel",this.nextIndex++,"Disjoint Set",Kruskal.SET_ARRAY_START_X-1*Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_START_Y-1.5*Kruskal.SET_ARRAY_ELEM_HEIGHT,0),this.animationManager.setAllLayers([0,this.currentLayer]),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory()},Kruskal.prototype.startCallback=function(t){this.implementAction(this.doKruskal.bind(this),"")},Kruskal.prototype.disjointSetFind=function(t,e){for(this.cmd("SetTextColor",this.setID[t],"#FF0000"),this.cmd("Step");this.setData[t]>=0;)this.cmd("SetTextColor",this.setID[t],"#000000"),this.cmd("Move",e,Kruskal.SET_ARRAY_START_X-Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_START_Y+this.setData[t]*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Step"),t=this.setData[t],this.cmd("SetTextColor",this.setID[t],"#FF0000"),this.cmd("Step");return this.cmd("SetTextColor",this.setID[t],"#000000"),t},Kruskal.prototype.doKruskal=function(t){var e,i,s;for(this.commands=new Array,this.edgesListLeftID=new Array,this.edgesListRightID=new Array,this.edgesListLeft=new Array,this.edgesListRight=new Array,e=0;e<this.size;e++)this.setData[e]=-1,this.cmd("SetText",this.setID[e],"-1");for(this.recolorGraph(),e=0;e<this.size;e++)for(i=e+1;i<this.size;i++)this.adj_matrix[e][i]>=0&&(this.edgesListLeftID.push(this.nextIndex++),this.edgesListRightID.push(this.nextIndex++),s=this.edgesListLeftID.length-1,this.edgesListLeft.push(e),this.edgesListRight.push(i),this.cmd("CreateLabel",this.edgesListLeftID[s],e,Kruskal.EDGE_LIST_START_X+Math.floor(s/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+s%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT),this.cmd("CreateLabel",this.edgesListRightID[s],i,Kruskal.EDGE_LIST_START_X+Kruskal.EDGE_LIST_ELEM_WIDTH+Math.floor(s/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+s%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT),this.cmd("Connect",this.edgesListLeftID[s],this.edgesListRightID[s],Graph.EDGE_COLOR,0,0,this.adj_matrix[e][i]));this.cmd("Step");var h,r,n,a,o=this.edgesListLeftID.length;for(e=1;e<o;e++){for(h=this.edgesListLeftID[e],r=this.edgesListRightID[e],n=this.edgesListLeft[e],a=this.edgesListRight[e],i=e;i>0&&this.adj_matrix[this.edgesListLeft[i-1]][this.edgesListRight[i-1]]>this.adj_matrix[n][a];)this.edgesListLeft[i]=this.edgesListLeft[i-1],this.edgesListRight[i]=this.edgesListRight[i-1],this.edgesListLeftID[i]=this.edgesListLeftID[i-1],this.edgesListRightID[i]=this.edgesListRightID[i-1],i-=1;this.edgesListLeft[i]=n,this.edgesListRight[i]=a,this.edgesListLeftID[i]=h,this.edgesListRightID[i]=r}for(e=0;e<o;e++)this.cmd("Move",this.edgesListLeftID[e],Kruskal.EDGE_LIST_START_X+Math.floor(e/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+e%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT),this.cmd("Move",this.edgesListRightID[e],Kruskal.EDGE_LIST_START_X+Kruskal.EDGE_LIST_ELEM_WIDTH+Math.floor(e/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+e%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT);this.cmd("Step");var l=this.nextIndex++,d=this.nextIndex++,c=this.nextIndex++,g=this.nextIndex++,m=this.nextIndex++,p=this.nextIndex++,u=0,_=0;for(this.cmd("CreateLabel",l,"",Kruskal.FIND_LABEL_1_X,Kruskal.FIND_LABEL_1_Y,0),this.cmd("CreateLabel",d,"",Kruskal.FIND_LABEL_2_X,Kruskal.FIND_LABEL_2_Y,0);u<this.size-1&&_<o;){this.cmd("SetEdgeHighlight",this.edgesListLeftID[_],this.edgesListRightID[_],1),this.highlightEdge(this.edgesListLeft[_],this.edgesListRight[_],1),this.highlightEdge(this.edgesListRight[_],this.edgesListLeft[_],1),this.cmd("SetText",l,"find("+String(this.edgesListLeft[_])+") = "),this.cmd("CreateHighlightCircle",c,Kruskal.HIGHLIGHT_CIRCLE_COLOR_1,Kruskal.EDGE_LIST_START_X+Math.floor(_/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+_%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT,15),this.cmd("Move",c,Kruskal.SET_ARRAY_START_X-Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_START_Y+this.edgesListLeft[_]*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Step");var I=this.disjointSetFind(this.edgesListLeft[_],c);this.cmd("SetText",l,"find("+String(this.edgesListLeft[_])+") = "+String(I)),this.cmd("SetText",d,"find("+String(this.edgesListRight[_])+") = "),this.cmd("CreateHighlightCircle",g,Kruskal.HIGHLIGHT_CIRCLE_COLOR_2,Kruskal.EDGE_LIST_START_X+Kruskal.EDGE_LIST_ELEM_WIDTH+Math.floor(_/Kruskal.EDGE_LIST_MAX_PER_COLUMN)*Kruskal.EDGE_LIST_COLUMN_WIDTH,Kruskal.EDGE_LIST_START_Y+_%Kruskal.EDGE_LIST_MAX_PER_COLUMN*Kruskal.EDGE_LIST_ELEM_HEIGHT,15),this.cmd("Move",g,Kruskal.SET_ARRAY_START_X-Kruskal.SET_ARRAY_ELEM_WIDTH,Kruskal.SET_ARRAY_START_Y+this.edgesListRight[_]*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Step");var S=this.disjointSetFind(this.edgesListRight[_],g);this.cmd("SetText",d,"find("+String(this.edgesListRight[_])+") = "+String(S)),this.cmd("Step"),I!=S?(this.cmd("CreateLabel",p,"Vertices in different trees.  Add edge to tree: Union("+String(I)+","+String(S)+")",Kruskal.MESSAGE_LABEL_X,Kruskal.MESSAGE_LABEL_Y,0),this.cmd("Step"),this.highlightEdge(this.edgesListLeft[_],this.edgesListRight[_],1),this.highlightEdge(this.edgesListRight[_],this.edgesListLeft[_],1),u++,this.setEdgeColor(this.edgesListLeft[_],this.edgesListRight[_],"#FF0000"),this.setEdgeColor(this.edgesListRight[_],this.edgesListLeft[_],"#FF0000"),this.setData[I]<this.setData[S]?(this.cmd("SetText",this.setID[S],""),this.cmd("CreateLabel",m,this.setData[S],Kruskal.SET_ARRAY_START_X,Kruskal.SET_ARRAY_START_Y+S*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Move",m,Kruskal.SET_ARRAY_START_X,Kruskal.SET_ARRAY_START_Y+I*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Delete",m),this.setData[I]=this.setData[I]+this.setData[S],this.setData[S]=I):(this.cmd("SetText",this.setID[I],""),this.cmd("CreateLabel",m,this.setData[I],Kruskal.SET_ARRAY_START_X,Kruskal.SET_ARRAY_START_Y+I*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Move",m,Kruskal.SET_ARRAY_START_X,Kruskal.SET_ARRAY_START_Y+S*Kruskal.SET_ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.cmd("Delete",m),this.setData[S]=this.setData[S]+this.setData[I],this.setData[I]=S),this.cmd("SetText",this.setID[I],this.setData[I]),this.cmd("SetText",this.setID[S],this.setData[S])):(this.cmd("CreateLabel",p,"Vertices in the same tree.  Skip edge",Kruskal.MESSAGE_LABEL_X,Kruskal.MESSAGE_LABEL_Y,0),this.cmd("Step")),this.highlightEdge(this.edgesListLeft[_],this.edgesListRight[_],0),this.highlightEdge(this.edgesListRight[_],this.edgesListLeft[_],0),this.cmd("Delete",p),this.cmd("Delete",c),this.cmd("Delete",g),this.cmd("Delete",this.edgesListLeftID[_]),this.cmd("Delete",this.edgesListRightID[_]),this.cmd("SetText",l,""),this.cmd("SetText",d,""),_++}return this.cmd("Delete",l),this.cmd("Delete",d),this.commands},Kruskal.prototype.reset=function(){this.messageID=new Array},Kruskal.prototype.enableUI=function(t){this.startButton.disabled=!1,Kruskal.superclass.enableUI.call(this,t)},Kruskal.prototype.disableUI=function(t){this.startButton.disabled=!0,Kruskal.superclass.disableUI.call(this,t)},TopoSortDFS.inheritFrom(Graph),TopoSortDFS.ORDERING_INITIAL_X=300,TopoSortDFS.ORDERING_INITIAL_Y=70,TopoSortDFS.ORDERING_DELTA_Y=20,TopoSortDFS.D_X_POS_SMALL=[760,685,915,610,910,685,915,760],TopoSortDFS.F_X_POS_SMALL=[760,685,915,610,910,685,915,760],TopoSortDFS.D_Y_POS_SMALL=[18,118,118,218,218,318,318,418],TopoSortDFS.F_Y_POS_SMALL=[32,132,132,232,232,332,332,432],TopoSortDFS.D_X_POS_LARGE=[560,660,760,860,610,710,810,560,660,760,860,610,710,810,560,660,760,860],TopoSortDFS.F_X_POS_LARGE=[560,660,760,860,610,710,810,560,660,760,860,610,710,810,560,660,760,860],TopoSortDFS.D_Y_POS_LARGE=[31,31,31,31,137,137,137,237,237,237,237,337,337,337,437,437,437,437],TopoSortDFS.F_Y_POS_LARGE=[62,62,62,62,162,162,162,262,262,262,262,362,362,362,462,462,462,462],TopoSortDFS.HIGHLIGHT_CIRCLE_COLOR="#000000",TopoSortDFS.DFS_TREE_COLOR="#0000FF",TopoSortDFS.prototype.addControls=function(){this.startButton=this.addControlToAlgorithmBar("Button","Do Topological Sort"),this.startButton.onclick=this.startCallback.bind(this),TopoSortDFS.superclass.addControls.call(this,!1)},TopoSortDFS.prototype.init=function(t,e,i){this.showEdgeCosts=!1,TopoSortDFS.superclass.init.call(this,t,e,i,!0,!0)},TopoSortDFS.prototype.setup=function(){TopoSortDFS.superclass.setup.call(this),this.messageID=new Array,this.animationManager.setAllLayers([0,this.currentLayer]),this.highlightCircleL=this.nextIndex++,this.highlightCircleAL=this.nextIndex++,this.highlightCircleAM=this.nextIndex++,this.initialIndex=this.nextIndex,this.old_adj_matrix=new Array(this.size),this.old_adj_list_list=new Array(this.size),this.old_adj_list_index=new Array(this.size),this.old_adj_list_edges=new Array(this.size);for(var t=0;t<this.size;t++){this.old_adj_matrix[t]=new Array(this.size),this.old_adj_list_index[t]=this.adj_list_index[t],this.old_adj_list_list[t]=this.adj_list_list[t],this.old_adj_list_edges[t]=new Array(this.size);for(var e=0;e<this.size;e++)this.old_adj_matrix[t][e]=this.adj_matrix[t][e],this.adj_matrix[t][e]>0&&(this.old_adj_list_edges[t][e]=this.adj_list_edges[t][e])}},TopoSortDFS.prototype.startCallback=function(t){this.implementAction(this.doTopoSort.bind(this),"")},TopoSortDFS.prototype.doTopoSort=function(t){var e;if(this.visited=new Array(this.size),this.commands=new Array,this.topoOrderArrayL=new Array,this.topoOrderArrayAL=new Array,this.topoOrderArrayAM=new Array,null!=this.messageID)for(e=0;e<this.messageID.length;e++)this.cmd("Delete",this.messageID[e],1);this.rebuildEdges(),this.messageID=new Array;var i,s=this.nextIndex++;for(this.messageID.push(s),this.cmd("CreateLabel",s,"Topological Order",TopoSortDFS.ORDERING_INITIAL_X,TopoSortDFS.ORDERING_INITIAL_Y-1.5*TopoSortDFS.ORDERING_DELTA_Y),s=this.nextIndex++,this.messageID.push(s),this.cmd("CreateRectangle",s,"",100,0,TopoSortDFS.ORDERING_INITIAL_X,TopoSortDFS.ORDERING_INITIAL_Y-TopoSortDFS.ORDERING_DELTA_Y,"center","center"),this.d_timesID_L=new Array(this.size),this.f_timesID_L=new Array(this.size),this.d_timesID_AL=new Array(this.size),this.f_timesID_AL=new Array(this.size),this.d_times=new Array(this.size),this.f_times=new Array(this.size),this.currentTime=1,e=0;e<this.size;e++)this.d_timesID_L[e]=this.nextIndex++,this.f_timesID_L[e]=this.nextIndex++,this.d_timesID_AL[e]=this.nextIndex++,this.f_timesID_AL[e]=this.nextIndex++;for(this.messageY=30,i=0;i<this.size;i++)if(!this.visited[i]){if(this.cmd("CreateHighlightCircle",this.highlightCircleL,TopoSortDFS.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[i],this.y_pos_logical[i]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,TopoSortDFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+i*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,TopoSortDFS.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+i*this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),i>0){var h=this.nextIndex++;this.messageID.push(h),this.cmd("CreateRectangle",h,"",200,0,10,this.messageY,"left","bottom"),this.messageY=this.messageY+20}this.dfsVisit(i,10,!1),this.cmd("Delete",this.highlightCircleL,2),this.cmd("Delete",this.highlightCircleAL,3),this.cmd("Delete",this.highlightCircleAM,4)}return this.commands},TopoSortDFS.prototype.setup_large=function(){this.d_x_pos=TopoSortDFS.D_X_POS_LARGE,this.d_y_pos=TopoSortDFS.D_Y_POS_LARGE,this.f_x_pos=TopoSortDFS.F_X_POS_LARGE,this.f_y_pos=TopoSortDFS.F_Y_POS_LARGE,TopoSortDFS.superclass.setup_large.call(this)},TopoSortDFS.prototype.setup_small=function(){this.d_x_pos=TopoSortDFS.D_X_POS_SMALL,this.d_y_pos=TopoSortDFS.D_Y_POS_SMALL,this.f_x_pos=TopoSortDFS.F_X_POS_SMALL,this.f_y_pos=TopoSortDFS.F_Y_POS_SMALL,TopoSortDFS.superclass.setup_small.call(this)},TopoSortDFS.prototype.dfsVisit=function(t,e,i){var s=this.nextIndex++;if(this.messageID.push(s),this.cmd("CreateLabel",s,"DFS("+String(t)+")",e,this.messageY,0),this.messageY=this.messageY+20,!this.visited[t]){this.d_times[t]=this.currentTime++,this.cmd("CreateLabel",this.d_timesID_L[t],"d = "+String(this.d_times[t]),this.d_x_pos[t],this.d_y_pos[t]),this.cmd("CreateLabel",this.d_timesID_AL[t],"d = "+String(this.d_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height-.25*this.adj_list_height),this.cmd("SetLayer",this.d_timesID_L[t],1),this.cmd("SetLayer",this.d_timesID_AL[t],2),this.visited[t]=!0,this.cmd("Step");for(var h=0;h<this.size;h++)this.adj_matrix[t][h]>0&&(this.highlightEdge(t,h,1),this.visited[h]&&(s=this.nextIndex,this.cmd("CreateLabel",s,"Vertex "+String(h)+" already this.visited.",e,this.messageY,0)),this.cmd("Step"),this.highlightEdge(t,h,0),this.visited[h]&&this.cmd("Delete",s,"DNM"),this.visited[h]||(this.cmd("Disconnect",this.circleID[t],this.circleID[h]),this.cmd("Connect",this.circleID[t],this.circleID[h],TopoSortDFS.DFS_TREE_COLOR,this.curve[t][h],1,""),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[h],this.y_pos_logical[h]),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+h*this.adj_list_height),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+h*this.adj_matrix_height),this.cmd("Step"),this.dfsVisit(h,e+10,i),s=this.nextIndex,this.cmd("CreateLabel",s,"Returning from recursive call: DFS("+String(h)+")",e+20,this.messageY,0),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("Step"),this.cmd("Delete",s,18)),this.cmd("Step"));var r;for(this.f_times[t]=this.currentTime++,this.cmd("CreateLabel",this.f_timesID_L[t],"f = "+String(this.f_times[t]),this.f_x_pos[t],this.f_y_pos[t]),this.cmd("CreateLabel",this.f_timesID_AL[t],"f = "+String(this.f_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height+.25*this.adj_list_height),this.cmd("SetLayer",this.f_timesID_L[t],1),this.cmd("SetLayer",this.f_timesID_AL[t],2),this.cmd("Step"),r=this.topoOrderArrayL.length;r>0;r--)this.topoOrderArrayL[r]=this.topoOrderArrayL[r-1],this.topoOrderArrayAL[r]=this.topoOrderArrayAL[r-1],this.topoOrderArrayAM[r]=this.topoOrderArrayAM[r-1];var n=this.nextIndex++;for(this.messageID.push(n),this.cmd("CreateLabel",n,t,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("SetLayer",n,1),this.topoOrderArrayL[0]=n,n=this.nextIndex++,this.messageID.push(n),this.cmd("CreateLabel",n,t,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("SetLayer",n,2),this.topoOrderArrayAL[0]=n,n=this.nextIndex++,this.messageID.push(n),this.cmd("CreateLabel",n,t,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("SetLayer",n,3),this.topoOrderArrayAM[0]=n,r=0;r<this.topoOrderArrayL.length;r++)this.cmd("Move",this.topoOrderArrayL[r],TopoSortDFS.ORDERING_INITIAL_X,TopoSortDFS.ORDERING_INITIAL_Y+r*TopoSortDFS.ORDERING_DELTA_Y),this.cmd("Move",this.topoOrderArrayAL[r],TopoSortDFS.ORDERING_INITIAL_X,TopoSortDFS.ORDERING_INITIAL_Y+r*TopoSortDFS.ORDERING_DELTA_Y),this.cmd("Move",this.topoOrderArrayAM[r],TopoSortDFS.ORDERING_INITIAL_X,TopoSortDFS.ORDERING_INITIAL_Y+r*TopoSortDFS.ORDERING_DELTA_Y);this.cmd("Step")}},TopoSortDFS.prototype.reset=function(){this.messageID=new Array,this.nextIndex=this.initialIndex;for(var t=0;t<this.size;t++){this.adj_list_list[t]=this.old_adj_list_list[t],this.adj_list_index[t]=this.old_adj_list_index[t];for(var e=0;e<this.size;e++)this.adj_matrix[t][e]=this.old_adj_matrix[t][e],this.adj_matrix[t][e]>0&&(this.adj_list_edges[t][e]=this.old_adj_list_edges[t][e])}},TopoSortDFS.prototype.enableUI=function(t){this.startButton.disabled=!1,TopoSortDFS.superclass.enableUI.call(this,t)},TopoSortDFS.prototype.disableUI=function(t){this.startButton.disabled=!0,TopoSortDFS.superclass.disableUI.call(this,t)},TopoSortIndegree.inheritFrom(Graph),TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH=25,TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT=25,TopoSortIndegree.INDEGREE_ARRAY_START_X=50,TopoSortIndegree.INDEGREE_ARRAY_START_Y=60,TopoSortIndegree.STACK_START_X=TopoSortIndegree.INDEGREE_ARRAY_START_X+100,TopoSortIndegree.STACK_START_Y=TopoSortIndegree.INDEGREE_ARRAY_START_Y,TopoSortIndegree.STACK_HEIGHT=TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT,TopoSortIndegree.TOPO_ARRAY_START_X=TopoSortIndegree.STACK_START_X+150,TopoSortIndegree.TOPO_ARRAY_START_Y=TopoSortIndegree.INDEGREE_ARRAY_START_Y,TopoSortIndegree.TOPO_HEIGHT=TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT,TopoSortIndegree.MESSAGE_LABEL_1_X=70,TopoSortIndegree.MESSAGE_LABEL_1_Y=10,TopoSortIndegree.MESSAGE_LABEL_2_X=70,TopoSortIndegree.MESSAGE_LABEL_2_Y=40,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR="#000000",TopoSortIndegree.MESSAGE_COLOR="#0000FF",TopoSortIndegree.prototype.addControls=function(){this.startButton=this.addControlToAlgorithmBar("Button","Do Topological Sort"),this.startButton.onclick=this.startCallback.bind(this),TopoSortIndegree.superclass.addControls.call(this,!1)},TopoSortIndegree.prototype.init=function(t,e,i){this.showEdgeCosts=!1,TopoSortIndegree.superclass.init.call(this,t,e,i,!0,!0)},TopoSortIndegree.prototype.setup=function(){TopoSortIndegree.superclass.setup.call(this),this.messageID=new Array,this.animationManager.setAllLayers([0,this.currentLayer]),this.messageID=new Array,this.commands=new Array,this.indegreeID=new Array(this.size),this.setIndexID=new Array(this.size),this.indegree=new Array(this.size),this.orderID=new Array(this.size);for(var t=0;t<this.size;t++)this.indegreeID[t]=this.nextIndex++,this.setIndexID[t]=this.nextIndex++,this.orderID[t]=this.nextIndex++,this.cmd("CreateLabel",this.orderID[t],"",0,0),this.cmd("CreateRectangle",this.indegreeID[t]," ",TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT,TopoSortIndegree.INDEGREE_ARRAY_START_X,TopoSortIndegree.INDEGREE_ARRAY_START_Y+t*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("CreateLabel",this.setIndexID[t],t,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+t*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("SetForegroundColor",this.setIndexID[t],Graph.VERTEX_INDEX_COLOR);this.cmd("CreateLabel",this.nextIndex++,"Indegree",TopoSortIndegree.INDEGREE_ARRAY_START_X-1*TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y-1.5*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT,0),this.message1ID=this.nextIndex++,this.message2ID=this.nextIndex++,this.cmd("CreateLabel",this.message1ID,"",TopoSortIndegree.MESSAGE_LABEL_1_X,TopoSortIndegree.MESSAGE_LABEL_1_Y,0),this.cmd("SetTextColor",this.message1ID,TopoSortIndegree.MESSAGE_COLOR),this.cmd("CreateLabel",this.message2ID,"",TopoSortIndegree.MESSAGE_LABEL_2_X,TopoSortIndegree.MESSAGE_LABEL_2_Y),this.cmd("SetTextColor",this.message2ID,TopoSortIndegree.MESSAGE_COLOR),this.stackLabelID=this.nextIndex++,this.topoLabelID=this.nextIndex++,this.cmd("CreateLabel",this.stackLabelID,"",TopoSortIndegree.STACK_START_X,TopoSortIndegree.STACK_START_Y-TopoSortIndegree.STACK_HEIGHT),this.cmd("CreateLabel",this.topoLabelID,"",TopoSortIndegree.TOPO_ARRAY_START_X,TopoSortIndegree.TOPO_ARRAY_START_Y-TopoSortIndegree.TOPO_HEIGHT),this.animationManager.StartNewAnimation(this.commands),this.animationManager.skipForward(),this.animationManager.clearHistory(),this.highlightCircleL=this.nextIndex++,this.highlightCircleAL=this.nextIndex++,this.highlightCircleAM=this.nextIndex++,this.initialIndex=this.nextIndex},TopoSortIndegree.prototype.startCallback=function(t){this.implementAction(this.doTopoSort.bind(this),"")},TopoSortIndegree.prototype.doTopoSort=function(t){this.commands=new Array;for(var e=new Array(this.size),i=new Array(this.size),s=0,h=0;h<this.size;h++)this.cmd("SetText",this.indegreeID[h],"0"),this.indegree[h]=0,i[h]=this.nextIndex++,this.cmd("Delete",this.orderID[h]);for(this.cmd("SetText",this.message1ID,"Calculate this.indegree of all verticies by going through every edge of the graph"),this.cmd("SetText",this.topoLabelID,""),this.cmd("SetText",this.stackLabelID,""),h=0;h<this.size;h++){var r,n=0;for(r=0;r<this.size;r++)this.adj_matrix[h][r]>=0&&(n++,this.highlightEdge(h,r,1),this.cmd("Step"),this.cmd("CreateHighlightCircle",this.highlightCircleL,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[r],this.y_pos_logical[r]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start+n*(this.adj_list_width+this.adj_list_spacing),this.adj_list_y_start+h*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start+r*this.adj_matrix_width,this.adj_matrix_y_start-this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),this.cmd("Move",this.highlightCircleL,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+r*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",this.highlightCircleAL,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+r*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",this.highlightCircleAM,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+r*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.indegree[r]=this.indegree[r]+1,this.cmd("SetText",this.indegreeID[r],this.indegree[r]),this.cmd("SetTextColor",this.indegreeID[r],"#FF0000"),this.cmd("Step"),this.cmd("Delete",this.highlightCircleL),this.cmd("Delete",this.highlightCircleAL),this.cmd("Delete",this.highlightCircleAM),this.cmd("SetTextColor",this.indegreeID[r],Graph.EDGE_COLOR),this.highlightEdge(h,r,0))}for(this.cmd("SetText",this.message1ID,"Collect all vertices with 0 this.indegree onto a stack"),this.cmd("SetText",this.stackLabelID,"Zero Indegree Vertices"),h=0;h<this.size;h++)this.cmd("SetHighlight",this.indegreeID[h],1),this.cmd("Step"),0==this.indegree[h]&&(e[s]=h,this.cmd("CreateLabel",i[s],h,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+h*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",i[s],TopoSortIndegree.STACK_START_X,TopoSortIndegree.STACK_START_Y+s*TopoSortIndegree.STACK_HEIGHT),this.cmd("Step"),s++),this.cmd("SetHighlight",this.indegreeID[h],0);this.cmd("SetText",this.topoLabelID,"Topological Order");for(var a=0;s>0;){var o=e[--s];for(this.cmd("SetText",this.message1ID,"Pop off top vertex with this.indegree 0, add to topological sort"),this.cmd("CreateLabel",this.orderID[a],o,TopoSortIndegree.STACK_START_X,TopoSortIndegree.STACK_START_Y+s*TopoSortIndegree.STACK_HEIGHT),this.cmd("Delete",i[s]),this.cmd("Step"),this.cmd("Move",this.orderID[a],TopoSortIndegree.TOPO_ARRAY_START_X,TopoSortIndegree.TOPO_ARRAY_START_Y+a*TopoSortIndegree.TOPO_HEIGHT),this.cmd("Step"),this.cmd("SetText",this.message1ID,"Find all neigbors of vertex "+String(o)+", decrease their this.indegree.  If this.indegree becomes 0, add to stack"),this.cmd("SetHighlight",this.circleID[o],1),this.cmd("Step"),n=0,h=0;h<this.size;h++)this.adj_matrix[o][h]>=0&&(n++,this.highlightEdge(o,h,1),this.cmd("Step"),this.cmd("CreateHighlightCircle",this.highlightCircleL,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.x_pos_logical[h],this.y_pos_logical[h]),this.cmd("SetLayer",this.highlightCircleL,1),this.cmd("CreateHighlightCircle",this.highlightCircleAL,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.adj_list_x_start+n*(this.adj_list_width+this.adj_list_spacing),this.adj_list_y_start+o*this.adj_list_height),this.cmd("SetLayer",this.highlightCircleAL,2),this.cmd("CreateHighlightCircle",this.highlightCircleAM,TopoSortIndegree.HIGHLIGHT_CIRCLE_COLOR,this.adj_matrix_x_start+h*this.adj_matrix_width,this.adj_matrix_y_start-this.adj_matrix_height),this.cmd("SetLayer",this.highlightCircleAM,3),this.cmd("Move",this.highlightCircleL,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+h*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",this.highlightCircleAL,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+h*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",this.highlightCircleAM,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+h*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Step"),this.indegree[h]=this.indegree[h]-1,this.cmd("SetText",this.indegreeID[h],this.indegree[h]),this.cmd("SetTextColor",this.indegreeID[h],"#FF0000"),this.cmd("Step"),0==this.indegree[h]&&(e[s]=h,this.cmd("CreateLabel",i[s],h,TopoSortIndegree.INDEGREE_ARRAY_START_X-TopoSortIndegree.INDEGREE_ARRAY_ELEM_WIDTH,TopoSortIndegree.INDEGREE_ARRAY_START_Y+h*TopoSortIndegree.INDEGREE_ARRAY_ELEM_HEIGHT),this.cmd("Move",i[s],TopoSortIndegree.STACK_START_X,TopoSortIndegree.STACK_START_Y+s*TopoSortIndegree.STACK_HEIGHT),this.cmd("Step"),s++),this.cmd("Delete",this.highlightCircleL),this.cmd("Delete",this.highlightCircleAL),this.cmd("Delete",this.highlightCircleAM),this.cmd("SetTextColor",this.indegreeID[h],Graph.EDGE_COLOR),this.highlightEdge(o,h,0));this.cmd("SetHighlight",this.circleID[o],0),a++}return this.cmd("SetText",this.message1ID,""),this.cmd("SetText",this.stackLabelID,""),this.commands},TopoSortIndegree.prototype.setup_large=function(){this.d_x_pos=TopoSortIndegree.D_X_POS_LARGE,this.d_y_pos=TopoSortIndegree.D_Y_POS_LARGE,this.f_x_pos=TopoSortIndegree.F_X_POS_LARGE,this.f_y_pos=TopoSortIndegree.F_Y_POS_LARGE,TopoSortIndegree.superclass.setup_large.call(this)},TopoSortIndegree.prototype.setup_small=function(){this.d_x_pos=TopoSortIndegree.D_X_POS_SMALL,this.d_y_pos=TopoSortIndegree.D_Y_POS_SMALL,this.f_x_pos=TopoSortIndegree.F_X_POS_SMALL,this.f_y_pos=TopoSortIndegree.F_Y_POS_SMALL,TopoSortIndegree.superclass.setup_small.call(this)},TopoSortIndegree.prototype.dfsVisit=function(t,e,i){var s=this.nextIndex++;if(this.messageID.push(s),this.cmd("CreateLabel",s,"DFS("+String(t)+")",e,this.messageY,0),this.messageY=this.messageY+20,!this.visited[t]){this.d_times[t]=this.currentTime++,this.cmd("CreateLabel",this.d_timesID_L[t],"d = "+String(this.d_times[t]),this.d_x_pos[t],this.d_y_pos[t]),this.cmd("CreateLabel",this.d_timesID_AL[t],"d = "+String(this.d_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height-.25*this.adj_list_height),this.cmd("SetLayer",this.d_timesID_L[t],1),this.cmd("SetLayer",this.d_timesID_AL[t],2),this.visited[t]=!0,this.cmd("Step");for(var h=0;h<this.size;h++)this.adj_matrix[t][h]>0&&(this.highlightEdge(t,h,1),this.visited[h]&&(s=this.nextIndex,this.cmd("CreateLabel",s,"Vertex "+String(h)+" already this.visited.",e,this.messageY,0)),this.cmd("Step"),this.highlightEdge(t,h,0),this.visited[h]&&this.cmd("Delete",s,"DNM"),this.visited[h]||(this.cmd("Disconnect",this.circleID[t],this.circleID[h]),this.cmd("Connect",this.circleID[t],this.circleID[h],TopoSortIndegree.DFS_TREE_COLOR,this.curve[t][h],1,""),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[h],this.y_pos_logical[h]),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+h*this.adj_list_height),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+h*this.adj_matrix_height),this.cmd("Step"),this.dfsVisit(h,e+10,i),s=this.nextIndex,this.cmd("CreateLabel",s,"Returning from recursive call: DFS("+String(h)+")",e+20,this.messageY,0),this.cmd("Move",this.highlightCircleAL,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("Move",this.highlightCircleL,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("Move",this.highlightCircleAM,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("Step"),this.cmd("Delete",s,18)),this.cmd("Step"));var r;for(this.f_times[t]=this.currentTime++,this.cmd("CreateLabel",this.f_timesID_L[t],"f = "+String(this.f_times[t]),this.f_x_pos[t],this.f_y_pos[t]),this.cmd("CreateLabel",this.f_timesID_AL[t],"f = "+String(this.f_times[t]),this.adj_list_x_start-2*this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height+.25*this.adj_list_height),this.cmd("SetLayer",this.f_timesID_L[t],1),this.cmd("SetLayer",this.f_timesID_AL[t],2),this.cmd("Step"),r=this.topoOrderArrayL.length;r>0;r--)this.topoOrderArrayL[r]=this.topoOrderArrayL[r-1],this.topoOrderArrayAL[r]=this.topoOrderArrayAL[r-1],this.topoOrderArrayAM[r]=this.topoOrderArrayAM[r-1];var n=this.nextIndex++;for(this.messageID.push(n),this.cmd("CreateLabel",n,t,this.x_pos_logical[t],this.y_pos_logical[t]),this.cmd("SetLayer",n,1),this.topoOrderArrayL[0]=n,n=this.nextIndex++,this.messageID.push(n),this.cmd("CreateLabel",n,t,this.adj_list_x_start-this.adj_list_width,this.adj_list_y_start+t*this.adj_list_height),this.cmd("SetLayer",n,2),this.topoOrderArrayAL[0]=n,n=this.nextIndex++,this.messageID.push(n),this.cmd("CreateLabel",n,t,this.adj_matrix_x_start-this.adj_matrix_width,this.adj_matrix_y_start+t*this.adj_matrix_height),this.cmd("SetLayer",n,3),this.topoOrderArrayAM[0]=n,r=0;r<this.topoOrderArrayL.length;r++)this.cmd("Move",this.topoOrderArrayL[r],TopoSortIndegree.ORDERING_INITIAL_X,TopoSortIndegree.ORDERING_INITIAL_Y+r*TopoSortIndegree.ORDERING_DELTA_Y),this.cmd("Move",this.topoOrderArrayAL[r],TopoSortIndegree.ORDERING_INITIAL_X,TopoSortIndegree.ORDERING_INITIAL_Y+r*TopoSortIndegree.ORDERING_DELTA_Y),this.cmd("Move",this.topoOrderArrayAM[r],TopoSortIndegree.ORDERING_INITIAL_X,TopoSortIndegree.ORDERING_INITIAL_Y+r*TopoSortIndegree.ORDERING_DELTA_Y);this.cmd("Step")}},TopoSortIndegree.prototype.reset=function(){this.nextIndex=this.oldNextIndex,this.messageID=new Array,this.nextIndex=this.initialIndex},TopoSortIndegree.prototype.enableUI=function(t){this.startButton.disabled=!1,TopoSortIndegree.superclass.enableUI.call(this,t)},TopoSortIndegree.prototype.disableUI=function(t){this.startButton.disabled=!0,TopoSortIndegree.superclass.disableUI.call(this,t)},function(t,e,i){var s,h=256,r="random",n=i.pow(h,6),a=i.pow(2,52),o=2*a,l=h-1;function d(d,p,u){function _(){for(var t=D.g(6),e=n,i=0;t<a;)t=(t+i)*h,e*=h,i=D.g(1);for(;o<=t;)t/=2,e/=2,i>>>=1;return(t+i)/e}var I=[],S=g(function t(e,i){var s,h=[],r=typeof e;if(i&&"object"==r)for(s in e)try{h.push(t(e[s],i-1))}catch(t){}return h.length?h:"string"==r?e:e+"\0"}((p=1==p?{entropy:!0}:p||{}).entropy?[d,m(e)]:null==d?function(){try{var i;return s&&(i=s.randomBytes)?i=i(h):(i=new Uint8Array(h),(t.crypto||t.msCrypto).getRandomValues(i)),m(i)}catch(i){var r=t.navigator,n=r&&r.plugins;return[+new Date,t,n,t.screen,m(e)]}}():d,3),I),D=new function(t){var e,i=t.length,s=this,r=0,n=s.i=s.j=0,a=s.S=[];for(i||(t=[i++]);r<h;)a[r]=r++;for(r=0;r<h;r++)a[r]=a[n=l&n+t[r%i]+(e=a[r])],a[n]=e;(s.g=function(t){for(var e,i=0,r=s.i,n=s.j,a=s.S;t--;)e=a[r=l&r+1],i=i*h+a[l&(a[r]=a[n=l&n+e])+(a[n]=e)];return s.i=r,s.j=n,i})(h)}(I);return _.int32=function(){return 0|D.g(4)},_.quick=function(){return D.g(4)/4294967296},_.double=_,g(m(D.S),e),(p.pass||u||function(t,e,s,h){return h&&(h.S&&c(h,D),t.state=function(){return c(D,{})}),s?(i[r]=t,e):t})(_,S,"global"in p?p.global:this==i,p.state)}function c(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){for(var i,s=t+"",h=0;h<s.length;)e[l&h]=l&(i^=19*e[l&h])+s.charCodeAt(h++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(g(i.random(),e),"object"==typeof module&&module.exports){module.exports=d;try{s=require("crypto")}catch(d){}}else"function"==typeof define&&define.amd?define(function(){return d}):i["seed"+r]=d}("undefined"!=typeof self?self:this,[],Math);const printing=window.location.search.match(/print-pdf/gi);let Visualization={init:function(){Reveal.addEventListener("slidechanged",function(t){syncVisual(t.currentSlide)}),Reveal.addEventListener("fragmentshown",function(t){syncVisual(Reveal.getCurrentSlide())}),Reveal.addEventListener("fragmenthidden",function(t){syncVisual(Reveal.getCurrentSlide())}),Reveal.addKeyBinding(32,onNext),Reveal.addKeyBinding(80,onPrev),Reveal.addKeyBinding(39,onRight),Reveal.addKeyBinding(40,onDown),printing?Reveal.addEventListener("pdf-ready",initializeSlides):initializeSlides()}};function initializeSlides(){for(let slide of Reveal.getSlides()){let container=Array.from(slide.getElementsByTagName("div")).filter(t=>t.parentElement===slide&&t.hasAttribute("data-visual-algorithm"))[0];if(!container)continue;let revealScale=Reveal.getScale(),canvas=container.childNodes[0];canvas.style.transform="scale("+1/revealScale+")";let fullScale=revealScale*(container.getAttribute("data-visual-scale")||1),origWidth=canvas.width,origHeight=canvas.height;canvas.width=Math.floor(fullScale*canvas.width),canvas.height=Math.floor(fullScale*canvas.height),container.style.height=origHeight+"px",container.style.display="flex",container.style.justifyContent="center",container.style.alignItems="start",canvas.style.flexShrink=0;var manager=initCanvas(canvas,null);canvas.getContext("2d").scale(fullScale,fullScale);let seed=container.getAttribute("data-visual-seed");void 0!=seed&&Math.seedrandom(seed);let algArgs=[manager,origWidth,origHeight];for(let t=1;container.hasAttribute("data-visual-algorithm-arg-"+t);t++)algArgs.push(parseValue(container.getAttribute("data-visual-algorithm-arg-"+t)));let algClass=eval(container.getAttribute("data-visual-algorithm")),algorithm=new(Function.prototype.bind.apply(algClass,[null].concat(algArgs)));manager.SetPaused(!0);let initial=Array.from(slide.getElementsByTagName("div")).filter(function(t){return t.parentElement===slide&&!t.classList.contains("fragment")&&t.hasAttribute("data-visual-action")});for(let t of initial){let e=t.getAttribute("data-visual-action"),i=parseValue(t.getAttribute("data-visual-value"));algorithm.implementAction(algorithm[e].bind(algorithm),i),manager.skipForward()}slide.visualInfo={manager:manager,algorithm:algorithm,initialNo:initial.length,noSkipOnNextSync:!1},printing&&syncVisual(slide)}}function parseValue(t){return""==t?"":JSON.parse(t)}function currentAnimFragment(t){return(t.manager.AnimationSteps?t.manager.previousAnimationSteps.length:-1)-t.initialNo}function onNext(){let t=Reveal.getCurrentSlide().visualInfo;if(!t)return Reveal.next();t.manager.awaitingStep?t.manager.step():t.manager.currentlyAnimating||(t.noSkipOnNextSync=!0,Reveal.next())}function onPrev(){let t=Reveal.getCurrentSlide().visualInfo;if(!t)return Reveal.prev();let e=currentAnimFragment(t);if(t.manager.awaitingStep){function i(){t.manager.removeListener("AnimationWaiting",null,i),t.manager.removeListener("AnimationEnded",null,i),currentAnimFragment(t)!=e&&console.log("calling prev")}t.manager.stepBack(),t.manager.addListener("AnimationWaiting",null,i),t.manager.addListener("AnimationEnded",null,i)}else t.manager.currentlyAnimating||(e>-1?(t.noSkipOnNextSync=!0,t.manager.stepBack()):Reveal.prev())}function onRight(){let t=Reveal.getCurrentSlide().visualInfo;t&&(t.manager.awaitingStep||t.manager.currentlyAnimating)?t.manager.skipForward():Reveal.right()}function onDown(){let t=Reveal.getCurrentSlide().visualInfo;t&&(t.manager.awaitingStep||t.manager.currentlyAnimating)?t.manager.skipForward():Reveal.down()}function syncVisual(t){let e=t.visualInfo;if(!e)return;e.noSkipOnNextSync||e.manager.skipForward();let i=Array.from(t.getElementsByClassName("fragment")).filter(e=>e.parentElement===t),s=i.filter(t=>t.hasAttribute("data-visual-action")),h=i.filter(t=>t.classList.contains("visible")).map(t=>t.getAttribute("data-fragment-index")),r=currentAnimFragment(e),n=h.length?Math.max.apply(null,h):-1;for(;n<r;)e.manager.skipBack(),r--;for(;n>r&&s[++r];){let t=s[r].getAttribute("data-visual-action"),i=parseValue(s[r].getAttribute("data-visual-value"));e.algorithm.implementAction(e.algorithm[t].bind(e.algorithm),i),e.noSkipOnNextSync||e.manager.skipForward()}e.noSkipOnNextSync=!1}Reveal.registerPlugin("visualization",Visualization);
})()